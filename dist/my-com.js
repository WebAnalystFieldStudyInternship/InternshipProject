!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=e(1);i(o)},function(t,n,e){var i,o,a;(function(e){!function(e,r){o=[],i=r,a="function"==typeof i?i.apply(n,o):i,!(void 0!==a&&(t.exports=a))}(this,function(){var t="undefined"!=typeof e?e:this||window,n=document.documentElement,i=document.body,o="data-toggle",a="data-dismiss",r="data-spy",l="data-ride",c="Affix",u="Alert",s="Button",f="Carousel",d="Collapse",h="Dropdown",p="Modal",m="Popover",v="ScrollSpy",g="Tab",x="Tooltip",b="data-backdrop",T="data-keyboard",y="data-target",w="data-interval",I="data-height",C="data-pause",L="data-original-title",A="data-original-text",E="data-dismissible",M="data-trigger",k="data-animation",D="data-container",S="data-placement",B="data-delay",H="data-offset-top",N="data-offset-bottom",W="backdrop",F="keyboard",$="delay",O="content",P="target",j="interval",q="pause",z="animation",R="placement",_="container",U="offsetTop",X="offsetBottom",Y="offsetLeft",G="scrollTop",J="scrollLeft",K="clientWidth",Q="clientHeight",V="offsetWidth",Z="offsetHeight",tt="innerWidth",nt="innerHeight",et="scrollHeight",it="height",ot="aria-expanded",at="aria-hidden",rt="click",lt="hover",ct="keydown",ut="resize",st="scroll",ft="show",dt="shown",ht="hide",pt="hidden",mt="close",vt="closed",gt="slid",xt="slide",bt="change",Tt="getAttribute",yt="setAttribute",wt="hasAttribute",It="getElementsByTagName",Ct="getBoundingClientRect",Lt="querySelectorAll",At="getElementsByClassName",Et="indexOf",Mt="parentNode",kt="length",Dt="toLowerCase",St="Transition",Bt="Webkit",Ht="style",Nt="active",Wt="in",Ft="collapsing",$t="disabled",Ot="loading",Pt="left",jt="right",qt="top",zt="bottom",Rt=!("opacity"in i[Ht]),_t=".navbar-fixed-top",Ut=".navbar-fixed-bottom",Xt="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],Yt=/\b(top|bottom|left|top)+/,Gt=Bt+St in n[Ht]||St[Dt]()in n[Ht],Jt=Bt+St in n[Ht]?Bt[Dt]()+St+"End":St[Dt]()+"end",Kt=function(t){t.focus?t.focus():t.setActive()},Qt=function(t,n){t.classList.add(n)},Vt=function(t,n){t.classList.remove(n)},Zt=function(t,n){return t.classList.contains(n)},tn=function(t){for(var n=[],e=0,i=t[kt];e<i;e++)n.push(t[e]);return n},nn=function(t,n){var e=Rt?Lt:At;return tn(t[e](Rt?"."+n.replace(/\s(?=[a-z])/g,"."):n))},en=function(t,n){var e=n?n:document;return"object"==typeof t?t:e.querySelector(t)},on=function(t,n){for(var e=n.charAt(0);t&&t!==document;t=t[Mt])if("."===e){if(null!==en(n,t[Mt])&&Zt(t,n.replace(".","")))return t}else if("#"===e&&t.id===n.substr(1))return t;return!1},an=function(t,n,e){t.addEventListener(n,e,!1)},rn=function(t,n,e){t.removeEventListener(n,e,!1)},ln=function(t,n,e){an(t,n,function i(o){e(o),rn(t,n,i)})},cn=function(t,n){Gt?ln(t,Jt,function(t){n(t)}):n()},un=function(t,n,e){var i=new CustomEvent(t+".bs."+n);i.relatedTarget=e,this.dispatchEvent(i)},sn=document[It]("*"),fn=function(t,n,e,i){for(var o=i&&i[kt]?i:sn,a=0;a<o[kt];a++){var r=o[a][Tt](e),l=t.replace(/spy/i,"")[Dt]();(r&&t===s&&r[Et](l)>-1||r===l)&&new n(o[a])}},dn=/^\#(.)+$/,hn=function(n){var e=n&&(n.currentStyle||t.getComputedStyle(n)),i=/px/.test(e.borderTopWidth)?Math.round(e.borderTopWidth.replace("px","")):0,o=/px/.test(e.borderBottomWidth)?Math.round(e.borderBottomWidth.replace("px","")):0,a=/px/.test(e.marginTop)?Math.round(e.marginTop.replace("px","")):0,r=/px/.test(e.marginBottom)?Math.round(e.marginBottom.replace("px","")):0;return n[Q]+parseInt(i)+parseInt(o)+parseInt(a)+parseInt(r)},pn=function(t){for(var n=0,e=0,i=t.children[kt];e<i;e++)n+=hn(t.children[e]);return n},mn=function(e){var i=e[Ct]();return i[qt]>=0&&i[Pt]>=0&&i[zt]<=(t[nt]||n[Q])&&i[jt]<=(t[tt]||n[K])},vn=function(){return{y:t.pageYOffset||n[G],x:t.pageXOffset||n[J]}},gn=function(t,n,e,o){var a=t[Ct](),r=o===i?vn():{x:o[Y]+o[J],y:o[U]+o[G]},l={w:a[jt]-a[Pt],h:a[zt]-a[qt]},c={w:n[V],h:n[Z]};e===qt?(n[Ht][qt]=a[qt]+r.y-c.h+"px",n[Ht][Pt]=a[Pt]+r.x-c.w/2+l.w/2+"px"):e===zt?(n[Ht][qt]=a[qt]+r.y+l.h+"px",n[Ht][Pt]=a[Pt]+r.x-c.w/2+l.w/2+"px"):e===Pt?(n[Ht][qt]=a[qt]+r.y-c.h/2+l.h/2+"px",n[Ht][Pt]=a[Pt]+r.x-c.w+"px"):e===jt&&(n[Ht][qt]=a[qt]+r.y-c.h/2+l.h/2+"px",n[Ht][Pt]=a[Pt]+r.x+l.w+"px"),n.className[Et](e)===-1&&(n.className=n.className.replace(Yt,e))},xn=function(t){return t===qt?zt:t===zt?qt:t===Pt?jt:t===jt?Pt:t},bn=function(e,o){e=en(e),o=o||{};var a=e[Tt](y),r=e[Tt](H),l=e[Tt](N),u="affix",s="affixed",f="function",d="update",h="affix-top",p="affixed-top",m="affix-bottom",v="affixed-bottom";if(this[P]=o[P]?en(o[P]):en(a)||null,this[U]=o[U]?o[U]:parseInt(r)||0,this[X]=o[X]?o[X]:parseInt(l)||0,this[P]||this[U]||this[X]){var g,x,b,T,w,I,C=this,L=Gt?50:500,A=!1,E=!1,M=function(){return Math.max(i[et],i[Z],n[Q],n[et],n[Z])},k=function(){return null!==C[P]?C[P][Ct]()[qt]+T:C[U]?parseInt(typeof C[U]===f?C[U]():C[U]||0):void 0},D=function(){if(C[X])return b-e[Z]-parseInt(typeof C[X]===f?C[X]():C[X]||0)},S=function(){b=M(),T=parseInt(vn().y,0),g=k(),x=D(),w=parseInt(g)-T<0&&T>parseInt(g),I=parseInt(x)-T<0&&T>parseInt(x)},B=function(){A||Zt(e,u)||(un.call(e,u,u),un.call(e,h,u),Qt(e,u),A=!0,un.call(e,s,u),un.call(e,p,u))},W=function(){A&&Zt(e,u)&&(Vt(e,u),A=!1)},F=function(){E||Zt(e,m)||(un.call(e,u,u),un.call(e,m,u),Qt(e,m),E=!0,un.call(e,s,u),un.call(e,v,u))},$=function(){E&&Zt(e,m)&&(Vt(e,m),E=!1)},O=function(){I?(w&&W(),F()):($(),w?B():W())};this[d]=function(){S(),O()},c in e||(an(t,st,this[d]),an(t,ut,function(){setTimeout(function(){C[d]()},L)})),e[c]=this,this[d]()}};fn(c,bn,r);var Tn=function(t){t=en(t);var n=this,e="alert",i=on(t,"."+e),o=function(o){var r=o[P];r=r[wt](a)?r:r[Mt],r&&r[wt](a)&&(i=on(r,"."+e),t=en("["+a+'="'+e+'"]',i),(t===r||t===r[Mt])&&i&&n.close())},r=function(){un.call(i,vt,e),rn(t,rt,o),i[Mt].removeChild(i)};this.close=function(){i&&t&&Zt(i,Wt)&&(un.call(i,mt,e),Vt(i,Wt),function(){i&&cn(i,r)}())},u in t||an(t,rt,o),t[u]=this};fn(u,Tn,a);var yn=function(t,n){t=en(t),n=n||null;var e=!1,i="button",o="checked",a="reset",r="LABEL",l="INPUT",c=function(){n&&n!==a&&(n===Ot&&(Qt(t,$t),t[yt]($t,$t)),t[yt](A,t.innerHTML.replace(/^\s+|\s+$/g,"")),t.innerHTML=t[Tt]("data-"+n+"-text"))},u=function(){t[Tt](A)&&((Zt(t,$t)||t[Tt]($t)===$t)&&(Vt(t,$t),t.removeAttribute($t)),t.innerHTML=t[Tt](A))},f=function(n){var a=n[P][Mt],c=n[P].tagName===r?n[P]:a.tagName===r?a:null;if(c){var u=this,s=nn(u,"btn"),f=c[It](l)[0];if(f){if("checkbox"===f.type&&(f[o]?(Vt(c,Nt),f[Tt](o),f.removeAttribute(o),f[o]=!1):(Qt(c,Nt),f[Tt](o),f[yt](o,o),f[o]=!0),e||(e=!0,un.call(f,bt,i),un.call(t,bt,i))),"radio"===f.type&&!e&&!f[o]){Qt(c,Nt),f[yt](o,o),f[o]=!0,un.call(f,bt,i),un.call(t,bt,i),e=!0;for(var d=0,h=s[kt];d<h;d++){var p=s[d],m=p[It](l)[0];p!==c&&Zt(p,Nt)&&(Vt(p,Nt),m.removeAttribute(o),m[o]=!1,un.call(m,bt,i))}}setTimeout(function(){e=!1},50)}}};Zt(t,"btn")&&null!==n&&(n!==a?c():u()),Zt(t,"btn-group")&&(s in t||an(t,rt,f),t[s]=this)};fn(s,yn,o);var wn=function(n,e){n=en(n),e=e||{};var i="false"!==n[Tt](w)&&(parseInt(n[Tt](w))||5e3),o=n[Tt](C)===lt||!1,a="true"===n[Tt](T)||!1,r="carousel",l="paused",c="direction",u="data-slide-to";this[F]=e[F]===!0||a,this[q]=!(e[q]!==lt&&!o)&&lt,e[j]||i?this[j]=parseInt(e[j])||i:this[j]=!1;var s=this,d=n.index=0,h=n.timer=0,p=!1,m=nn(n,"item"),v=m[kt],g=this[c]=Pt,x=nn(n,r+"-control"),b=x[0],y=x[1],I=en("."+r+"-indicators",n),L=I[It]("LI"),A=function(){s[j]===!1||Zt(n,l)||(Qt(n,l),!p&&clearInterval(h))},E=function(){s[j]!==!1&&Zt(n,l)&&(Vt(n,l),!p&&clearInterval(h),!p&&s.cycle())},M=function(t){if(t.preventDefault(),!p){var n=t[P],e=s.getActiveIndex();if(!n||Zt(n,Nt)||!n[Tt](u))return!1;d=parseInt(n[Tt](u),10),e<d||0===e&&d===v-1?g=s[c]=Pt:(e>d||e===v-1&&0===d)&&(g=s[c]=jt),s.slideTo(d)}},k=function(t){if(t.preventDefault(),!p){var n=t.currentTarget||t.srcElement;n===y?(d++,g=s[c]=Pt,d===v-1?d=v-1:d===v&&(d=0)):n===b&&(d--,g=s[c]=jt,0===d?d=0:d<0&&(d=v-1)),s.slideTo(d)}},D=function(t){if(!p){switch(t.which){case 39:d++,g=s[c]=Pt,d==v-1?d=v-1:d==v&&(d=0);break;case 37:d--,g=s[c]=jt,0==d?d=0:d<0&&(d=v-1);break;default:return}s.slideTo(d)}},S=function(t){for(var n=0,e=L[kt];n<e;n++)Vt(L[n],Nt);L[t]&&Qt(L[t],Nt)};this.cycle=function(){g=this[c]=Pt,h=setInterval(function(){d++,d=d===v?0:d,s.slideTo(d)},this[j])},this.slideTo=function(t){var e=this.getActiveIndex(),i=g===Pt?"next":"prev";un.call(n,xt,r,m[t]),p=this.isSliding=!0,clearInterval(h),S(t),Gt&&Zt(n,"slide")?(Qt(m[t],i),m[t][V],Qt(m[t],g),Qt(m[e],g),ln(m[e],Jt,function(o){var a=o[P]!==m[e]?1e3*o.elapsedTime:0;setTimeout(function(){p=s.isSliding=!1,Qt(m[t],Nt),Vt(m[e],Nt),Vt(m[t],i),Vt(m[t],g),Vt(m[e],g),un.call(n,gt,r,m[t]),s[j]&&!Zt(n,l)&&s.cycle()},a)})):(Qt(m[t],Nt),m[t][V],Vt(m[e],Nt),setTimeout(function(){p=!1,s[j]&&!Zt(n,l)&&s.cycle(),un.call(n,gt,r,m[t])},100))},this.getActiveIndex=function(){return m[Et](nn(n,"item active")[0])||0},f in n||(this[q]&&this[j]&&(an(n,Xt[0],A),an(n,Xt[1],E),an(n,"touchstart",A),an(n,"touchend",E)),y&&an(y,rt,k),b&&an(b,rt,k),I&&an(I,rt,M,!1),this[F]===!0&&an(t,ct,D,!1)),this.getActiveIndex()<0&&(m[kt]&&Qt(m[0],Nt),L[kt]&&S(0)),this[j]&&this.cycle(),n[f]=this};fn(f,wn,l);var In=function(t,n){t=en(t),n=n||{};var e=null,i=null,o=this,a=!1,r=t[Tt]("data-parent"),l="collapse",c="collapsed",u=function(t){un.call(t,ft,l),a=!0,Qt(t,Ft),Qt(t,Wt),setTimeout(function(){t[Ht][it]=pn(t)+"px",function(){cn(t,function(){a=!1,t[yt](ot,"true"),Vt(t,Ft),t[Ht][it]="",un.call(t,dt,l)})}()},20)},s=function(t){un.call(t,ht,l),a=!0,t[Ht][it]=pn(t)+"px",setTimeout(function(){Qt(t,Ft),t[Ht][it]="0px",function(){cn(t,function(){a=!1,t[yt](ot,"false"),Vt(t,Ft),Vt(t,Wt),t[Ht][it]="",un.call(t,pt,l)})}()},20)},f=function(){var n=t.href&&t[Tt]("href"),e=t[Tt](y),i=n||e&&dn.test(e)&&e;return i&&en(i)};this.toggle=function(t){t.preventDefault(),a||(Zt(i,Wt)?o.hide():o.show())},this.hide=function(){s(i),Qt(t,c)},this.show=function(){if(u(i),Vt(t,c),null!==e)for(var n=nn(e,l+" "+Wt),o=0,a=n[kt];o<a;o++)n[o]!==i&&s(n[o])},d in t||an(t,rt,this.toggle),i=f(),e=en(n.parent)||r&&on(t,r),t[d]=this};fn(d,In,o);var Cn=function(t,n){t=en(t),this.persist=n===!0||"true"===t[Tt]("data-persist")||!1;var e=this,i=!1,a=t[Mt],r="dropdown",l="open",c=null,u=en(".dropdown-menu",a),s=tn(u[It]("*")),f=function(t){!i||27!=t.which&&27!=t.keyCode||(c=null,m())},d=function(n){var r,l=n[P];if(r=1!==l.nodeType&&(l[Tt](o)||l[Mt][Tt](o)),l===t||l===a||l[Mt]===t)n.preventDefault(),c=t,e.toggle();else if(i){if((l===u||s&&s[Et](l)>-1)&&(e.persist||r))return;c=null,m()}(/\#$/.test(l.href)||l[Mt]&&/\#$/.test(l[Mt].href))&&n.preventDefault()},p=function(){un.call(a,ft,r,c),Qt(a,l),u[yt](ot,!0),un.call(a,dt,r,c),an(document,ct,f),i=!0},m=function(){un.call(a,ht,r,c),Vt(a,l),u[yt](ot,!1),un.call(a,pt,r,c),rn(document,ct,f),i=!1};this.toggle=function(){Zt(a,l)&&i?m():p()},h in t||(u[yt]("tabindex","0"),an(document,rt,d)),t[h]=this};fn(h,Cn,o);var Ln=function(e,o){e=en(e);var r=e[Tt](y)||e[Tt]("href"),l=en(r),c=Zt(e,"modal")?e:l,u="modal",s="static",f="paddingLeft",d="paddingRight",h="modal-backdrop";if(Zt(e,"modal")&&(e=null),c){o=o||{},this[F]=o[F]!==!1&&"false"!==c[Tt](T),this[W]=o[W]!==s&&c[Tt](b)!==s||s,this[W]=o[W]!==!1&&"false"!==c[Tt](b)&&this[W],this[O]=o[O];var m,v,g,x,w=this,I=this.open=!1,C=null,L=nn(n,"navbar-fixed-top").concat(nn(n,"navbar-fixed-bottom")),A=function(){var e=n[Ct]();return t[tt]||e[jt]-Math.abs(e[Pt])},E=function(){var n,e=i.currentStyle||t.getComputedStyle(i),o=parseInt(e[d],10);if(m&&(i[Ht][d]=o+g+"px",L[kt]))for(var a=0;a<L[kt];a++)n=t.getComputedStyle(L[a])[d],L[a][Ht][d]=parseInt(n)+g+"px"},M=function(){if(i[Ht][d]="",L[kt])for(var t=0;t<L[kt];t++)L[t][Ht][d]=""},k=function(){var t,n=document.createElement("div");return n.className=u+"-scrollbar-measure",i.appendChild(n),t=n[V]-n[K],i.removeChild(n),t},D=function(){m=i[K]<A(),v=c[et]>n[Q],g=k()},S=function(){c[Ht][f]=!m&&v?g+"px":"",c[Ht][d]=m&&!v?g+"px":""},B=function(){c[Ht][f]="",c[Ht][d]=""},H=function(){var t=document.createElement("div");x=en("."+h),null===x&&(t[yt]("class",h+" fade"),x=t,i.appendChild(x))},N=function(){x=en("."+h),x&&null!==x&&"object"==typeof x&&(i.removeChild(x),x=null)},$=function(){Zt(c,Wt)?rn(document,ct,R):an(document,ct,R)},j=function(){Zt(c,Wt)?rn(t,ut,w.update):an(t,ut,w.update)},q=function(){Zt(c,Wt)?rn(c,rt,_):an(c,rt,_)},z=function(t){var n=t[P];n=n[wt](y)||n[wt]("href")?n:n[Mt],I||n!==e||Zt(c,Wt)||(c.modalTrigger=e,C=e,w.show(),t.preventDefault())},R=function(t){var n=t.which||t.keyCode;w[F]&&27==n&&I&&w.hide()},_=function(t){var n=t[P];I&&(n[Mt][Tt](a)===u||n[Tt](a)===u||n===c&&w[W]!==s)&&(w.hide(),C=null,t.preventDefault())};this.toggle=function(){I&&Zt(c,Wt)?this.hide():this.show()},this.show=function(){un.call(c,ft,u,C);var t=nn(document,u+" in")[0];t&&t!==c&&t.modalTrigger[p].hide(),this[W]&&H(),x&&!Zt(x,Wt)&&setTimeout(function(){Qt(x,Wt)},0),setTimeout(function(){c[Ht].display="block",D(),E(),S(),j(),q(),$(),Qt(i,u+"-open"),Qt(c,Wt),c[yt](at,!1),cn(c,function(){I=w.open=!0,Kt(c),un.call(c,dt,u,C)})},Gt?150:0)},this.hide=function(){un.call(c,ht,u),x=en("."+h),Vt(c,Wt),c[yt](at,!0),!!x&&Vt(x,Wt),setTimeout(function(){cn(c,function(){j(),q(),$(),c[Ht].display="",I=w.open=!1,e&&Kt(e),un.call(c,pt,u),setTimeout(function(){nn(document,u+" "+Wt)[0]||(B(),M(),Vt(i,u+"-open"),N())},100)})},Gt?150:0)},this.setContent=function(t){en("."+u+"-content",c).innerHTML=t},this.update=function(){I&&(D(),E(),S())},!e||p in e||an(e,rt,z),this[O]&&this.setContent(this[O]),!!e&&(e[p]=this)}};fn(p,Ln,o);var An=function(n,e){n=en(n);var o=n[Tt](M),a=n[Tt](k),r=n[Tt](S),l=n[Tt](E),c=n[Tt](B),u=n[Tt](D),s="popover",f="template",d="trigger",h="class",p="div",v="fade",g="data-title",x="data-content",b="dismissible",T='<button type="button" class="close">Ã—</button>',y=on(n,".modal"),w=on(n,_t),I=on(n,Ut);e=e||{},this[f]=e[f]?e[f]:null,this[d]=e[d]?e[d]:o||lt,this[z]=e[z]&&e[z]!==v?e[z]:a||v,this[R]=e[R]?e[R]:r||qt,this[$]=parseInt(e[$]||c)||200,this[b]=!(!e[b]&&"true"!==l),this[_]=en(e[_])?en(e[_]):en(u)?en(u):w?w:I?I:y?y:i;var C=this,L=n[Tt](g)||null,A=n[Tt](x)||null;if(A||this[f]){var H=null,N=0,W=this[R],F=function(t){null!==H&&t[P]===en(".close",H)&&C.hide()},O=function(){C[_].removeChild(H),N=null,H=null},j=function(){if(L=n[Tt](g),A=n[Tt](x),H=document.createElement(p),null!==A&&null===C[f]){if(H[yt]("role","tooltip"),null!==L){var t=document.createElement("h3");t[yt](h,s+"-title"),t.innerHTML=C[b]?L+T:L,H.appendChild(t)}var e=document.createElement(p),i=document.createElement(p);e[yt](h,"arrow"),i[yt](h,s+"-content"),H.appendChild(e),H.appendChild(i),i.innerHTML=C[b]&&null===L?A+T:A}else{var o=document.createElement(p);o.innerHTML=C[f],H.innerHTML=o.firstChild.innerHTML}C[_].appendChild(H),H[Ht].display="block",H[yt](h,s+" "+W+" "+C[z])},q=function(){!Zt(H,Wt)&&Qt(H,Wt)},U=function(){gn(n,H,W,C[_]),mn(H)||(W=xn(W),gn(n,H,W,C[_]))};this.toggle=function(){null===H?C.show():C.hide()},this.show=function(){clearTimeout(N),N=setTimeout(function(){null===H&&(W=C[R],j(),U(),q(),un.call(n,ft,s),cn(H,function(){un.call(n,dt,s)}))},20)},this.hide=function(){clearTimeout(N),N=setTimeout(function(){H&&null!==H&&Zt(H,Wt)&&(un.call(n,ht,s),Vt(H,Wt),cn(H,function(){O(),un.call(n,pt,s)}))},C[$])},m in n||(C[d]===lt?(an(n,Xt[0],C.show),C[b]||an(n,Xt[1],C.hide)):/^(click|focus)$/.test(C[d])&&(an(n,C[d],C.toggle),C[b]||an(n,"blur",C.hide)),C[b]&&an(document,rt,F),!Rt&&an(t,ut,C.hide)),n[m]=C}};fn(m,An,o);var En=function(n,e){n=en(n);var i=en(n[Tt](y));if(e=e||{},e[P]||i){for(var o,a=e[P]&&en(e[P])||i,r=a&&a[It]("A"),l=[],c=[],u=n[Z]<n[et]?n:t,s=u===t,f=0,d=r[kt];f<d;f++){var h=r[f][Tt]("href"),p=h&&dn.test(h)&&en(h);p&&(l.push(r[f]),c.push(p))}var m=function(t){var e=l[t][Mt],i=c[t],a=on(e,".dropdown"),r=s&&i[Ct](),u=Zt(e,Nt)||!1,f=s?r[qt]+o:i[U]-(c[t-1]?0:10),d=s?r[zt]+o:c[t+1]?c[t+1][U]:n[et],h=o>=f&&d>o;if(!u&&h)"LI"!==e.tagName||Zt(e,Nt)||(Qt(e,Nt),u=!0,a&&!Zt(a,Nt)&&Qt(a,Nt),un.call(n,"activate","scrollspy",l[t]));else if(h){if(!h&&!u||u&&h)return}else"LI"===e.tagName&&Zt(e,Nt)&&(Vt(e,Nt),u=!1,a&&Zt(a,Nt)&&!nn(e[Mt],Nt).length&&Vt(a,Nt))},g=function(){o=s?vn().y:n[G];for(var t=0,e=l[kt];t<e;t++)m(t)};this.refresh=function(){g()},v in n||(an(u,st,this.refresh),!Rt&&an(t,ut,this.refresh)),this.refresh(),n[v]=this}};fn(v,En,r);var Mn=function(t,n){t=en(t);var e=t[Tt](I),i="tab",a="height",r="isAnimating";t[r]=!1,n=n||{},this[a]=!!Gt&&(n[a]||"true"===e);var l,c,u=this,s=on(t,".nav"),f=s&&en(".dropdown",s);if(s){var d=function(){var t,n=nn(s,Nt);return 1!==n[kt]||Zt(n[0],"dropdown")?n[kt]>1&&(t=n[n[kt]-1]):t=n[0],t[It]("A")[0]},h=function(){return en(d()[Tt]("href"))},p=function(t){t.preventDefault(),l=t[P][Tt](o)===i||dn.test(t[P][Tt]("href"))?t[P]:t[P][Mt],u.show()};this.show=function(){var n=en(l[Tt]("href")),e=d(),o=h();e[r]&&l[r]||Zt(l[Mt],Nt)||(e[r]=l[r]=!0,Vt(e[Mt],Nt),Qt(l[Mt],Nt),f&&(Zt(t[Mt][Mt],"dropdown-menu")?Zt(f,Nt)||Qt(f,Nt):Zt(f,Nt)&&Vt(f,Nt)),c&&(c[Ht][a]=pn(o)+"px"),function(){Vt(o,Wt),un.call(e,ht,i,l),function(){cn(o,function(){Vt(o,Nt),Qt(n,Nt),setTimeout(function(){Qt(n,Wt),n[Z],c&&Qt(c,Ft),function(){un.call(l,ft,i,e),function(){c&&(c[Ht][a]=pn(n)+"px"),un.call(e,pt,i,l)}()}()},20)})}()}(),function(){cn(n,function(){un.call(l,dt,i,e),c?!function(){cn(c,function(){setTimeout(function(){c[Ht][a]="",Vt(c,Ft),e[r]=l[r]=!1},200)})}():e[r]=l[r]=!1})}())},g in t||an(t,rt,p),this[a]&&(c=h()[Mt]),t[g]=this}};fn(g,Mn,o);var kn=function(t,n){t=en(t);var e=t[Tt](k);placementData=t[Tt](S),delayData=t[Tt](B),containerData=t[Tt](D),component="tooltip",classString="class",title="title",fade="fade",div="div",modal=on(t,".modal"),navbarFixedTop=on(t,_t),navbarFixedBottom=on(t,Ut),n=n||{},this[z]=n[z]&&n[z]!==fade?n[z]:e||fade,this[R]=n[R]?n[R]:placementData||qt,this[$]=parseInt(n[$]||delayData)||200,this[_]=en(n[_])?en(n[_]):en(containerData)?en(containerData):navbarFixedTop?navbarFixedTop:navbarFixedBottom?navbarFixedBottom:modal?modal:i;var o=this,a=0,r=this[R],l=null,c=t[Tt](title)||t[Tt](L);if(c){var u=function(){o[_].removeChild(l),l=null,a=null},s=function(){c=t[Tt](title)||t[Tt](L),l=document.createElement(div),l[yt]("role",component);var n=document.createElement(div),e=document.createElement(div);n[yt](classString,component+"-arrow"),e[yt](classString,component+"-inner"),l.appendChild(n),l.appendChild(e),e.innerHTML=c,o[_].appendChild(l),l[yt](classString,component+" "+r+" "+o[z])},f=function(){gn(t,l,r,o[_]),mn(l)||(r=xn(r),gn(t,l,r,o[_]))},d=function(){!Zt(l,Wt)&&Qt(l,Wt)};this.show=function(){clearTimeout(a),a=setTimeout(function(){null===l&&(r=o[R],s(),f(),d(),un.call(t,ft,component),cn(l,function(){un.call(t,dt,component)}))},20)},this.hide=function(){clearTimeout(a),a=setTimeout(function(){l&&null!==l&&Zt(l,Wt)&&(un.call(t,ht,component),Vt(l,Wt),cn(l,function(){u(),un.call(t,pt,component)}))},o[$])},this.toggle=function(){l?o.hide():o.show()},x in t||(t[yt](L,c),t.removeAttribute(title),an(t,Xt[0],this.show),an(t,Xt[1],this.hide)),t[x]=this}};return fn(x,kn,o),{Affix:bn,Alert:Tn,Button:yn,Carousel:wn,Collapse:In,Dropdown:Cn,Modal:Ln,Popover:An,ScrollSpy:En,Tab:Mn,Tooltip:kn}})}).call(n,function(){return this}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbXktY29tLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA1NjUwYzA5OTgwNmQ3OWJlM2M4NSIsIndlYnBhY2s6Ly8vLi9qcy9sYXlvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ib290c3RyYXAubmF0aXZlL2Rpc3QvYm9vdHN0cmFwLW5hdGl2ZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfYm9vdHN0cmFwIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiZ2xvYmFsIiwicm9vdCIsImZhY3RvcnkiLCJhcHBseSIsInVuZGVmaW5lZCIsInRoaXMiLCJnbG9iYWxPYmplY3QiLCJ3aW5kb3ciLCJkb2MiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImJvZHkiLCJkYXRhVG9nZ2xlIiwiZGF0YURpc21pc3MiLCJkYXRhU3B5IiwiZGF0YVJpZGUiLCJzdHJpbmdBZmZpeCIsInN0cmluZ0FsZXJ0Iiwic3RyaW5nQnV0dG9uIiwic3RyaW5nQ2Fyb3VzZWwiLCJzdHJpbmdDb2xsYXBzZSIsInN0cmluZ0Ryb3Bkb3duIiwic3RyaW5nTW9kYWwiLCJzdHJpbmdQb3BvdmVyIiwic3RyaW5nU2Nyb2xsU3B5Iiwic3RyaW5nVGFiIiwic3RyaW5nVG9vbHRpcCIsImRhdGFiYWNrZHJvcCIsImRhdGFLZXlib2FyZCIsImRhdGFUYXJnZXQiLCJkYXRhSW50ZXJ2YWwiLCJkYXRhSGVpZ2h0IiwiZGF0YVBhdXNlIiwiZGF0YU9yaWdpbmFsVGl0bGUiLCJkYXRhT3JpZ2luYWxUZXh0IiwiZGF0YURpc21pc3NpYmxlIiwiZGF0YVRyaWdnZXIiLCJkYXRhQW5pbWF0aW9uIiwiZGF0YUNvbnRhaW5lciIsImRhdGFQbGFjZW1lbnQiLCJkYXRhRGVsYXkiLCJkYXRhT2Zmc2V0VG9wIiwiZGF0YU9mZnNldEJvdHRvbSIsImJhY2tkcm9wIiwia2V5Ym9hcmQiLCJkZWxheSIsImNvbnRlbnQiLCJ0YXJnZXQiLCJpbnRlcnZhbCIsInBhdXNlIiwiYW5pbWF0aW9uIiwicGxhY2VtZW50IiwiY29udGFpbmVyIiwib2Zmc2V0VG9wIiwib2Zmc2V0Qm90dG9tIiwib2Zmc2V0TGVmdCIsInNjcm9sbFRvcCIsInNjcm9sbExlZnQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiaGVpZ2h0IiwiYXJpYUV4cGFuZGVkIiwiYXJpYUhpZGRlbiIsImNsaWNrRXZlbnQiLCJob3ZlckV2ZW50Iiwia2V5ZG93bkV2ZW50IiwicmVzaXplRXZlbnQiLCJzY3JvbGxFdmVudCIsInNob3dFdmVudCIsInNob3duRXZlbnQiLCJoaWRlRXZlbnQiLCJoaWRkZW5FdmVudCIsImNsb3NlRXZlbnQiLCJjbG9zZWRFdmVudCIsInNsaWRFdmVudCIsInNsaWRlRXZlbnQiLCJjaGFuZ2VFdmVudCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImhhc0F0dHJpYnV0ZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicXVlcnlTZWxlY3RvckFsbCIsImdldEVsZW1lbnRzQnlDTEFTU05BTUUiLCJpbmRleE9mIiwicGFyZW50Tm9kZSIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiVHJhbnNpdGlvbiIsIldlYmtpdCIsInN0eWxlIiwiYWN0aXZlIiwiaW5DbGFzcyIsImNvbGxhcHNpbmciLCJkaXNhYmxlZCIsImxvYWRpbmciLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJpc0lFOCIsImZpeGVkVG9wIiwiZml4ZWRCb3R0b20iLCJtb3VzZUhvdmVyIiwidGlwUG9zaXRpb25zIiwic3VwcG9ydFRyYW5zaXRpb25zIiwidHJhbnNpdGlvbkVuZEV2ZW50Iiwic2V0Rm9jdXMiLCJlbGVtZW50IiwiZm9jdXMiLCJzZXRBY3RpdmUiLCJhZGRDbGFzcyIsImNsYXNzTkFNRSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUNsYXNzIiwicmVtb3ZlIiwiaGFzQ2xhc3MiLCJjb250YWlucyIsIm5vZGVMaXN0VG9BcnJheSIsIm5vZGVMaXN0IiwiY2hpbGRJdGVtcyIsImkiLCJubGwiLCJwdXNoIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNlbGVjdGlvbk1ldGhvZCIsInJlcGxhY2UiLCJxdWVyeUVsZW1lbnQiLCJzZWxlY3RvciIsInBhcmVudCIsImxvb2tVcCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRDbG9zZXN0IiwiZmlyc3RDaGFyIiwiY2hhckF0Iiwic3Vic3RyIiwib24iLCJldmVudCIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwib2ZmIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uZSIsImhhbmRsZXJXcmFwcGVyIiwiZSIsImVtdWxhdGVUcmFuc2l0aW9uRW5kIiwiYm9vdHN0cmFwQ3VzdG9tRXZlbnQiLCJldmVudE5hbWUiLCJjb21wb25lbnROYW1lIiwicmVsYXRlZCIsIk9yaWdpbmFsQ3VzdG9tRXZlbnQiLCJDdXN0b21FdmVudCIsInJlbGF0ZWRUYXJnZXQiLCJkaXNwYXRjaEV2ZW50IiwiQWxsRE9NRWxlbWVudHMiLCJpbml0aWFsaXplRGF0YUFQSSIsImNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwiZGF0YUF0dHJpYnV0ZSIsImNvbGxlY3Rpb24iLCJhdHRyVmFsdWUiLCJleHBlY3RlZEF0dHJWYWx1ZSIsInRhcmdldHNSZWciLCJnZXRPdXRlckhlaWdodCIsImNoaWxkIiwiY2hpbGRTdHlsZSIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJidHAiLCJ0ZXN0IiwiYm9yZGVyVG9wV2lkdGgiLCJNYXRoIiwicm91bmQiLCJidGIiLCJib3JkZXJCb3R0b21XaWR0aCIsIm10cCIsIm1hcmdpblRvcCIsIm1icCIsIm1hcmdpbkJvdHRvbSIsInBhcnNlSW50IiwiZ2V0TWF4SGVpZ2h0IiwicGFyZW50SGVpZ2h0IiwiayIsImxsIiwiY2hpbGRyZW4iLCJpc0VsZW1lbnRJblZpZXdwb3J0IiwicmVjdCIsImdldFNjcm9sbCIsInkiLCJwYWdlWU9mZnNldCIsIngiLCJwYWdlWE9mZnNldCIsInN0eWxlVGlwIiwibGluayIsInBvc2l0aW9uIiwic2Nyb2xsIiwibGlua0RpbWVuc2lvbnMiLCJ3IiwiaCIsImVsZW1lbnREaW1lbnNpb25zIiwiY2xhc3NOYW1lIiwidXBkYXRlUGxhY2VtZW50IiwiQWZmaXgiLCJvcHRpb25zIiwidGFyZ2V0RGF0YSIsIm9mZnNldFRvcERhdGEiLCJvZmZzZXRCb3R0b21EYXRhIiwiYWZmaXgiLCJhZmZpeGVkIiwiZm4iLCJ1cGRhdGUiLCJhZmZpeFRvcCIsImFmZml4ZWRUb3AiLCJhZmZpeEJvdHRvbSIsImFmZml4ZWRCb3R0b20iLCJwaW5PZmZzZXRUb3AiLCJwaW5PZmZzZXRCb3R0b20iLCJtYXhTY3JvbGwiLCJzY3JvbGxZIiwicGlubmVkVG9wIiwicGlubmVkQm90dG9tIiwic2VsZiIsInJlc2l6ZURlbGF5IiwiYWZmaXhlZFRvVG9wIiwiYWZmaXhlZFRvQm90dG9tIiwiZ2V0TWF4U2Nyb2xsIiwibWF4IiwiZ2V0T2Zmc2V0VG9wIiwiZ2V0T2Zmc2V0Qm90dG9tIiwiY2hlY2tQb3NpdGlvbiIsInBpblRvcCIsInVuUGluVG9wIiwicGluQm90dG9tIiwidW5QaW5Cb3R0b20iLCJ1cGRhdGVQaW4iLCJzZXRUaW1lb3V0IiwiQWxlcnQiLCJhbGVydCIsImNsaWNrSGFuZGxlciIsImV2ZW50VGFyZ2V0IiwiY2xvc2UiLCJ0cmFuc2l0aW9uRW5kSGFuZGxlciIsInJlbW92ZUNoaWxkIiwiQnV0dG9uIiwib3B0aW9uIiwidG9nZ2xlZCIsImNoZWNrZWQiLCJyZXNldCIsIkxBQkVMIiwiSU5QVVQiLCJzZXRTdGF0ZSIsImlubmVySFRNTCIsInJlc2V0U3RhdGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0b2dnbGUiLCJsYWJlbCIsInRhZ05hbWUiLCJsYWJlbHMiLCJpbnB1dCIsInR5cGUiLCJvdGhlckxhYmVsIiwib3RoZXJJbnB1dCIsIkNhcm91c2VsIiwiaW50ZXJ2YWxEYXRhIiwicGF1c2VEYXRhIiwia2V5Ym9hcmREYXRhIiwicGF1c2VkIiwiZGlyZWN0aW9uIiwiZGF0YVNsaWRlVG8iLCJpbmRleCIsInRpbWVyIiwiaXNTbGlkaW5nIiwic2xpZGVzIiwidG90YWwiLCJzbGlkZURpcmVjdGlvbiIsImNvbnRyb2xzIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImluZGljYXRvciIsImluZGljYXRvcnMiLCJwYXVzZUhhbmRsZXIiLCJjbGVhckludGVydmFsIiwicmVzdW1lSGFuZGxlciIsImN5Y2xlIiwiaW5kaWNhdG9ySGFuZGxlciIsInByZXZlbnREZWZhdWx0IiwiYWN0aXZlSW5kaWNhdG9yIiwiZ2V0QWN0aXZlSW5kZXgiLCJzbGlkZVRvIiwiY29udHJvbHNIYW5kbGVyIiwiY3VycmVudFRhcmdldCIsInNyY0VsZW1lbnQiLCJrZXlIYW5kbGVyIiwid2hpY2giLCJzZXRBY3RpdmVQYWdlIiwicGFnZUluZGV4IiwiaWNsIiwic2V0SW50ZXJ2YWwiLCJuZXh0IiwiYWN0aXZlSXRlbSIsIm9yaWVudGF0aW9uIiwidGltZW91dCIsImVsYXBzZWRUaW1lIiwiQ29sbGFwc2UiLCJhY2NvcmRpb24iLCJjb2xsYXBzZSIsImlzQW5pbWF0aW5nIiwiYWNjb3JkaW9uRGF0YSIsImNvbGxhcHNlZCIsIm9wZW5BY3Rpb24iLCJjb2xsYXBzZUVsZW1lbnQiLCJjbG9zZUFjdGlvbiIsImdldFRhcmdldCIsImhyZWYiLCJoaWRlIiwic2hvdyIsImFjdGl2ZUNvbGxhcHNlcyIsImFsIiwiRHJvcGRvd24iLCJwZXJzaXN0IiwiaXNPcGVuIiwib3BlbiIsIm1lbnUiLCJrZXlDb2RlIiwiaGFzRGF0YSIsIm5vZGVUeXBlIiwiTW9kYWwiLCJidG5DaGVjayIsImNoZWNrTW9kYWwiLCJtb2RhbCIsInN0YXRpY1N0cmluZyIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwibW9kYWxCYWNrZHJvcFN0cmluZyIsImJvZHlJc092ZXJmbG93aW5nIiwibW9kYWxJc092ZXJmbG93aW5nIiwic2Nyb2xsYmFyV2lkdGgiLCJvdmVybGF5IiwiZml4ZWRJdGVtcyIsImNvbmNhdCIsImdldFdpbmRvd1dpZHRoIiwiaHRtbFJlY3QiLCJhYnMiLCJzZXRTY3JvbGxiYXIiLCJpdGVtUGFkIiwiYm9keVN0eWxlIiwiYm9keVBhZCIsInJlc2V0U2Nyb2xsYmFyIiwibWVhc3VyZVNjcm9sbGJhciIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY2hlY2tTY3JvbGxiYXIiLCJhZGp1c3REaWFsb2ciLCJyZXNldEFkanVzdG1lbnRzIiwiY3JlYXRlT3ZlcmxheSIsIm5ld092ZXJsYXkiLCJyZW1vdmVPdmVybGF5Iiwia2V5ZG93bkhhbmRsZXJUb2dnbGUiLCJyZXNpemVIYW5kbGVyVG9nZ2xlIiwiZGlzbWlzc0hhbmRsZXJUb2dnbGUiLCJkaXNtaXNzSGFuZGxlciIsImNsaWNrVGFyZ2V0IiwibW9kYWxUcmlnZ2VyIiwia2V5IiwiY3VycmVudE9wZW4iLCJkaXNwbGF5Iiwic2V0Q29udGVudCIsIlBvcG92ZXIiLCJ0cmlnZ2VyRGF0YSIsImFuaW1hdGlvbkRhdGEiLCJwbGFjZW1lbnREYXRhIiwiZGlzbWlzc2libGVEYXRhIiwiZGVsYXlEYXRhIiwiY29udGFpbmVyRGF0YSIsInRlbXBsYXRlIiwidHJpZ2dlciIsImNsYXNzU3RyaW5nIiwiZGl2IiwiZmFkZSIsImRhdGFUaXRsZSIsImRhdGFDb250ZW50IiwiZGlzbWlzc2libGUiLCJjbG9zZUJ0biIsIm5hdmJhckZpeGVkVG9wIiwibmF2YmFyRml4ZWRCb3R0b20iLCJ0aXRsZVN0cmluZyIsImNvbnRlbnRTdHJpbmciLCJwb3BvdmVyIiwicGxhY2VtZW50U2V0dGluZyIsImRpc21pc3NpYmxlSGFuZGxlciIsInJlbW92ZVBvcG92ZXIiLCJjcmVhdGVQb3BvdmVyIiwicG9wb3ZlclRpdGxlIiwicG9wb3ZlckFycm93IiwicG9wb3ZlckNvbnRlbnQiLCJwb3BvdmVyVGVtcGxhdGUiLCJmaXJzdENoaWxkIiwic2hvd1BvcG92ZXIiLCJ1cGRhdGVQb3BvdmVyIiwiY2xlYXJUaW1lb3V0IiwiU2Nyb2xsU3B5Iiwic2Nyb2xsT2Zmc2V0Iiwic3B5VGFyZ2V0IiwibGlua3MiLCJpdGVtcyIsInRhcmdldEl0ZW1zIiwic2Nyb2xsVGFyZ2V0IiwiaXNXaW5kb3ciLCJpbCIsInRhcmdldEl0ZW0iLCJ1cGRhdGVJdGVtIiwiZHJvcGRvd24iLCJ0YXJnZXRSZWN0IiwiaXNBY3RpdmUiLCJ0b3BFZGdlIiwiYm90dG9tRWRnZSIsImluc2lkZSIsInVwZGF0ZUl0ZW1zIiwiaXRsIiwicmVmcmVzaCIsIlRhYiIsImhlaWdodERhdGEiLCJ0YWJzQ29udGVudENvbnRhaW5lciIsInRhYnMiLCJnZXRBY3RpdmVUYWIiLCJhY3RpdmVUYWIiLCJhY3RpdmVUYWJzIiwiZ2V0QWN0aXZlQ29udGVudCIsIm5leHRDb250ZW50IiwiYWN0aXZlQ29udGVudCIsIlRvb2x0aXAiLCJ0aXRsZSIsInRvb2x0aXAiLCJyZW1vdmVUb29sVGlwIiwiY3JlYXRlVG9vbFRpcCIsInRvb2x0aXBBcnJvdyIsInRvb2x0aXBJbm5lciIsInVwZGF0ZVRvb2x0aXAiLCJzaG93VG9vbHRpcCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFD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cyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9ib290c3RyYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9ib290c3RyYXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYm9vdHN0cmFwKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8vIE5hdGl2ZSBKYXZhc2NyaXB0IGZvciBCb290c3RyYXAgMyB2Mi4wLjYgfCDCqSBkbnBfdGhlbWUgfCBNSVQtTGljZW5zZVxuXHQoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcblx0ICBpZiAodHJ1ZSkge1xuXHQgICAgLy8gQU1EIHN1cHBvcnQ6XG5cdCAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSkgOiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgICAgLy8gQ29tbW9uSlMtbGlrZTpcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuXHQgICAgdmFyIGJzbiA9IGZhY3RvcnkoKTtcblx0ICAgIHJvb3QuQWZmaXggPSBic24uQWZmaXg7XG5cdCAgICByb290LkFsZXJ0ID0gYnNuLkFsZXJ0O1xuXHQgICAgcm9vdC5CdXR0b24gPSBic24uQnV0dG9uO1xuXHQgICAgcm9vdC5DYXJvdXNlbCA9IGJzbi5DYXJvdXNlbDtcblx0ICAgIHJvb3QuQ29sbGFwc2UgPSBic24uQ29sbGFwc2U7XG5cdCAgICByb290LkRyb3Bkb3duID0gYnNuLkRyb3Bkb3duO1xuXHQgICAgcm9vdC5Nb2RhbCA9IGJzbi5Nb2RhbDtcblx0ICAgIHJvb3QuUG9wb3ZlciA9IGJzbi5Qb3BvdmVyO1xuXHQgICAgcm9vdC5TY3JvbGxTcHkgPSBic24uU2Nyb2xsU3B5O1xuXHQgICAgcm9vdC5UYWIgPSBic24uVGFiO1xuXHQgICAgcm9vdC5Ub29sdGlwID0gYnNuLlRvb2x0aXA7XG5cdCAgfVxuXHR9KHRoaXMsIGZ1bmN0aW9uICgpIHtcblx0ICBcblx0ICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBJbnRlcm5hbCBVdGlsaXR5IEZ1bmN0aW9uc1xuXHQgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQgIFxuXHQgIC8vIGdsb2JhbHNcblx0ICB2YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0aGlzfHx3aW5kb3csXG5cdCAgICBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGJvZHkgPSBkb2N1bWVudC5ib2R5LFxuXHQgIFxuXHQgICAgLy8gZnVuY3Rpb24gdG9nZ2xlIGF0dHJpYnV0ZXNcblx0ICAgIGRhdGFUb2dnbGUgICAgPSAnZGF0YS10b2dnbGUnLFxuXHQgICAgZGF0YURpc21pc3MgICA9ICdkYXRhLWRpc21pc3MnLFxuXHQgICAgZGF0YVNweSAgICAgICA9ICdkYXRhLXNweScsXG5cdCAgICBkYXRhUmlkZSAgICAgID0gJ2RhdGEtcmlkZScsXG5cdCAgICBcblx0ICAgIC8vIGNvbXBvbmVudHNcblx0ICAgIHN0cmluZ0FmZml4ICAgICA9ICdBZmZpeCcsXG5cdCAgICBzdHJpbmdBbGVydCAgICAgPSAnQWxlcnQnLFxuXHQgICAgc3RyaW5nQnV0dG9uICAgID0gJ0J1dHRvbicsXG5cdCAgICBzdHJpbmdDYXJvdXNlbCAgPSAnQ2Fyb3VzZWwnLFxuXHQgICAgc3RyaW5nQ29sbGFwc2UgID0gJ0NvbGxhcHNlJyxcblx0ICAgIHN0cmluZ0Ryb3Bkb3duICA9ICdEcm9wZG93bicsXG5cdCAgICBzdHJpbmdNb2RhbCAgICAgPSAnTW9kYWwnLFxuXHQgICAgc3RyaW5nUG9wb3ZlciAgID0gJ1BvcG92ZXInLFxuXHQgICAgc3RyaW5nU2Nyb2xsU3B5ID0gJ1Njcm9sbFNweScsXG5cdCAgICBzdHJpbmdUYWIgICAgICAgPSAnVGFiJyxcblx0ICAgIHN0cmluZ1Rvb2x0aXAgICA9ICdUb29sdGlwJyxcblx0ICBcblx0ICAgIC8vIG9wdGlvbnMgREFUQSBBUElcblx0ICAgIGRhdGFiYWNrZHJvcCAgICAgID0gJ2RhdGEtYmFja2Ryb3AnLFxuXHQgICAgZGF0YUtleWJvYXJkICAgICAgPSAnZGF0YS1rZXlib2FyZCcsXG5cdCAgICBkYXRhVGFyZ2V0ICAgICAgICA9ICdkYXRhLXRhcmdldCcsXG5cdCAgICBkYXRhSW50ZXJ2YWwgICAgICA9ICdkYXRhLWludGVydmFsJyxcblx0ICAgIGRhdGFIZWlnaHQgICAgICAgID0gJ2RhdGEtaGVpZ2h0Jyxcblx0ICAgIGRhdGFQYXVzZSAgICAgICAgID0gJ2RhdGEtcGF1c2UnLFxuXHQgICAgZGF0YU9yaWdpbmFsVGl0bGUgPSAnZGF0YS1vcmlnaW5hbC10aXRsZScsXG5cdCAgICBkYXRhT3JpZ2luYWxUZXh0ICA9ICdkYXRhLW9yaWdpbmFsLXRleHQnLFxuXHQgICAgZGF0YURpc21pc3NpYmxlICAgPSAnZGF0YS1kaXNtaXNzaWJsZScsXG5cdCAgICBkYXRhVHJpZ2dlciAgICAgICA9ICdkYXRhLXRyaWdnZXInLFxuXHQgICAgZGF0YUFuaW1hdGlvbiAgICAgPSAnZGF0YS1hbmltYXRpb24nLFxuXHQgICAgZGF0YUNvbnRhaW5lciAgICAgPSAnZGF0YS1jb250YWluZXInLFxuXHQgICAgZGF0YVBsYWNlbWVudCAgICAgPSAnZGF0YS1wbGFjZW1lbnQnLFxuXHQgICAgZGF0YURlbGF5ICAgICAgICAgPSAnZGF0YS1kZWxheScsXG5cdCAgICBkYXRhT2Zmc2V0VG9wICAgICA9ICdkYXRhLW9mZnNldC10b3AnLFxuXHQgICAgZGF0YU9mZnNldEJvdHRvbSAgPSAnZGF0YS1vZmZzZXQtYm90dG9tJyxcblx0ICBcblx0ICAgIC8vIG9wdGlvbiBrZXlzXG5cdCAgICBiYWNrZHJvcCA9ICdiYWNrZHJvcCcsIGtleWJvYXJkID0gJ2tleWJvYXJkJywgZGVsYXkgPSAnZGVsYXknLFxuXHQgICAgY29udGVudCA9ICdjb250ZW50JywgdGFyZ2V0ID0gJ3RhcmdldCcsIFxuXHQgICAgaW50ZXJ2YWwgPSAnaW50ZXJ2YWwnLCBwYXVzZSA9ICdwYXVzZScsIGFuaW1hdGlvbiA9ICdhbmltYXRpb24nLFxuXHQgICAgcGxhY2VtZW50ID0gJ3BsYWNlbWVudCcsIGNvbnRhaW5lciA9ICdjb250YWluZXInLCBcblx0ICBcblx0ICAgIC8vIGJveCBtb2RlbFxuXHQgICAgb2Zmc2V0VG9wICAgID0gJ29mZnNldFRvcCcsICAgICAgb2Zmc2V0Qm90dG9tICAgPSAnb2Zmc2V0Qm90dG9tJyxcblx0ICAgIG9mZnNldExlZnQgICA9ICdvZmZzZXRMZWZ0Jyxcblx0ICAgIHNjcm9sbFRvcCAgICA9ICdzY3JvbGxUb3AnLCAgICAgIHNjcm9sbExlZnQgICAgID0gJ3Njcm9sbExlZnQnLFxuXHQgICAgY2xpZW50V2lkdGggID0gJ2NsaWVudFdpZHRoJywgICAgY2xpZW50SGVpZ2h0ICAgPSAnY2xpZW50SGVpZ2h0Jyxcblx0ICAgIG9mZnNldFdpZHRoICA9ICdvZmZzZXRXaWR0aCcsICAgIG9mZnNldEhlaWdodCAgID0gJ29mZnNldEhlaWdodCcsXG5cdCAgICBpbm5lcldpZHRoICAgPSAnaW5uZXJXaWR0aCcsICAgICBpbm5lckhlaWdodCAgICA9ICdpbm5lckhlaWdodCcsXG5cdCAgICBzY3JvbGxIZWlnaHQgPSAnc2Nyb2xsSGVpZ2h0JywgICBoZWlnaHQgICAgICAgICA9ICdoZWlnaHQnLFxuXHQgIFxuXHQgICAgLy8gYXJpYVxuXHQgICAgYXJpYUV4cGFuZGVkID0gJ2FyaWEtZXhwYW5kZWQnLFxuXHQgICAgYXJpYUhpZGRlbiAgID0gJ2FyaWEtaGlkZGVuJyxcblx0ICBcblx0ICAgIC8vIGV2ZW50IG5hbWVzXG5cdCAgICBjbGlja0V2ZW50ICAgID0gJ2NsaWNrJyxcblx0ICAgIGhvdmVyRXZlbnQgICAgPSAnaG92ZXInLFxuXHQgICAga2V5ZG93bkV2ZW50ICA9ICdrZXlkb3duJyxcblx0ICAgIHJlc2l6ZUV2ZW50ICAgPSAncmVzaXplJyxcblx0ICAgIHNjcm9sbEV2ZW50ICAgPSAnc2Nyb2xsJyxcblx0ICAgIC8vIG9yaWdpbmFsRXZlbnRzXG5cdCAgICBzaG93RXZlbnQgICAgID0gJ3Nob3cnLFxuXHQgICAgc2hvd25FdmVudCAgICA9ICdzaG93bicsXG5cdCAgICBoaWRlRXZlbnQgICAgID0gJ2hpZGUnLFxuXHQgICAgaGlkZGVuRXZlbnQgICA9ICdoaWRkZW4nLFxuXHQgICAgY2xvc2VFdmVudCAgICA9ICdjbG9zZScsXG5cdCAgICBjbG9zZWRFdmVudCAgID0gJ2Nsb3NlZCcsXG5cdCAgICBzbGlkRXZlbnQgICAgID0gJ3NsaWQnLFxuXHQgICAgc2xpZGVFdmVudCAgICA9ICdzbGlkZScsXG5cdCAgICBjaGFuZ2VFdmVudCAgID0gJ2NoYW5nZScsXG5cdCAgXG5cdCAgICAvLyBvdGhlclxuXHQgICAgZ2V0QXR0cmlidXRlICAgICAgICAgPSAnZ2V0QXR0cmlidXRlJyxcblx0ICAgIHNldEF0dHJpYnV0ZSAgICAgICAgID0gJ3NldEF0dHJpYnV0ZScsXG5cdCAgICBoYXNBdHRyaWJ1dGUgICAgICAgICA9ICdoYXNBdHRyaWJ1dGUnLFxuXHQgICAgZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSAnZ2V0RWxlbWVudHNCeVRhZ05hbWUnLFxuXHQgICAgZ2V0Qm91bmRpbmdDbGllbnRSZWN0PSAnZ2V0Qm91bmRpbmdDbGllbnRSZWN0Jyxcblx0ICAgIHF1ZXJ5U2VsZWN0b3JBbGwgICAgID0gJ3F1ZXJ5U2VsZWN0b3JBbGwnLFxuXHQgICAgZ2V0RWxlbWVudHNCeUNMQVNTTkFNRSA9ICdnZXRFbGVtZW50c0J5Q2xhc3NOYW1lJyxcblx0ICBcblx0ICAgIGluZGV4T2YgICAgICA9ICdpbmRleE9mJyxcblx0ICAgIHBhcmVudE5vZGUgICA9ICdwYXJlbnROb2RlJyxcblx0ICAgIGxlbmd0aCAgICAgICA9ICdsZW5ndGgnLFxuXHQgICAgdG9Mb3dlckNhc2UgID0gJ3RvTG93ZXJDYXNlJyxcblx0ICAgIFRyYW5zaXRpb24gICA9ICdUcmFuc2l0aW9uJyxcblx0ICAgIFdlYmtpdCAgICAgICA9ICdXZWJraXQnLFxuXHQgICAgc3R5bGUgICAgICAgID0gJ3N0eWxlJyxcblx0ICAgIFxuXHQgICAgYWN0aXZlICAgICA9ICdhY3RpdmUnLFxuXHQgICAgaW5DbGFzcyAgICA9ICdpbicsXG5cdCAgICBjb2xsYXBzaW5nID0gJ2NvbGxhcHNpbmcnLFxuXHQgICAgZGlzYWJsZWQgICA9ICdkaXNhYmxlZCcsXG5cdCAgICBsb2FkaW5nICAgID0gJ2xvYWRpbmcnLFxuXHQgICAgbGVmdCAgICAgICA9ICdsZWZ0Jyxcblx0ICAgIHJpZ2h0ICAgICAgPSAncmlnaHQnLFxuXHQgICAgdG9wICAgICAgICA9ICd0b3AnLFxuXHQgICAgYm90dG9tICAgICA9ICdib3R0b20nLFxuXHQgIFxuXHQgICAgLy8gSUU4IGJyb3dzZXIgZGV0ZWN0XG5cdCAgICBpc0lFOCA9ICEoJ29wYWNpdHknIGluIGJvZHlbc3R5bGVdKSxcblx0ICBcblx0ICAgIC8vIHRvb2x0aXAgLyBwb3BvdmVyXG5cdCAgICBmaXhlZFRvcCA9ICcubmF2YmFyLWZpeGVkLXRvcCcsXG5cdCAgICBmaXhlZEJvdHRvbSA9ICcubmF2YmFyLWZpeGVkLWJvdHRvbScsICBcblx0ICAgIG1vdXNlSG92ZXIgPSAoJ29ubW91c2VsZWF2ZScgaW4gZG9jdW1lbnQpID8gWyAnbW91c2VlbnRlcicsICdtb3VzZWxlYXZlJ10gOiBbICdtb3VzZW92ZXInLCAnbW91c2VvdXQnIF0sXG5cdCAgICB0aXBQb3NpdGlvbnMgPSAvXFxiKHRvcHxib3R0b218bGVmdHx0b3ApKy8sXG5cdCAgXG5cdCAgICAvLyB0cmFuc2l0aW9uRW5kIHNpbmNlIDIuMC40XG5cdCAgICBzdXBwb3J0VHJhbnNpdGlvbnMgPSBXZWJraXQrVHJhbnNpdGlvbiBpbiBkb2Nbc3R5bGVdIHx8IFRyYW5zaXRpb25bdG9Mb3dlckNhc2VdKCkgaW4gZG9jW3N0eWxlXSxcblx0ICAgIHRyYW5zaXRpb25FbmRFdmVudCA9IFdlYmtpdCtUcmFuc2l0aW9uIGluIGRvY1tzdHlsZV0gPyBXZWJraXRbdG9Mb3dlckNhc2VdKCkrVHJhbnNpdGlvbisnRW5kJyA6IFRyYW5zaXRpb25bdG9Mb3dlckNhc2VdKCkrJ2VuZCcsICBcblx0ICBcblx0ICAgIC8vIHNldCBuZXcgZm9jdXMgZWxlbWVudCBzaW5jZSAyLjAuM1xuXHQgICAgc2V0Rm9jdXMgPSBmdW5jdGlvbihlbGVtZW50KXtcblx0ICAgICAgZWxlbWVudC5mb2N1cyA/IGVsZW1lbnQuZm9jdXMoKSA6IGVsZW1lbnQuc2V0QWN0aXZlKCk7XG5cdCAgICB9LFxuXHQgIFxuXHQgICAgLy8gY2xhc3MgbWFuaXB1bGF0aW9uLCBzaW5jZSAyLjAuMCByZXF1aXJlcyBwb2x5ZmlsbC5qc1xuXHQgICAgYWRkQ2xhc3MgPSBmdW5jdGlvbihlbGVtZW50LGNsYXNzTkFNRSkge1xuXHQgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOQU1FKTtcblx0ICAgIH0sXG5cdCAgICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGVsZW1lbnQsY2xhc3NOQU1FKSB7XG5cdCAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05BTUUpO1xuXHQgICAgfSxcblx0ICAgIGhhc0NsYXNzID0gZnVuY3Rpb24oZWxlbWVudCxjbGFzc05BTUUpeyAvLyBzaW5jZSAyLjAuMFxuXHQgICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOQU1FKTtcblx0ICAgIH0sXG5cdCAgXG5cdCAgICAvLyBzZWxlY3Rpb24gbWV0aG9kc1xuXHQgICAgbm9kZUxpc3RUb0FycmF5ID0gZnVuY3Rpb24obm9kZUxpc3Qpe1xuXHQgICAgICB2YXIgY2hpbGRJdGVtcyA9IFtdOyBmb3IgKHZhciBpID0gMCwgbmxsID0gbm9kZUxpc3RbbGVuZ3RoXTsgaTxubGw7IGkrKykgeyBjaGlsZEl0ZW1zLnB1c2goIG5vZGVMaXN0W2ldICkgfVxuXHQgICAgICByZXR1cm4gY2hpbGRJdGVtcztcblx0ICAgIH0sXG5cdCAgICBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24oZWxlbWVudCxjbGFzc05BTUUpIHsgLy8gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSBJRTgrXG5cdCAgICAgIHZhciBzZWxlY3Rpb25NZXRob2QgPSBpc0lFOCA/IHF1ZXJ5U2VsZWN0b3JBbGwgOiBnZXRFbGVtZW50c0J5Q0xBU1NOQU1FOyAgICAgIFxuXHQgICAgICByZXR1cm4gbm9kZUxpc3RUb0FycmF5KGVsZW1lbnRbc2VsZWN0aW9uTWV0aG9kXSggaXNJRTggPyAnLicgKyBjbGFzc05BTUUucmVwbGFjZSgvXFxzKD89W2Etel0pL2csJy4nKSA6IGNsYXNzTkFNRSApKTtcblx0ICAgIH0sXG5cdCAgICBxdWVyeUVsZW1lbnQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuXHQgICAgICB2YXIgbG9va1VwID0gcGFyZW50ID8gcGFyZW50IDogZG9jdW1lbnQ7XG5cdCAgICAgIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09ICdvYmplY3QnID8gc2VsZWN0b3IgOiBsb29rVXAucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG5cdCAgICB9LFxuXHQgICAgZ2V0Q2xvc2VzdCA9IGZ1bmN0aW9uIChlbGVtZW50LCBzZWxlY3RvcikgeyAvL2VsZW1lbnQgaXMgdGhlIGVsZW1lbnQgYW5kIHNlbGVjdG9yIGlzIGZvciB0aGUgY2xvc2VzdCBwYXJlbnQgZWxlbWVudCB0byBmaW5kXG5cdCAgICAvLyBzb3VyY2UgaHR0cDovL2dvbWFrZXRoaW5ncy5jb20vY2xpbWJpbmctdXAtYW5kLWRvd24tdGhlLWRvbS10cmVlLXdpdGgtdmFuaWxsYS1qYXZhc2NyaXB0L1xuXHQgICAgICB2YXIgZmlyc3RDaGFyID0gc2VsZWN0b3IuY2hhckF0KDApO1xuXHQgICAgICBmb3IgKCA7IGVsZW1lbnQgJiYgZWxlbWVudCAhPT0gZG9jdW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50W3BhcmVudE5vZGVdICkgey8vIEdldCBjbG9zZXN0IG1hdGNoXG5cdCAgICAgICAgaWYgKCBmaXJzdENoYXIgPT09ICcuJyApIHsvLyBJZiBzZWxlY3RvciBpcyBhIGNsYXNzXG5cdCAgICAgICAgICBpZiAoIHF1ZXJ5RWxlbWVudChzZWxlY3RvcixlbGVtZW50W3BhcmVudE5vZGVdKSAhPT0gbnVsbCAmJiBoYXNDbGFzcyhlbGVtZW50LHNlbGVjdG9yLnJlcGxhY2UoJy4nLCcnKSkgKSB7IHJldHVybiBlbGVtZW50OyB9XG5cdCAgICAgICAgfSBlbHNlIGlmICggZmlyc3RDaGFyID09PSAnIycgKSB7IC8vIElmIHNlbGVjdG9yIGlzIGFuIElEXG5cdCAgICAgICAgICBpZiAoIGVsZW1lbnQuaWQgPT09IHNlbGVjdG9yLnN1YnN0cigxKSApIHsgcmV0dXJuIGVsZW1lbnQ7IH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSxcblx0ICBcblx0ICAgIC8vIGV2ZW50IGF0dGFjaCBqUXVlcnkgc3R5bGUgLyB0cmlnZ2VyICBzaW5jZSAxLjIuMFxuXHQgICAgb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHtcblx0ICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9LFxuXHQgICAgb2ZmID0gZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9LFxuXHQgICAgb25lID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7IC8vIG9uZSBzaW5jZSAyLjAuNFxuXHQgICAgICBvbihlbGVtZW50LCBldmVudCwgZnVuY3Rpb24gaGFuZGxlcldyYXBwZXIoZSl7XG5cdCAgICAgICAgaGFuZGxlcihlKTtcblx0ICAgICAgICBvZmYoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXJXcmFwcGVyKTtcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbihlbGVtZW50LGhhbmRsZXIpeyAvLyBlbXVsYXRlVHJhbnNpdGlvbkVuZCBzaW5jZSAyLjAuNFxuXHQgICAgICBpZiAoc3VwcG9ydFRyYW5zaXRpb25zKSB7IG9uZShlbGVtZW50LCB0cmFuc2l0aW9uRW5kRXZlbnQsIGZ1bmN0aW9uKGUpeyBoYW5kbGVyKGUpOyB9KTsgfSBcblx0ICAgICAgZWxzZSB7IGhhbmRsZXIoKTsgfVxuXHQgICAgfSxcblx0ICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY29tcG9uZW50TmFtZSwgcmVsYXRlZCkge1xuXHQgICAgICB2YXIgT3JpZ2luYWxDdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCggZXZlbnROYW1lICsgJy5icy4nICsgY29tcG9uZW50TmFtZSk7XG5cdCAgICAgIE9yaWdpbmFsQ3VzdG9tRXZlbnQucmVsYXRlZFRhcmdldCA9IHJlbGF0ZWQ7XG5cdCAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChPcmlnaW5hbEN1c3RvbUV2ZW50KTtcblx0ICAgIH0sXG5cdCAgXG5cdCAgICAvLyByZWZlcmVuY2UgYSBsaXZlIGNvbGxlY3Rpb24gb2YgdGhlIERPTVxuXHQgICAgQWxsRE9NRWxlbWVudHMgPSBkb2N1bWVudFtnZXRFbGVtZW50c0J5VGFnTmFtZV0oJyonKSxcblx0ICBcblx0ICAgIC8vIEluaXQgREFUQSBBUElcblx0ICAgIGluaXRpYWxpemVEYXRhQVBJID0gZnVuY3Rpb24oIGNvbXBvbmVudCwgY29uc3RydWN0b3IsIGRhdGFBdHRyaWJ1dGUsIGNvbGxlY3Rpb24gKXtcblx0ICAgICAgdmFyIGxvb2tVcCA9IGNvbGxlY3Rpb24gJiYgY29sbGVjdGlvbltsZW5ndGhdID8gY29sbGVjdGlvbiA6IEFsbERPTUVsZW1lbnRzO1xuXHQgICAgICBmb3IgKHZhciBpPTA7IGkgPCBsb29rVXBbbGVuZ3RoXTsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGF0dHJWYWx1ZSA9IGxvb2tVcFtpXVtnZXRBdHRyaWJ1dGVdKGRhdGFBdHRyaWJ1dGUpLCBleHBlY3RlZEF0dHJWYWx1ZSA9IGNvbXBvbmVudC5yZXBsYWNlKC9zcHkvaSwnJylbdG9Mb3dlckNhc2VdKCk7XG5cdCAgICAgICAgaWYgKCBhdHRyVmFsdWUgJiYgY29tcG9uZW50ID09PSBzdHJpbmdCdXR0b24gJiYgKCBhdHRyVmFsdWVbaW5kZXhPZl0oZXhwZWN0ZWRBdHRyVmFsdWUpID4gLTEgKSAvLyBkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIlxuXHQgICAgICAgICAgICB8fCBhdHRyVmFsdWUgPT09IGV4cGVjdGVkQXR0clZhbHVlICkgeyAvLyBhbGwgb3RoZXIgY29tcG9uZW50c1xuXHQgICAgICAgICAgbmV3IGNvbnN0cnVjdG9yKGxvb2tVcFtpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LCAgXG5cdCAgXG5cdCAgICAvLyB0YWIgLyBjb2xsYXBzZSBzdHVmZlxuXHQgICAgdGFyZ2V0c1JlZyA9IC9eXFwjKC4pKyQvLFxuXHQgICAgZ2V0T3V0ZXJIZWlnaHQgPSBmdW5jdGlvbiAoY2hpbGQpIHtcblx0ICAgICAgdmFyIGNoaWxkU3R5bGUgPSBjaGlsZCAmJiAoY2hpbGQuY3VycmVudFN0eWxlIHx8IGdsb2JhbE9iamVjdC5nZXRDb21wdXRlZFN0eWxlKGNoaWxkKSksIFxuXHQgICAgICAgIGJ0cCA9IC9weC8udGVzdChjaGlsZFN0eWxlLmJvcmRlclRvcFdpZHRoKSA/IE1hdGgucm91bmQoY2hpbGRTdHlsZS5ib3JkZXJUb3BXaWR0aC5yZXBsYWNlKCdweCcsJycpKSA6IDAsXG5cdCAgICAgICAgYnRiID0gL3B4Ly50ZXN0KGNoaWxkU3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpID8gTWF0aC5yb3VuZChjaGlsZFN0eWxlLmJvcmRlckJvdHRvbVdpZHRoLnJlcGxhY2UoJ3B4JywnJykpIDogMCxcblx0ICAgICAgICBtdHAgPSAvcHgvLnRlc3QoY2hpbGRTdHlsZS5tYXJnaW5Ub3ApID8gTWF0aC5yb3VuZChjaGlsZFN0eWxlLm1hcmdpblRvcC5yZXBsYWNlKCdweCcsJycpKSA6IDAsXG5cdCAgICAgICAgbWJwID0gL3B4Ly50ZXN0KGNoaWxkU3R5bGUubWFyZ2luQm90dG9tKSA/IE1hdGgucm91bmQoY2hpbGRTdHlsZS5tYXJnaW5Cb3R0b20ucmVwbGFjZSgncHgnLCcnKSkgOiAwO1xuXHQgICAgICByZXR1cm4gY2hpbGRbY2xpZW50SGVpZ2h0XSArIHBhcnNlSW50KCBidHAgKSArIHBhcnNlSW50KCBidGIgKSArIHBhcnNlSW50KCBtdHAgKSArIHBhcnNlSW50KCBtYnAgKTtcblx0ICAgIH0sXG5cdCAgICBnZXRNYXhIZWlnaHQgPSBmdW5jdGlvbihwYXJlbnQpIHsgLy8gZ2V0IGNvbGxhcHNlIHRydWVIZWlnaHQgYW5kIGJvcmRlclxuXHQgICAgICB2YXIgcGFyZW50SGVpZ2h0ID0gMDtcblx0ICAgICAgZm9yICh2YXIgayA9IDAsIGxsID0gcGFyZW50LmNoaWxkcmVuW2xlbmd0aF07IGsgPCBsbDsgaysrKSB7XG5cdCAgICAgICAgcGFyZW50SGVpZ2h0ICs9IGdldE91dGVySGVpZ2h0KHBhcmVudC5jaGlsZHJlbltrXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHBhcmVudEhlaWdodDtcblx0ICAgIH0sXG5cdCAgXG5cdCAgICAvLyB0b29sdGlwIC8gcG9wb3ZlciBzdHVmZlxuXHQgICAgaXNFbGVtZW50SW5WaWV3cG9ydCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsgLy8gY2hlY2sgaWYgdGhpcy50b29sdGlwIGlzIGluIHZpZXdwb3J0XG5cdCAgICAgIHZhciByZWN0ID0gZWxlbWVudFtnZXRCb3VuZGluZ0NsaWVudFJlY3RdKCk7XG5cdCAgICAgIHJldHVybiAoIHJlY3RbdG9wXSA+PSAwICYmIHJlY3RbbGVmdF0gPj0gMCAmJlxuXHQgICAgICAgIHJlY3RbYm90dG9tXSA8PSAoZ2xvYmFsT2JqZWN0W2lubmVySGVpZ2h0XSB8fCBkb2NbY2xpZW50SGVpZ2h0XSkgJiZcblx0ICAgICAgICByZWN0W3JpZ2h0XSA8PSAoZ2xvYmFsT2JqZWN0W2lubmVyV2lkdGhdIHx8IGRvY1tjbGllbnRXaWR0aF0pIClcblx0ICAgIH0sXG5cdCAgICBnZXRTY3JvbGwgPSBmdW5jdGlvbigpIHsgLy8gYWxzbyBBZmZpeCBhbmQgU2Nyb2xsU3B5IHVzZXMgaXRcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICB5IDogZ2xvYmFsT2JqZWN0LnBhZ2VZT2Zmc2V0IHx8IGRvY1tzY3JvbGxUb3BdLFxuXHQgICAgICAgIHggOiBnbG9iYWxPYmplY3QucGFnZVhPZmZzZXQgfHwgZG9jW3Njcm9sbExlZnRdXG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBzdHlsZVRpcCA9IGZ1bmN0aW9uKGxpbmssZWxlbWVudCxwb3NpdGlvbixwYXJlbnQpIHsgLy8gYm90aCBwb3BvdmVycyBhbmQgdG9vbHRpcHNcblx0ICAgICAgdmFyIHJlY3QgPSBsaW5rW2dldEJvdW5kaW5nQ2xpZW50UmVjdF0oKSwgXG5cdCAgICAgICAgICBzY3JvbGwgPSBwYXJlbnQgPT09IGJvZHkgPyBnZXRTY3JvbGwoKSA6IHsgeDogcGFyZW50W29mZnNldExlZnRdICsgcGFyZW50W3Njcm9sbExlZnRdLCB5OiBwYXJlbnRbb2Zmc2V0VG9wXSArIHBhcmVudFtzY3JvbGxUb3BdIH0sXG5cdCAgICAgICAgICBsaW5rRGltZW5zaW9ucyA9IHsgdzogcmVjdFtyaWdodF0gLSByZWN0W2xlZnRdLCBoOiByZWN0W2JvdHRvbV0gLSByZWN0W3RvcF0gfSxcblx0ICAgICAgICAgIGVsZW1lbnREaW1lbnNpb25zID0geyB3IDogZWxlbWVudFtvZmZzZXRXaWR0aF0sIGg6IGVsZW1lbnRbb2Zmc2V0SGVpZ2h0XSB9O1xuXHQgIFxuXHQgICAgICAvLyBhcHBseSBzdHlsaW5nIHRvIHRvb2x0aXAgb3IgcG9wb3ZlclxuXHQgICAgICBpZiAoIHBvc2l0aW9uID09PSB0b3AgKSB7IC8vIFRPUFxuXHQgICAgICAgIGVsZW1lbnRbc3R5bGVdW3RvcF0gPSByZWN0W3RvcF0gKyBzY3JvbGwueSAtIGVsZW1lbnREaW1lbnNpb25zLmggKyAncHgnO1xuXHQgICAgICAgIGVsZW1lbnRbc3R5bGVdW2xlZnRdID0gcmVjdFtsZWZ0XSArIHNjcm9sbC54IC0gZWxlbWVudERpbWVuc2lvbnMudy8yICsgbGlua0RpbWVuc2lvbnMudy8yICsgJ3B4J1xuXHQgIFxuXHQgICAgICB9IGVsc2UgaWYgKCBwb3NpdGlvbiA9PT0gYm90dG9tICkgeyAvLyBCT1RUT01cblx0ICAgICAgICBlbGVtZW50W3N0eWxlXVt0b3BdID0gcmVjdFt0b3BdICsgc2Nyb2xsLnkgKyBsaW5rRGltZW5zaW9ucy5oICsgJ3B4Jztcblx0ICAgICAgICBlbGVtZW50W3N0eWxlXVtsZWZ0XSA9IHJlY3RbbGVmdF0gKyBzY3JvbGwueCAtIGVsZW1lbnREaW1lbnNpb25zLncvMiArIGxpbmtEaW1lbnNpb25zLncvMiArICdweCc7XG5cdCAgXG5cdCAgICAgIH0gZWxzZSBpZiAoIHBvc2l0aW9uID09PSBsZWZ0ICkgeyAvLyBMRUZUXG5cdCAgICAgICAgZWxlbWVudFtzdHlsZV1bdG9wXSA9IHJlY3RbdG9wXSArIHNjcm9sbC55IC0gZWxlbWVudERpbWVuc2lvbnMuaC8yICsgbGlua0RpbWVuc2lvbnMuaC8yICsgJ3B4Jztcblx0ICAgICAgICBlbGVtZW50W3N0eWxlXVtsZWZ0XSA9IHJlY3RbbGVmdF0gKyBzY3JvbGwueCAtIGVsZW1lbnREaW1lbnNpb25zLncgKyAncHgnO1xuXHQgIFxuXHQgICAgICB9IGVsc2UgaWYgKCBwb3NpdGlvbiA9PT0gcmlnaHQgKSB7IC8vIFJJR0hUXG5cdCAgICAgICAgZWxlbWVudFtzdHlsZV1bdG9wXSA9IHJlY3RbdG9wXSArIHNjcm9sbC55IC0gZWxlbWVudERpbWVuc2lvbnMuaC8yICsgbGlua0RpbWVuc2lvbnMuaC8yICsgJ3B4Jztcblx0ICAgICAgICBlbGVtZW50W3N0eWxlXVtsZWZ0XSA9IHJlY3RbbGVmdF0gKyBzY3JvbGwueCArIGxpbmtEaW1lbnNpb25zLncgKyAncHgnO1xuXHQgICAgICB9XG5cdCAgICAgIGVsZW1lbnQuY2xhc3NOYW1lW2luZGV4T2ZdKHBvc2l0aW9uKSA9PT0gLTEgJiYgKGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSh0aXBQb3NpdGlvbnMscG9zaXRpb24pKTtcblx0ICAgIH0sXG5cdCAgICB1cGRhdGVQbGFjZW1lbnQgPSBmdW5jdGlvbihwb3NpdGlvbikge1xuXHQgICAgICByZXR1cm4gcG9zaXRpb24gPT09IHRvcCA/IGJvdHRvbSA6IC8vIHRvcFxuXHQgICAgICAgICAgICAgcG9zaXRpb24gPT09IGJvdHRvbSA/IHRvcCA6IC8vIGJvdHRvbVxuXHQgICAgICAgICAgICAgcG9zaXRpb24gPT09IGxlZnQgPyByaWdodCA6IC8vIGxlZnRcblx0ICAgICAgICAgICAgIHBvc2l0aW9uID09PSByaWdodCA/IGxlZnQgOiBwb3NpdGlvbjsgLy8gcmlnaHRcblx0ICAgIH07XG5cdCAgXG5cdCAgXG5cdCAgXG5cdCAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgQWZmaXhcblx0ICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0ICBcblx0ICAvL0FGRklYIERFRklOSVRJT05cblx0ICB2YXIgQWZmaXggPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG5cdCAgXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG5cdCAgICBlbGVtZW50ID0gcXVlcnlFbGVtZW50KGVsZW1lbnQpO1xuXHQgIFxuXHQgICAgLy8gc2V0IG9wdGlvbnNcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgIFxuXHQgICAgLy8gcmVhZCBEQVRBIEFQSVxuXHQgICAgdmFyIHRhcmdldERhdGEgICAgICAgID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpLFxuXHQgICAgICAgIG9mZnNldFRvcERhdGEgICAgID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFPZmZzZXRUb3ApLFxuXHQgICAgICAgIG9mZnNldEJvdHRvbURhdGEgID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFPZmZzZXRCb3R0b20pLFxuXHQgICAgICAgIFxuXHQgICAgICAgIC8vIGNvbXBvbmVudCBzcGVjaWZpYyBzdHJpbmdzXG5cdCAgICAgICAgYWZmaXggPSAnYWZmaXgnLCBhZmZpeGVkID0gJ2FmZml4ZWQnLCBmbiA9ICdmdW5jdGlvbicsIHVwZGF0ZSA9ICd1cGRhdGUnLFxuXHQgICAgICAgIGFmZml4VG9wID0gJ2FmZml4LXRvcCcsIGFmZml4ZWRUb3AgPSAnYWZmaXhlZC10b3AnLFxuXHQgICAgICAgIGFmZml4Qm90dG9tID0gJ2FmZml4LWJvdHRvbScsIGFmZml4ZWRCb3R0b20gPSAnYWZmaXhlZC1ib3R0b20nO1xuXHQgIFxuXHQgICAgdGhpc1t0YXJnZXRdID0gb3B0aW9uc1t0YXJnZXRdID8gcXVlcnlFbGVtZW50KG9wdGlvbnNbdGFyZ2V0XSkgOiBxdWVyeUVsZW1lbnQodGFyZ2V0RGF0YSkgfHwgbnVsbDsgLy8gdGFyZ2V0IGlzIGFuIG9iamVjdFxuXHQgICAgdGhpc1tvZmZzZXRUb3BdID0gb3B0aW9uc1tvZmZzZXRUb3BdID8gb3B0aW9uc1tvZmZzZXRUb3BdIDogcGFyc2VJbnQob2Zmc2V0VG9wRGF0YSkgfHwgMDsgLy8gb2Zmc2V0IG9wdGlvbiBpcyBhbiBpbnRlZ2VyIG51bWJlciBvciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgdGhhdCBudW1iZXJcblx0ICAgIHRoaXNbb2Zmc2V0Qm90dG9tXSA9IG9wdGlvbnNbb2Zmc2V0Qm90dG9tXSA/IG9wdGlvbnNbb2Zmc2V0Qm90dG9tXTogcGFyc2VJbnQob2Zmc2V0Qm90dG9tRGF0YSkgfHwgMDtcblx0ICBcblx0ICAgIGlmICggIXRoaXNbdGFyZ2V0XSAmJiAhKCB0aGlzW29mZnNldFRvcF0gfHwgdGhpc1tvZmZzZXRCb3R0b21dICkgKSB7IHJldHVybjsgfSAvLyBpbnZhbGlkYXRlXG5cdCAgXG5cdCAgICAvLyBpbnRlcm5hbCBiaW5kXG5cdCAgICB2YXIgc2VsZiA9IHRoaXMsXG5cdCAgXG5cdCAgICAgIC8vIGNvbnN0YW50c1xuXHQgICAgICByZXNpemVEZWxheSA9ICFzdXBwb3J0VHJhbnNpdGlvbnMgPyA1MDAgOiA1MCwgLy8gZm9yIGxlZ2FjeSBicm93c2VycyB3ZSB0cnkgdG8gbGltaXQgdGhlIGludGVydmFsIGZvciB1cGRhdGluZyB0aGUgQWZmaXhcblx0ICAgICAgcGluT2Zmc2V0VG9wLCBwaW5PZmZzZXRCb3R0b20sIG1heFNjcm9sbCwgc2Nyb2xsWSwgcGlubmVkVG9wLCBwaW5uZWRCb3R0b20sXG5cdCAgICAgIGFmZml4ZWRUb1RvcCA9IGZhbHNlLCBhZmZpeGVkVG9Cb3R0b20gPSBmYWxzZSxcblx0ICAgICAgXG5cdCAgICAgIC8vIHByaXZhdGUgbWV0aG9kcyBcblx0ICAgICAgZ2V0TWF4U2Nyb2xsID0gZnVuY3Rpb24oKXtcblx0ICAgICAgICByZXR1cm4gTWF0aC5tYXgoIGJvZHlbc2Nyb2xsSGVpZ2h0XSwgYm9keVtvZmZzZXRIZWlnaHRdLCBkb2NbY2xpZW50SGVpZ2h0XSwgZG9jW3Njcm9sbEhlaWdodF0sIGRvY1tvZmZzZXRIZWlnaHRdICk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGdldE9mZnNldFRvcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIHNlbGZbdGFyZ2V0XSAhPT0gbnVsbCApIHtcblx0ICAgICAgICAgIHJldHVybiBzZWxmW3RhcmdldF1bZ2V0Qm91bmRpbmdDbGllbnRSZWN0XSgpW3RvcF0gKyBzY3JvbGxZO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoIHNlbGZbb2Zmc2V0VG9wXSApIHtcblx0ICAgICAgICAgIHJldHVybiBwYXJzZUludCh0eXBlb2Ygc2VsZltvZmZzZXRUb3BdID09PSBmbiA/IHNlbGZbb2Zmc2V0VG9wXSgpIDogc2VsZltvZmZzZXRUb3BdIHx8IDApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgZ2V0T2Zmc2V0Qm90dG9tID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICggc2VsZltvZmZzZXRCb3R0b21dICkge1xuXHQgICAgICAgICAgcmV0dXJuIG1heFNjcm9sbCAtIGVsZW1lbnRbb2Zmc2V0SGVpZ2h0XSAtIHBhcnNlSW50KCB0eXBlb2Ygc2VsZltvZmZzZXRCb3R0b21dID09PSBmbiA/IHNlbGZbb2Zmc2V0Qm90dG9tXSgpIDogc2VsZltvZmZzZXRCb3R0b21dIHx8IDAgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIGNoZWNrUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbWF4U2Nyb2xsID0gZ2V0TWF4U2Nyb2xsKCk7XG5cdCAgICAgICAgc2Nyb2xsWSA9IHBhcnNlSW50KGdldFNjcm9sbCgpLnksMCk7XG5cdCAgICAgICAgcGluT2Zmc2V0VG9wID0gZ2V0T2Zmc2V0VG9wKCk7XG5cdCAgICAgICAgcGluT2Zmc2V0Qm90dG9tID0gZ2V0T2Zmc2V0Qm90dG9tKCk7IFxuXHQgICAgICAgIHBpbm5lZFRvcCA9ICggcGFyc2VJbnQocGluT2Zmc2V0VG9wKSAtIHNjcm9sbFkgPCAwKSAmJiAoc2Nyb2xsWSA+IHBhcnNlSW50KHBpbk9mZnNldFRvcCkgKTtcblx0ICAgICAgICBwaW5uZWRCb3R0b20gPSAoIHBhcnNlSW50KHBpbk9mZnNldEJvdHRvbSkgLSBzY3JvbGxZIDwgMCkgJiYgKHNjcm9sbFkgPiBwYXJzZUludChwaW5PZmZzZXRCb3R0b20pICk7XG5cdCAgICAgIH0sXG5cdCAgICAgIHBpblRvcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoICFhZmZpeGVkVG9Ub3AgJiYgIWhhc0NsYXNzKGVsZW1lbnQsYWZmaXgpICkgeyAvLyBvbiBsb2FkaW5nIGEgcGFnZSBoYWxmd2F5IHNjcm9sbGVkIHRoZXNlIGV2ZW50cyBkb24ndCB0cmlnZ2VyIGluIENocm9tZVxuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeCwgYWZmaXgpO1xuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeFRvcCwgYWZmaXgpO1xuXHQgICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCxhZmZpeCk7XG5cdCAgICAgICAgICBhZmZpeGVkVG9Ub3AgPSB0cnVlO1xuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeGVkLCBhZmZpeCk7XG5cdCAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGFmZml4ZWRUb3AsIGFmZml4KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIHVuUGluVG9wID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICggYWZmaXhlZFRvVG9wICYmIGhhc0NsYXNzKGVsZW1lbnQsYWZmaXgpICkge1xuXHQgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCxhZmZpeCk7XG5cdCAgICAgICAgICBhZmZpeGVkVG9Ub3AgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIHBpbkJvdHRvbSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoICFhZmZpeGVkVG9Cb3R0b20gJiYgIWhhc0NsYXNzKGVsZW1lbnQsIGFmZml4Qm90dG9tKSApIHtcblx0ICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgYWZmaXgsIGFmZml4KTtcblx0ICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgYWZmaXhCb3R0b20sIGFmZml4KTtcblx0ICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsYWZmaXhCb3R0b20pO1xuXHQgICAgICAgICAgYWZmaXhlZFRvQm90dG9tID0gdHJ1ZTtcblx0ICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgYWZmaXhlZCwgYWZmaXgpO1xuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeGVkQm90dG9tLCBhZmZpeCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICB1blBpbkJvdHRvbSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIGFmZml4ZWRUb0JvdHRvbSAmJiBoYXNDbGFzcyhlbGVtZW50LGFmZml4Qm90dG9tKSApIHtcblx0ICAgICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQsYWZmaXhCb3R0b20pO1xuXHQgICAgICAgICAgYWZmaXhlZFRvQm90dG9tID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICB1cGRhdGVQaW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCBwaW5uZWRCb3R0b20gKSB7XG5cdCAgICAgICAgICBpZiAoIHBpbm5lZFRvcCApIHsgdW5QaW5Ub3AoKTsgfVxuXHQgICAgICAgICAgcGluQm90dG9tKCk7IFxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1blBpbkJvdHRvbSgpO1xuXHQgICAgICAgICAgaWYgKCBwaW5uZWRUb3AgKSB7IHBpblRvcCgpOyB9IFxuXHQgICAgICAgICAgZWxzZSB7IHVuUGluVG9wKCk7IH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgXG5cdCAgICAvLyBwdWJsaWMgbWV0aG9kXG5cdCAgICB0aGlzW3VwZGF0ZV0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNoZWNrUG9zaXRpb24oKTtcblx0ICAgICAgdXBkYXRlUGluKCk7IFxuXHQgICAgfTtcblx0ICBcblx0ICAgIC8vIGluaXRcblx0ICAgIGlmICggIShzdHJpbmdBZmZpeCBpbiBlbGVtZW50ICkgKSB7IC8vIHByZXZlbnQgYWRkaW5nIGV2ZW50IGhhbmRsZXJzIHR3aWNlXG5cdCAgICAgIG9uKCBnbG9iYWxPYmplY3QsIHNjcm9sbEV2ZW50LCB0aGlzW3VwZGF0ZV0gKTtcblx0ICAgICAgb24oIGdsb2JhbE9iamVjdCwgcmVzaXplRXZlbnQsIGZ1bmN0aW9uKCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IHNlbGZbdXBkYXRlXSgpOyB9LCByZXNpemVEZWxheSk7IH0pO1xuXHQgICAgfVxuXHQgICAgZWxlbWVudFtzdHJpbmdBZmZpeF0gPSB0aGlzO1xuXHQgIFxuXHQgICAgdGhpc1t1cGRhdGVdKCk7XG5cdCAgfTtcblx0ICBcblx0ICAvLyBBRkZJWCBEQVRBIEFQSVxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdCAgaW5pdGlhbGl6ZURhdGFBUEkoIHN0cmluZ0FmZml4LCBBZmZpeCwgZGF0YVNweSApO1xuXHQgIFxuXHQgIFxuXHQgIC8qIE5hdGl2ZSBKYXZhc2NyaXB0IGZvciBCb290c3RyYXAgMyB8IEFsZXJ0XG5cdCAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdCAgXG5cdCAgLy8gQUxFUlQgREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT1cblx0ICB2YXIgQWxlcnQgPSBmdW5jdGlvbiggZWxlbWVudCApIHtcblx0ICAgIFxuXHQgICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuXHQgICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcblx0ICBcblx0ICAgIC8vIGJpbmQsIHRhcmdldCBhbGVydCwgZHVyYXRpb24gYW5kIHN0dWZmXG5cdCAgICB2YXIgc2VsZiA9IHRoaXMsIGNvbXBvbmVudCA9ICdhbGVydCcsXG5cdCAgICAgIGFsZXJ0ID0gZ2V0Q2xvc2VzdChlbGVtZW50LCcuJytjb21wb25lbnQpLFxuXHQgICAgICAvLyBoYW5kbGVyc1xuXHQgICAgICBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKXtcblx0ICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBlW3RhcmdldF07XG5cdCAgICAgICAgZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldFtoYXNBdHRyaWJ1dGVdKGRhdGFEaXNtaXNzKSA/IGV2ZW50VGFyZ2V0IDogZXZlbnRUYXJnZXRbcGFyZW50Tm9kZV07XG5cdCAgICAgICAgaWYgKGV2ZW50VGFyZ2V0ICYmIGV2ZW50VGFyZ2V0W2hhc0F0dHJpYnV0ZV0oZGF0YURpc21pc3MpKSB7IC8vIHdlIGRvdWJsZSBjaGVjayB0aGUgZGF0YSBhdHRyaWJ1dGUsIGl0J3MgaW1wb3J0YW50XG5cdCAgICAgICAgICBhbGVydCA9IGdldENsb3Nlc3QoZXZlbnRUYXJnZXQsJy4nK2NvbXBvbmVudCk7XG5cdCAgICAgICAgICBlbGVtZW50ID0gcXVlcnlFbGVtZW50KCdbJytkYXRhRGlzbWlzcysnPVwiJytjb21wb25lbnQrJ1wiXScsYWxlcnQpO1xuXHQgICAgICAgICAgKGVsZW1lbnQgPT09IGV2ZW50VGFyZ2V0IHx8IGVsZW1lbnQgPT09IGV2ZW50VGFyZ2V0W3BhcmVudE5vZGVdKSAmJiBhbGVydCAmJiBzZWxmLmNsb3NlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICB0cmFuc2l0aW9uRW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChhbGVydCwgY2xvc2VkRXZlbnQsIGNvbXBvbmVudCk7XG5cdCAgICAgICAgb2ZmKGVsZW1lbnQsIGNsaWNrRXZlbnQsIGNsaWNrSGFuZGxlcik7IC8vIGRldGFjaCBpdCdzIGxpc3RlbmVyXG5cdCAgICAgICAgYWxlcnRbcGFyZW50Tm9kZV0ucmVtb3ZlQ2hpbGQoYWxlcnQpO1xuXHQgICAgICB9O1xuXHQgICAgXG5cdCAgICAvLyBwdWJsaWMgbWV0aG9kXG5cdCAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICggYWxlcnQgJiYgZWxlbWVudCAmJiBoYXNDbGFzcyhhbGVydCxpbkNsYXNzKSApIHtcblx0ICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGFsZXJ0LCBjbG9zZUV2ZW50LCBjb21wb25lbnQpO1xuXHQgICAgICAgIHJlbW92ZUNsYXNzKGFsZXJ0LGluQ2xhc3MpO1xuXHQgICAgICAgIChmdW5jdGlvbigpeyBhbGVydCAmJiBlbXVsYXRlVHJhbnNpdGlvbkVuZChhbGVydCx0cmFuc2l0aW9uRW5kSGFuZGxlcik7fSgpKVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIFxuXHQgICAgLy8gaW5pdFxuXHQgICAgaWYgKCAhKHN0cmluZ0FsZXJ0IGluIGVsZW1lbnQgKSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2Vcblx0ICAgICAgb24oZWxlbWVudCwgY2xpY2tFdmVudCwgY2xpY2tIYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGVsZW1lbnRbc3RyaW5nQWxlcnRdID0gdGhpcztcblx0ICB9O1xuXHQgIFxuXHQgIC8vIEFMRVJUIERBVEEgQVBJXG5cdCAgLy8gPT09PT09PT09PT09PT1cblx0ICBpbml0aWFsaXplRGF0YUFQSSAoIHN0cmluZ0FsZXJ0LCBBbGVydCwgZGF0YURpc21pc3MgKTtcblx0ICBcblx0ICBcblx0ICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBCdXR0b25cblx0ICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQgIFxuXHQgIC8vIEJVVFRPTiBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PVxuXHQgIHZhciBCdXR0b24gPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9uICkge1xuXHQgIFxuXHQgICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuXHQgICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcblx0ICBcblx0ICAgIC8vIHNldCBvcHRpb25cblx0ICAgIG9wdGlvbiA9IG9wdGlvbiB8fCBudWxsO1xuXHQgIFxuXHQgICAgLy8gY29uc3RhbnRcblx0ICAgIHZhciB0b2dnbGVkID0gZmFsc2UsIC8vIHRvZ2dsZWQgbWFrZXMgc3VyZSB0byBwcmV2ZW50IHRyaWdnZXJpbmcgdHdpY2UgdGhlIGNoYW5nZS5icy5idXR0b24gZXZlbnRzXG5cdCAgXG5cdCAgICAgICAgLy8gc3RyaW5nc1xuXHQgICAgICAgIGNvbXBvbmVudCA9ICdidXR0b24nLFxuXHQgICAgICAgIGNoZWNrZWQgPSAnY2hlY2tlZCcsXG5cdCAgICAgICAgcmVzZXQgPSAncmVzZXQnLFxuXHQgICAgICAgIExBQkVMID0gJ0xBQkVMJyxcblx0ICAgICAgICBJTlBVVCA9ICdJTlBVVCcsXG5cdCAgXG5cdCAgICAgIC8vIHByaXZhdGUgbWV0aG9kc1xuXHQgICAgICBzZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGlmICggISEgb3B0aW9uICYmIG9wdGlvbiAhPT0gcmVzZXQgKSB7XG5cdCAgICAgICAgICBpZiAoIG9wdGlvbiA9PT0gbG9hZGluZyApIHtcblx0ICAgICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCxkaXNhYmxlZCk7XG5cdCAgICAgICAgICAgIGVsZW1lbnRbc2V0QXR0cmlidXRlXShkaXNhYmxlZCxkaXNhYmxlZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBlbGVtZW50W3NldEF0dHJpYnV0ZV0oZGF0YU9yaWdpbmFsVGV4dCwgZWxlbWVudC5pbm5lckhUTUwucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpKTsgLy8gdHJpbSB0aGUgdGV4dFxuXHQgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oJ2RhdGEtJytvcHRpb24rJy10ZXh0Jyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICByZXNldFN0YXRlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhT3JpZ2luYWxUZXh0KSkge1xuXHQgICAgICAgICAgaWYgKCBoYXNDbGFzcyhlbGVtZW50LGRpc2FibGVkKSB8fCBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGlzYWJsZWQpID09PSBkaXNhYmxlZCApIHtcblx0ICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCxkaXNhYmxlZCk7XG5cdCAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGRpc2FibGVkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFPcmlnaW5hbFRleHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgdG9nZ2xlID0gZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSBlW3RhcmdldF1bcGFyZW50Tm9kZV0sXG5cdCAgICAgICAgICBsYWJlbCA9IGVbdGFyZ2V0XS50YWdOYW1lID09PSBMQUJFTCA/IGVbdGFyZ2V0XSA6IHBhcmVudC50YWdOYW1lID09PSBMQUJFTCA/IHBhcmVudCA6IG51bGw7IC8vIHRoZSAuYnRuIGxhYmVsXG5cdCAgXG5cdCAgICAgICAgaWYgKCAhbGFiZWwgKSByZXR1cm47IC8vcmVhY3QgaWYgYSBsYWJlbCBvciBpdHMgaW1tZWRpYXRlIGNoaWxkIGlzIGNsaWNrZWRcblx0ICBcblx0ICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSB0aGlzLCAvLyB0aGUgYnV0dG9uIGdyb3VwLCB0aGUgdGFyZ2V0IG9mIHRoZSBoYW5kbGVyIGZ1bmN0aW9uXG5cdCAgICAgICAgICBsYWJlbHMgPSBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGV2ZW50VGFyZ2V0LCdidG4nKSwgLy8gYWxsIHRoZSBidXR0b24gZ3JvdXAgYnV0dG9uc1xuXHQgICAgICAgICAgaW5wdXQgPSBsYWJlbFtnZXRFbGVtZW50c0J5VGFnTmFtZV0oSU5QVVQpWzBdO1xuXHQgIFxuXHQgICAgICAgIGlmICggIWlucHV0ICkgcmV0dXJuOyAvL3JldHVybiBpZiBubyBpbnB1dCBmb3VuZFxuXHQgIFxuXHQgICAgICAgIC8vIG1hbmFnZSB0aGUgZG9tIG1hbmlwdWxhdGlvblxuXHQgICAgICAgIGlmICggaW5wdXQudHlwZSA9PT0gJ2NoZWNrYm94JyApIHsgLy9jaGVja2JveGVzXG5cdCAgICAgICAgICBpZiAoICFpbnB1dFtjaGVja2VkXSApIHtcblx0ICAgICAgICAgICAgYWRkQ2xhc3MobGFiZWwsYWN0aXZlKTtcblx0ICAgICAgICAgICAgaW5wdXRbZ2V0QXR0cmlidXRlXShjaGVja2VkKTtcblx0ICAgICAgICAgICAgaW5wdXRbc2V0QXR0cmlidXRlXShjaGVja2VkLGNoZWNrZWQpO1xuXHQgICAgICAgICAgICBpbnB1dFtjaGVja2VkXSA9IHRydWU7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZW1vdmVDbGFzcyhsYWJlbCxhY3RpdmUpO1xuXHQgICAgICAgICAgICBpbnB1dFtnZXRBdHRyaWJ1dGVdKGNoZWNrZWQpO1xuXHQgICAgICAgICAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoY2hlY2tlZCk7XG5cdCAgICAgICAgICAgIGlucHV0W2NoZWNrZWRdID0gZmFsc2U7XG5cdCAgICAgICAgICB9XG5cdCAgXG5cdCAgICAgICAgICBpZiAoIXRvZ2dsZWQpIHsgLy8gcHJldmVudCB0cmlnZ2VyaW5nIHRoZSBldmVudCB0d2ljZVxuXHQgICAgICAgICAgICB0b2dnbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChpbnB1dCwgY2hhbmdlRXZlbnQsIGNvbXBvbmVudCk7IC8vdHJpZ2dlciB0aGUgY2hhbmdlIGZvciB0aGUgaW5wdXRcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBjaGFuZ2VFdmVudCwgY29tcG9uZW50KTsgLy90cmlnZ2VyIHRoZSBjaGFuZ2UgZm9yIHRoZSBidG4tZ3JvdXBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgXG5cdCAgICAgICAgaWYgKCBpbnB1dC50eXBlID09PSAncmFkaW8nICYmICF0b2dnbGVkICkgeyAvLyByYWRpbyBidXR0b25zXG5cdCAgICAgICAgICBpZiAoICFpbnB1dFtjaGVja2VkXSApIHsgLy8gZG9uJ3QgdHJpZ2dlciBpZiBhbHJlYWR5IGFjdGl2ZVxuXHQgICAgICAgICAgICBhZGRDbGFzcyhsYWJlbCxhY3RpdmUpO1xuXHQgICAgICAgICAgICBpbnB1dFtzZXRBdHRyaWJ1dGVdKGNoZWNrZWQsY2hlY2tlZCk7XG5cdCAgICAgICAgICAgIGlucHV0W2NoZWNrZWRdID0gdHJ1ZTtcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChpbnB1dCwgY2hhbmdlRXZlbnQsIGNvbXBvbmVudCk7IC8vdHJpZ2dlciB0aGUgY2hhbmdlIGZvciB0aGUgaW5wdXRcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBjaGFuZ2VFdmVudCwgY29tcG9uZW50KTsgLy90cmlnZ2VyIHRoZSBjaGFuZ2UgZm9yIHRoZSBidG4tZ3JvdXBcblx0ICBcblx0ICAgICAgICAgICAgdG9nZ2xlZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsbCA9IGxhYmVsc1tsZW5ndGhdOyBpPGxsOyBpKyspIHtcblx0ICAgICAgICAgICAgICB2YXIgb3RoZXJMYWJlbCA9IGxhYmVsc1tpXSwgb3RoZXJJbnB1dCA9IG90aGVyTGFiZWxbZ2V0RWxlbWVudHNCeVRhZ05hbWVdKElOUFVUKVswXTtcblx0ICAgICAgICAgICAgICBpZiAoIG90aGVyTGFiZWwgIT09IGxhYmVsICYmIGhhc0NsYXNzKG90aGVyTGFiZWwsYWN0aXZlKSApICB7XG5cdCAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhvdGhlckxhYmVsLGFjdGl2ZSk7XG5cdCAgICAgICAgICAgICAgICBvdGhlcklucHV0LnJlbW92ZUF0dHJpYnV0ZShjaGVja2VkKTtcblx0ICAgICAgICAgICAgICAgIG90aGVySW5wdXRbY2hlY2tlZF0gPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwob3RoZXJJbnB1dCwgY2hhbmdlRXZlbnQsIGNvbXBvbmVudCk7IC8vIHRyaWdnZXIgdGhlIGNoYW5nZVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgdG9nZ2xlZCA9IGZhbHNlOyB9LCA1MCApO1xuXHQgICAgICB9O1xuXHQgIFxuXHQgICAgLy8gaW5pdFxuXHQgICAgaWYgKCBoYXNDbGFzcyhlbGVtZW50LCdidG4nKSApIHsgLy8gd2hlbiBCdXR0b24gdGV4dCBpcyB1c2VkIHdlIGV4ZWN1dGUgaXQgYXMgYW4gaW5zdGFuY2UgbWV0aG9kXG5cdCAgICAgIGlmICggb3B0aW9uICE9PSBudWxsICkge1xuXHQgICAgICAgIGlmICggb3B0aW9uICE9PSByZXNldCApIHsgc2V0U3RhdGUoKTsgfSBcblx0ICAgICAgICBlbHNlIHsgcmVzZXRTdGF0ZSgpOyB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICggaGFzQ2xhc3MoZWxlbWVudCwnYnRuLWdyb3VwJykgKSB7XG5cdCAgICAgIGlmICggISggc3RyaW5nQnV0dG9uIGluIGVsZW1lbnQgKSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2Vcblx0ICAgICAgICBvbiggZWxlbWVudCwgY2xpY2tFdmVudCwgdG9nZ2xlICk7XG5cdCAgICAgIH1cblx0ICAgICAgZWxlbWVudFtzdHJpbmdCdXR0b25dID0gdGhpcztcblx0ICAgIH1cblx0ICB9O1xuXHQgIFxuXHQgIC8vIEJVVFRPTiBEQVRBIEFQSVxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdCAgaW5pdGlhbGl6ZURhdGFBUEkoIHN0cmluZ0J1dHRvbiwgQnV0dG9uLCBkYXRhVG9nZ2xlICk7XG5cdCAgXG5cdCAgXG5cdCAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgQ2Fyb3VzZWxcblx0ICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0ICBcblx0ICAvLyBDQVJPVVNFTCBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PVxuXHQgIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb25zICkge1xuXHQgIFxuXHQgICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuXHQgICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudCggZWxlbWVudCApO1xuXHQgIFxuXHQgICAgLy8gc2V0IG9wdGlvbnNcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgIFxuXHQgICAgLy8gREFUQSBBUElcblx0ICAgIHZhciBpbnRlcnZhbERhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YUludGVydmFsKSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogcGFyc2VJbnQoZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFJbnRlcnZhbCkpIHx8IDUwMDAsIC8vIGJvb3RzdHJhcCBjYXJvdXNlbCBkZWZhdWx0IGludGVydmFsXG5cdCAgICAgICAgcGF1c2VEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFQYXVzZSkgPT09IGhvdmVyRXZlbnQgfHwgZmFsc2UsXG5cdCAgICAgICAga2V5Ym9hcmREYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFLZXlib2FyZCkgPT09ICd0cnVlJyB8fCBmYWxzZSxcblx0ICAgICAgXG5cdCAgICAgICAgLy8gc3RyaW5nc1xuXHQgICAgICAgIGNvbXBvbmVudCA9ICdjYXJvdXNlbCcsXG5cdCAgICAgICAgcGF1c2VkID0gJ3BhdXNlZCcsXG5cdCAgICAgICAgZGlyZWN0aW9uID0gJ2RpcmVjdGlvbicsXG5cdCAgICAgICAgZGF0YVNsaWRlVG8gPSAnZGF0YS1zbGlkZS10byc7IFxuXHQgIFxuXHQgICAgdGhpc1trZXlib2FyZF0gPSBvcHRpb25zW2tleWJvYXJkXSA9PT0gdHJ1ZSB8fCBrZXlib2FyZERhdGE7XG5cdCAgICB0aGlzW3BhdXNlXSA9IChvcHRpb25zW3BhdXNlXSA9PT0gaG92ZXJFdmVudCB8fCBwYXVzZURhdGEpID8gaG92ZXJFdmVudCA6IGZhbHNlOyAvLyBmYWxzZSAvIGhvdmVyXG5cdCAgXG5cdCAgICBpZiAoICEoIG9wdGlvbnNbaW50ZXJ2YWxdIHx8IGludGVydmFsRGF0YSApICkgeyAvLyBkZXRlcm1pbmUgc2xpZGUgaW50ZXJ2YWxcblx0ICAgICAgdGhpc1tpbnRlcnZhbF0gPSBmYWxzZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXNbaW50ZXJ2YWxdID0gcGFyc2VJbnQob3B0aW9uc1tpbnRlcnZhbF0pIHx8IGludGVydmFsRGF0YTsgLy8gZGVmYXVsdCBzbGlkZSBpbnRlcnZhbFxuXHQgICAgfVxuXHQgIFxuXHQgICAgLy8gYmluZCwgZXZlbnQgdGFyZ2V0c1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzLCBpbmRleCA9IGVsZW1lbnQuaW5kZXggPSAwLCB0aW1lciA9IGVsZW1lbnQudGltZXIgPSAwLCBcblx0ICAgICAgaXNTbGlkaW5nID0gZmFsc2UsIC8vIGlzU2xpZGluZyBwcmV2ZW50cyBjbGljayBldmVudCBoYW5kbGVycyB3aGVuIGFuaW1hdGlvbiBpcyBydW5uaW5nXG5cdCAgICAgIHNsaWRlcyA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudCwnaXRlbScpLCB0b3RhbCA9IHNsaWRlc1tsZW5ndGhdLFxuXHQgICAgICBzbGlkZURpcmVjdGlvbiA9IHRoaXNbZGlyZWN0aW9uXSA9IGxlZnQsXG5cdCAgICAgIGNvbnRyb2xzID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlbGVtZW50LGNvbXBvbmVudCsnLWNvbnRyb2wnKSxcblx0ICAgICAgbGVmdEFycm93ID0gY29udHJvbHNbMF0sIHJpZ2h0QXJyb3cgPSBjb250cm9sc1sxXSxcblx0ICAgICAgaW5kaWNhdG9yID0gcXVlcnlFbGVtZW50KCAnLicrY29tcG9uZW50KyctaW5kaWNhdG9ycycsIGVsZW1lbnQgKSxcblx0ICAgICAgaW5kaWNhdG9ycyA9IGluZGljYXRvcltnZXRFbGVtZW50c0J5VGFnTmFtZV0oIFwiTElcIiApO1xuXHQgIFxuXHQgICAgLy8gaGFuZGxlcnNcblx0ICAgIHZhciBwYXVzZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCBzZWxmW2ludGVydmFsXSAhPT1mYWxzZSAmJiAhaGFzQ2xhc3MoZWxlbWVudCxwYXVzZWQpICkge1xuXHQgICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCxwYXVzZWQpO1xuXHQgICAgICAgICAgIWlzU2xpZGluZyAmJiBjbGVhckludGVydmFsKCB0aW1lciApO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgcmVzdW1lSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGlmICggc2VsZltpbnRlcnZhbF0gIT09IGZhbHNlICYmIGhhc0NsYXNzKGVsZW1lbnQscGF1c2VkKSApIHtcblx0ICAgICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQscGF1c2VkKTtcblx0ICAgICAgICAgICFpc1NsaWRpbmcgJiYgY2xlYXJJbnRlcnZhbCggdGltZXIgKTtcblx0ICAgICAgICAgICFpc1NsaWRpbmcgJiYgc2VsZi5jeWNsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgaW5kaWNhdG9ySGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0ICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgaWYgKGlzU2xpZGluZykgcmV0dXJuO1xuXHQgIFxuXHQgICAgICAgIHZhciBldmVudFRhcmdldCA9IGVbdGFyZ2V0XSwgYWN0aXZlSW5kaWNhdG9yID0gc2VsZi5nZXRBY3RpdmVJbmRleCgpOyAvLyBldmVudCB0YXJnZXQgfCB0aGUgY3VycmVudCBhY3RpdmUgaXRlbVxuXHQgIFxuXHQgICAgICAgIGlmICggZXZlbnRUYXJnZXQgJiYgIWhhc0NsYXNzKGV2ZW50VGFyZ2V0LGFjdGl2ZSkgJiYgZXZlbnRUYXJnZXRbZ2V0QXR0cmlidXRlXShkYXRhU2xpZGVUbykgKSB7XG5cdCAgICAgICAgICBpbmRleCA9IHBhcnNlSW50KCBldmVudFRhcmdldFtnZXRBdHRyaWJ1dGVdKGRhdGFTbGlkZVRvKSwgMTAgKTtcblx0ICBcblx0ICAgICAgICAgIC8vZGV0ZXJtaW5lIGRpcmVjdGlvbiBmaXJzdFxuXHQgICAgICAgICAgaWYgICggKGFjdGl2ZUluZGljYXRvciA8IGluZGV4ICkgfHwgKGFjdGl2ZUluZGljYXRvciA9PT0gMCAmJiBpbmRleCA9PT0gdG90YWwgLTEgKSApIHtcblx0ICAgICAgICAgICAgc2xpZGVEaXJlY3Rpb24gPSBzZWxmW2RpcmVjdGlvbl0gPSBsZWZ0OyAvLyBuZXh0XG5cdCAgICAgICAgICB9IGVsc2UgaWYgICggKGFjdGl2ZUluZGljYXRvciA+IGluZGV4KSB8fCAoYWN0aXZlSW5kaWNhdG9yID09PSB0b3RhbCAtIDEgJiYgaW5kZXggPT09IDAgKSApIHtcblx0ICAgICAgICAgICAgc2xpZGVEaXJlY3Rpb24gPSBzZWxmW2RpcmVjdGlvbl0gPSByaWdodDsgLy8gcHJldlxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfVxuXHQgIFxuXHQgICAgICAgIHNlbGYuc2xpZGVUbyggaW5kZXggKTsgLy9EbyB0aGUgc2xpZGVcblx0ICAgICAgfSxcblx0ICAgICAgY29udHJvbHNIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgaWYgKGlzU2xpZGluZykgcmV0dXJuO1xuXHQgIFxuXHQgICAgICAgIHZhciBldmVudFRhcmdldCA9IGUuY3VycmVudFRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cdCAgXG5cdCAgICAgICAgaWYgKCBldmVudFRhcmdldCA9PT0gcmlnaHRBcnJvdyApIHtcblx0ICAgICAgICAgIGluZGV4Kys7XG5cdCAgICAgICAgICBzbGlkZURpcmVjdGlvbiA9IHNlbGZbZGlyZWN0aW9uXSA9IGxlZnQ7IC8vc2V0IGRpcmVjdGlvbiBmaXJzdFxuXHQgIFxuXHQgICAgICAgICAgaWYoIGluZGV4ID09PSB0b3RhbCAtIDEgKSB7XG5cdCAgICAgICAgICAgIGluZGV4ID0gdG90YWwgLSAxO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICggaW5kZXggPT09IHRvdGFsICl7XG5cdCAgICAgICAgICAgIGluZGV4ID0gMDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKCBldmVudFRhcmdldCA9PT0gbGVmdEFycm93ICkge1xuXHQgICAgICAgICAgaW5kZXgtLTtcblx0ICAgICAgICAgIHNsaWRlRGlyZWN0aW9uID0gc2VsZltkaXJlY3Rpb25dID0gcmlnaHQ7IC8vc2V0IGRpcmVjdGlvbiBmaXJzdFxuXHQgIFxuXHQgICAgICAgICAgaWYoIGluZGV4ID09PSAwICkge1xuXHQgICAgICAgICAgICBpbmRleCA9IDA7XG5cdCAgICAgICAgICB9IGVsc2UgaWYgKCBpbmRleCA8IDAgKXtcblx0ICAgICAgICAgICAgaW5kZXggPSB0b3RhbCAtIDFcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgXG5cdCAgICAgICAgc2VsZi5zbGlkZVRvKCBpbmRleCApOyAvL0RvIHRoZSBzbGlkZVxuXHQgICAgICB9LFxuXHQgICAgICBrZXlIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBpZiAoaXNTbGlkaW5nKSByZXR1cm47XG5cdCAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XG5cdCAgICAgICAgICBjYXNlIDM5OlxuXHQgICAgICAgICAgICBpbmRleCsrO1xuXHQgICAgICAgICAgICBzbGlkZURpcmVjdGlvbiA9IHNlbGZbZGlyZWN0aW9uXSA9IGxlZnQ7XG5cdCAgICAgICAgICAgIGlmKCBpbmRleCA9PSB0b3RhbCAtIDEgKSB7IGluZGV4ID0gdG90YWwgLSAxOyB9IGVsc2Vcblx0ICAgICAgICAgICAgaWYgKCBpbmRleCA9PSB0b3RhbCApeyBpbmRleCA9IDAgfVxuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIGNhc2UgMzc6XG5cdCAgICAgICAgICAgIGluZGV4LS07XG5cdCAgICAgICAgICAgIHNsaWRlRGlyZWN0aW9uID0gc2VsZltkaXJlY3Rpb25dID0gcmlnaHQ7XG5cdCAgICAgICAgICAgIGlmICggaW5kZXggPT0gMCApIHsgaW5kZXggPSAwOyB9IGVsc2Vcblx0ICAgICAgICAgICAgaWYgKCBpbmRleCA8IDAgKSB7IGluZGV4ID0gdG90YWwgLSAxIH1cblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICBkZWZhdWx0OiByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNlbGYuc2xpZGVUbyggaW5kZXggKTsgLy9EbyB0aGUgc2xpZGVcblx0ICAgICAgfSxcblx0ICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG5cdCAgICAgIHNldEFjdGl2ZVBhZ2UgPSBmdW5jdGlvbiggcGFnZUluZGV4ICkgeyAvL2luZGljYXRvcnNcblx0ICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGljbCA9IGluZGljYXRvcnNbbGVuZ3RoXTsgaSA8IGljbDsgaSsrICkge1xuXHQgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5kaWNhdG9yc1tpXSxhY3RpdmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaW5kaWNhdG9yc1twYWdlSW5kZXhdKSBhZGRDbGFzcyhpbmRpY2F0b3JzW3BhZ2VJbmRleF0sIGFjdGl2ZSk7XG5cdCAgICAgIH07XG5cdCAgXG5cdCAgXG5cdCAgICAvLyBwdWJsaWMgbWV0aG9kc1xuXHQgICAgdGhpcy5jeWNsZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBzbGlkZURpcmVjdGlvbiA9IHRoaXNbZGlyZWN0aW9uXSA9IGxlZnQ7IC8vIG1ha2Ugc3VyZSB0byBhbHdheXMgY29tZSBiYWNrIHRvIGRlZmF1bHQgc2xpZGVEaXJlY3Rpb25cblx0ICAgICAgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblx0ICAgICAgICBpbmRleCsrO1xuXHQgIFxuXHQgICAgICAgIGluZGV4ID0gaW5kZXggPT09IHRvdGFsID8gMCA6IGluZGV4O1xuXHQgICAgICAgIHNlbGYuc2xpZGVUbyggaW5kZXggKTtcblx0ICAgICAgfSwgdGhpc1tpbnRlcnZhbF0pO1xuXHQgICAgfTtcblx0ICAgIHRoaXMuc2xpZGVUbyA9IGZ1bmN0aW9uKCBuZXh0ICkge1xuXHQgICAgICB2YXIgYWN0aXZlSXRlbSA9IHRoaXMuZ2V0QWN0aXZlSW5kZXgoKSwgLy8gdGhlIGN1cnJlbnQgYWN0aXZlXG5cdCAgICAgICAgICBvcmllbnRhdGlvbiA9IHNsaWRlRGlyZWN0aW9uID09PSBsZWZ0ID8gJ25leHQnIDogJ3ByZXYnOyAvL2RldGVybWluZSB0eXBlXG5cdCAgXG5cdCAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgc2xpZGVFdmVudCwgY29tcG9uZW50LCBzbGlkZXNbbmV4dF0pOyAvLyBoZXJlIHdlIGdvIHdpdGggdGhlIHNsaWRlXG5cdCAgXG5cdCAgICAgIGlzU2xpZGluZyA9IHRoaXMuaXNTbGlkaW5nID0gdHJ1ZTtcblx0ICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG5cdCAgICAgIHNldEFjdGl2ZVBhZ2UoIG5leHQgKTtcblx0ICBcblx0ICAgICAgaWYgKCBzdXBwb3J0VHJhbnNpdGlvbnMgJiYgaGFzQ2xhc3MoZWxlbWVudCwnc2xpZGUnKSApIHtcblx0ICBcblx0ICAgICAgICBhZGRDbGFzcyhzbGlkZXNbbmV4dF0sb3JpZW50YXRpb24pO1xuXHQgICAgICAgIHNsaWRlc1tuZXh0XVtvZmZzZXRXaWR0aF07XG5cdCAgICAgICAgYWRkQ2xhc3Moc2xpZGVzW25leHRdLHNsaWRlRGlyZWN0aW9uKTtcblx0ICAgICAgICBhZGRDbGFzcyhzbGlkZXNbYWN0aXZlSXRlbV0sc2xpZGVEaXJlY3Rpb24pO1xuXHQgIFxuXHQgICAgICAgIG9uZShzbGlkZXNbYWN0aXZlSXRlbV0sIHRyYW5zaXRpb25FbmRFdmVudCwgZnVuY3Rpb24oZSkge1xuXHQgICAgICAgICAgdmFyIHRpbWVvdXQgPSBlW3RhcmdldF0gIT09IHNsaWRlc1thY3RpdmVJdGVtXSA/IGUuZWxhcHNlZFRpbWUqMTAwMCA6IDA7XG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgIGlzU2xpZGluZyA9IHNlbGYuaXNTbGlkaW5nID0gZmFsc2U7XG5cdCAgXG5cdCAgICAgICAgICAgIGFkZENsYXNzKHNsaWRlc1tuZXh0XSxhY3RpdmUpO1xuXHQgICAgICAgICAgICByZW1vdmVDbGFzcyhzbGlkZXNbYWN0aXZlSXRlbV0sYWN0aXZlKTtcblx0ICBcblx0ICAgICAgICAgICAgcmVtb3ZlQ2xhc3Moc2xpZGVzW25leHRdLG9yaWVudGF0aW9uKTtcblx0ICAgICAgICAgICAgcmVtb3ZlQ2xhc3Moc2xpZGVzW25leHRdLHNsaWRlRGlyZWN0aW9uKTtcblx0ICAgICAgICAgICAgcmVtb3ZlQ2xhc3Moc2xpZGVzW2FjdGl2ZUl0ZW1dLHNsaWRlRGlyZWN0aW9uKTtcblx0ICBcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBzbGlkRXZlbnQsIGNvbXBvbmVudCwgc2xpZGVzW25leHRdKTtcblx0ICBcblx0ICAgICAgICAgICAgaWYgKCBzZWxmW2ludGVydmFsXSAmJiAhaGFzQ2xhc3MoZWxlbWVudCxwYXVzZWQpICkge1xuXHQgICAgICAgICAgICAgIHNlbGYuY3ljbGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSx0aW1lb3V0KTtcblx0ICAgICAgICB9KTtcblx0ICBcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhZGRDbGFzcyhzbGlkZXNbbmV4dF0sYWN0aXZlKTtcblx0ICAgICAgICBzbGlkZXNbbmV4dF1bb2Zmc2V0V2lkdGhdO1xuXHQgICAgICAgIHJlbW92ZUNsYXNzKHNsaWRlc1thY3RpdmVJdGVtXSxhY3RpdmUpO1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpc1NsaWRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgIGlmICggc2VsZltpbnRlcnZhbF0gJiYgIWhhc0NsYXNzKGVsZW1lbnQscGF1c2VkKSApIHtcblx0ICAgICAgICAgICAgc2VsZi5jeWNsZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBzbGlkRXZlbnQsIGNvbXBvbmVudCwgc2xpZGVzW25leHRdKTsgLy8gaGVyZSB3ZSBnbyB3aXRoIHRoZSBzbGlkIGV2ZW50XG5cdCAgICAgICAgfSwgMTAwICk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB0aGlzLmdldEFjdGl2ZUluZGV4ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gc2xpZGVzW2luZGV4T2ZdKGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudCwnaXRlbSBhY3RpdmUnKVswXSkgfHwgMDtcblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICBpZiAoICEoc3RyaW5nQ2Fyb3VzZWwgaW4gZWxlbWVudCApICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuXHQgIFxuXHQgICAgICBpZiAoIHRoaXNbcGF1c2VdICYmIHRoaXNbaW50ZXJ2YWxdICkge1xuXHQgICAgICAgIG9uKCBlbGVtZW50LCBtb3VzZUhvdmVyWzBdLCBwYXVzZUhhbmRsZXIgKTtcblx0ICAgICAgICBvbiggZWxlbWVudCwgbW91c2VIb3ZlclsxXSwgcmVzdW1lSGFuZGxlciApO1xuXHQgICAgICAgIG9uKCBlbGVtZW50LCAndG91Y2hzdGFydCcsIHBhdXNlSGFuZGxlciApO1xuXHQgICAgICAgIG9uKCBlbGVtZW50LCAndG91Y2hlbmQnLCByZXN1bWVIYW5kbGVyICk7XG5cdCAgICAgIH1cblx0ICAgIFxuXHQgICAgICByaWdodEFycm93ICYmIG9uKCByaWdodEFycm93LCBjbGlja0V2ZW50LCBjb250cm9sc0hhbmRsZXIgKTtcblx0ICAgICAgbGVmdEFycm93ICYmIG9uKCBsZWZ0QXJyb3csIGNsaWNrRXZlbnQsIGNvbnRyb2xzSGFuZGxlciApO1xuXHQgICAgXG5cdCAgICAgIGluZGljYXRvciAmJiBvbiggaW5kaWNhdG9yLCBjbGlja0V2ZW50LCBpbmRpY2F0b3JIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICAgIHRoaXNba2V5Ym9hcmRdID09PSB0cnVlICYmIG9uKCBnbG9iYWxPYmplY3QsIGtleWRvd25FdmVudCwga2V5SGFuZGxlciwgZmFsc2UpO1xuXHQgIFxuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZ2V0QWN0aXZlSW5kZXgoKTwwKSB7XG5cdCAgICAgIHNsaWRlc1tsZW5ndGhdICYmIGFkZENsYXNzKHNsaWRlc1swXSxhY3RpdmUpO1xuXHQgICAgICBpbmRpY2F0b3JzW2xlbmd0aF0gJiYgc2V0QWN0aXZlUGFnZSgwKTtcblx0ICAgIH1cblx0ICBcblx0ICAgIGlmICggdGhpc1tpbnRlcnZhbF0gKXsgdGhpcy5jeWNsZSgpOyB9XG5cdCAgICBlbGVtZW50W3N0cmluZ0Nhcm91c2VsXSA9IHRoaXM7XG5cdCAgfTtcblx0ICBcblx0ICAvLyBDQVJPVVNFTCBEQVRBIEFQSVxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdCAgaW5pdGlhbGl6ZURhdGFBUEkoIHN0cmluZ0Nhcm91c2VsLCBDYXJvdXNlbCwgZGF0YVJpZGUgKTtcblx0ICBcblx0ICBcblx0ICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBDb2xsYXBzZVxuXHQgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0ICBcblx0ICAvLyBDT0xMQVBTRSBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09PVxuXHQgIHZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb25zICkge1xuXHQgIFxuXHQgICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuXHQgICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcblx0ICBcblx0ICAgIC8vIHNldCBvcHRpb25zXG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICBcblx0ICBcblx0ICAgIC8vIGV2ZW50IHRhcmdldHMgYW5kIGNvbnN0YW50c1xuXHQgICAgdmFyIGFjY29yZGlvbiA9IG51bGwsIGNvbGxhcHNlID0gbnVsbCwgc2VsZiA9IHRoaXMsIFxuXHQgICAgICBpc0FuaW1hdGluZyA9IGZhbHNlLCAvLyB3aGVuIHRydWUgaXQgd2lsbCBwcmV2ZW50IGNsaWNrIGhhbmRsZXJzXG5cdCAgICAgIGFjY29yZGlvbkRhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oJ2RhdGEtcGFyZW50JyksXG5cdCAgXG5cdCAgICAgIC8vIGNvbXBvbmVudCBzdHJpbmdzXG5cdCAgICAgIGNvbXBvbmVudCA9ICdjb2xsYXBzZScsXG5cdCAgICAgIGNvbGxhcHNlZCA9ICdjb2xsYXBzZWQnLFxuXHQgIFxuXHQgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcblx0ICAgICAgb3BlbkFjdGlvbiA9IGZ1bmN0aW9uKGNvbGxhcHNlRWxlbWVudCkge1xuXHQgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoY29sbGFwc2VFbGVtZW50LCBzaG93RXZlbnQsIGNvbXBvbmVudCk7XG5cdCAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xuXHQgICAgICAgIGFkZENsYXNzKGNvbGxhcHNlRWxlbWVudCxjb2xsYXBzaW5nKTtcblx0ICAgICAgICBhZGRDbGFzcyhjb2xsYXBzZUVsZW1lbnQsaW5DbGFzcyk7XG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGNvbGxhcHNlRWxlbWVudFtzdHlsZV1baGVpZ2h0XSA9IGdldE1heEhlaWdodChjb2xsYXBzZUVsZW1lbnQpICsgJ3B4Jztcblx0ICBcblx0ICAgICAgICAgIChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChjb2xsYXBzZUVsZW1lbnQsIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgY29sbGFwc2VFbGVtZW50W3NldEF0dHJpYnV0ZV0oYXJpYUV4cGFuZGVkLCd0cnVlJyk7XG5cdCAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoY29sbGFwc2VFbGVtZW50LGNvbGxhcHNpbmcpO1xuXHQgICAgICAgICAgICAgIGNvbGxhcHNlRWxlbWVudFtzdHlsZV1baGVpZ2h0XSA9ICcnO1xuXHQgICAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoY29sbGFwc2VFbGVtZW50LCBzaG93bkV2ZW50LCBjb21wb25lbnQpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0oKSk7XG5cdCAgICAgICAgfSwyMCk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGNsb3NlQWN0aW9uID0gZnVuY3Rpb24oY29sbGFwc2VFbGVtZW50KSB7XG5cdCAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChjb2xsYXBzZUVsZW1lbnQsIGhpZGVFdmVudCwgY29tcG9uZW50KTtcblx0ICAgICAgICBpc0FuaW1hdGluZyA9IHRydWU7XG5cdCAgICAgICAgY29sbGFwc2VFbGVtZW50W3N0eWxlXVtoZWlnaHRdID0gZ2V0TWF4SGVpZ2h0KGNvbGxhcHNlRWxlbWVudCkgKyAncHgnO1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBhZGRDbGFzcyhjb2xsYXBzZUVsZW1lbnQsY29sbGFwc2luZyk7XG5cdCAgICAgICAgICBjb2xsYXBzZUVsZW1lbnRbc3R5bGVdW2hlaWdodF0gPSAnMHB4Jztcblx0ICBcblx0ICAgICAgICAgIChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChjb2xsYXBzZUVsZW1lbnQsIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgY29sbGFwc2VFbGVtZW50W3NldEF0dHJpYnV0ZV0oYXJpYUV4cGFuZGVkLCdmYWxzZScpO1xuXHQgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGNvbGxhcHNlRWxlbWVudCxjb2xsYXBzaW5nKTtcblx0ICAgICAgICAgICAgICByZW1vdmVDbGFzcyhjb2xsYXBzZUVsZW1lbnQsaW5DbGFzcyk7XG5cdCAgICAgICAgICAgICAgY29sbGFwc2VFbGVtZW50W3N0eWxlXVtoZWlnaHRdID0gJyc7XG5cdCAgICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChjb2xsYXBzZUVsZW1lbnQsIGhpZGRlbkV2ZW50LCBjb21wb25lbnQpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0oKSk7XG5cdCAgICAgICAgfSwyMCk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGdldFRhcmdldCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBocmVmID0gZWxlbWVudC5ocmVmICYmIGVsZW1lbnRbZ2V0QXR0cmlidXRlXSgnaHJlZicpLFxuXHQgICAgICAgICAgcGFyZW50ID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpLFxuXHQgICAgICAgICAgaWQgPSBocmVmIHx8ICggcGFyZW50ICYmIHRhcmdldHNSZWcudGVzdChwYXJlbnQpICkgJiYgcGFyZW50O1xuXHQgICAgICAgIHJldHVybiBpZCAmJiBxdWVyeUVsZW1lbnQoaWQpO1xuXHQgICAgICB9O1xuXHQgICAgXG5cdCAgICAvLyBwdWJsaWMgbWV0aG9kc1xuXHQgICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbihlKSB7XG5cdCAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgaWYgKCBpc0FuaW1hdGluZyApIHJldHVybjtcblx0ICAgICAgaWYgKCFoYXNDbGFzcyhjb2xsYXBzZSxpbkNsYXNzKSkgeyBzZWxmLnNob3coKTsgfSBcblx0ICAgICAgZWxzZSB7IHNlbGYuaGlkZSgpOyB9XG5cdCAgICB9O1xuXHQgICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNsb3NlQWN0aW9uKGNvbGxhcHNlKTtcblx0ICAgICAgYWRkQ2xhc3MoZWxlbWVudCxjb2xsYXBzZWQpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBvcGVuQWN0aW9uKGNvbGxhcHNlKTtcblx0ICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCxjb2xsYXBzZWQpO1xuXHQgIFxuXHQgICAgICBpZiAoIGFjY29yZGlvbiAhPT0gbnVsbCApIHtcblx0ICAgICAgICB2YXIgYWN0aXZlQ29sbGFwc2VzID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhY2NvcmRpb24sY29tcG9uZW50KycgJytpbkNsYXNzKTtcblx0ICAgICAgICBmb3IgKHZhciBpPTAsIGFsPWFjdGl2ZUNvbGxhcHNlc1tsZW5ndGhdOyBpPGFsOyBpKyspIHtcblx0ICAgICAgICAgIGlmICggYWN0aXZlQ29sbGFwc2VzW2ldICE9PSBjb2xsYXBzZSkgY2xvc2VBY3Rpb24oYWN0aXZlQ29sbGFwc2VzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICBpZiAoICEoc3RyaW5nQ29sbGFwc2UgaW4gZWxlbWVudCApICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuXHQgICAgICBvbihlbGVtZW50LCBjbGlja0V2ZW50LCB0aGlzLnRvZ2dsZSk7XG5cdCAgICB9XG5cdCAgICBjb2xsYXBzZSA9IGdldFRhcmdldCgpO1xuXHQgICAgYWNjb3JkaW9uID0gcXVlcnlFbGVtZW50KG9wdGlvbnMucGFyZW50KSB8fCBhY2NvcmRpb25EYXRhICYmIGdldENsb3Nlc3QoZWxlbWVudCwgYWNjb3JkaW9uRGF0YSk7XG5cdCAgICBlbGVtZW50W3N0cmluZ0NvbGxhcHNlXSA9IHRoaXM7XG5cdCAgfTtcblx0ICBcblx0ICAvLyBDT0xMQVBTRSBEQVRBIEFQSVxuXHQgIC8vID09PT09PT09PT09PT09PT09XG5cdCAgaW5pdGlhbGl6ZURhdGFBUEkoc3RyaW5nQ29sbGFwc2UsIENvbGxhcHNlLCBkYXRhVG9nZ2xlKTtcblx0ICBcblx0ICBcblx0ICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBEcm9wZG93blxuXHQgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQgIFxuXHQgIC8vIERST1BET1dOIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT09XG5cdCAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbiApIHtcblx0ICAgICAgXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG5cdCAgICBlbGVtZW50ID0gcXVlcnlFbGVtZW50KGVsZW1lbnQpO1xuXHQgIFxuXHQgICAgLy8gc2V0IG9wdGlvblxuXHQgICAgdGhpcy5wZXJzaXN0ID0gb3B0aW9uID09PSB0cnVlIHx8IGVsZW1lbnRbZ2V0QXR0cmlidXRlXSgnZGF0YS1wZXJzaXN0JykgPT09ICd0cnVlJyB8fCBmYWxzZTtcblx0ICBcblx0ICAgIC8vIGNvbnN0YW50cywgZXZlbnQgdGFyZ2V0cywgc3RyaW5nc1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzLCBpc09wZW4gPSBmYWxzZSxcblx0ICAgICAgcGFyZW50ID0gZWxlbWVudFtwYXJlbnROb2RlXSxcblx0ICAgICAgY29tcG9uZW50ID0gJ2Ryb3Bkb3duJywgb3BlbiA9ICdvcGVuJyxcblx0ICAgICAgcmVsYXRlZFRhcmdldCA9IG51bGwsXG5cdCAgICAgIG1lbnUgPSBxdWVyeUVsZW1lbnQoJy5kcm9wZG93bi1tZW51JywgcGFyZW50KSxcblx0ICAgICAgY2hpbGRyZW4gPSBub2RlTGlzdFRvQXJyYXkoIG1lbnVbZ2V0RWxlbWVudHNCeVRhZ05hbWVdKCcqJykpLFxuXHQgIFxuXHQgICAgICAvLyBoYW5kbGVyc1xuXHQgICAgICBrZXlIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIGlmIChpc09wZW4gJiYgKGUud2hpY2ggPT0gMjcgfHwgZS5rZXlDb2RlID09IDI3KSkgeyByZWxhdGVkVGFyZ2V0ID0gbnVsbDsgaGlkZSgpOyB9IC8vIGUua2V5Q29kZSBmb3IgSUU4XG5cdCAgICAgIH0sXG5cdCAgICAgIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0ICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBlW3RhcmdldF0sIGhhc0RhdGE7XG5cdCAgICAgICAgaGFzRGF0YSA9ICggZXZlbnRUYXJnZXQubm9kZVR5cGUgIT09IDEgJiYgKGV2ZW50VGFyZ2V0W2dldEF0dHJpYnV0ZV0oZGF0YVRvZ2dsZSkgfHwgZXZlbnRUYXJnZXRbcGFyZW50Tm9kZV1bZ2V0QXR0cmlidXRlXShkYXRhVG9nZ2xlKSkgKTtcblx0ICAgICAgICBpZiAoIGV2ZW50VGFyZ2V0ID09PSBlbGVtZW50IHx8IGV2ZW50VGFyZ2V0ID09PSBwYXJlbnQgfHwgZXZlbnRUYXJnZXRbcGFyZW50Tm9kZV0gPT09IGVsZW1lbnQgKSB7XG5cdCAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIGNvbW1lbnQgdGhpcyBsaW5lIHRvIHN0b3AgcHJldmVudGluZyBuYXZpZ2F0aW9uIHdoZW4gY2xpY2sgdGFyZ2V0IGlzIGEgbGluayBcblx0ICAgICAgICAgIHJlbGF0ZWRUYXJnZXQgPSBlbGVtZW50O1xuXHQgICAgICAgICAgc2VsZi50b2dnbGUoKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKCBpc09wZW4gKSB7XG5cdCAgICAgICAgICBpZiAoIChldmVudFRhcmdldCA9PT0gbWVudSB8fCBjaGlsZHJlbiAmJiBjaGlsZHJlbltpbmRleE9mXShldmVudFRhcmdldCkgPiAtMSkgJiYgKCBzZWxmLnBlcnNpc3QgfHwgaGFzRGF0YSApICkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9IGVsc2UgeyByZWxhdGVkVGFyZ2V0ID0gbnVsbDsgaGlkZSgpOyB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgICgvXFwjJC8udGVzdChldmVudFRhcmdldC5ocmVmKSB8fCBldmVudFRhcmdldFtwYXJlbnROb2RlXSAmJiAvXFwjJC8udGVzdChldmVudFRhcmdldFtwYXJlbnROb2RlXS5ocmVmKSkgJiYgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBzaG91bGQgYmUgaGVyZSB0byBwcmV2ZW50IGp1bXBzXG5cdCAgICAgIH0sXG5cdCAgICAgIC8vIHByaXZhdGUgbWV0aG9kc1xuXHQgICAgICBzaG93ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChwYXJlbnQsIHNob3dFdmVudCwgY29tcG9uZW50LCByZWxhdGVkVGFyZ2V0KTtcblx0ICAgICAgICBhZGRDbGFzcyhwYXJlbnQsb3Blbik7XG5cdCAgICAgICAgbWVudVtzZXRBdHRyaWJ1dGVdKGFyaWFFeHBhbmRlZCx0cnVlKTtcblx0ICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKHBhcmVudCwgc2hvd25FdmVudCwgY29tcG9uZW50LCByZWxhdGVkVGFyZ2V0KTtcblx0ICAgICAgICBvbihkb2N1bWVudCwga2V5ZG93bkV2ZW50LCBrZXlIYW5kbGVyKTtcblx0ICAgICAgICBpc09wZW4gPSB0cnVlO1xuXHQgICAgICB9LFxuXHQgICAgICBoaWRlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChwYXJlbnQsIGhpZGVFdmVudCwgY29tcG9uZW50LCByZWxhdGVkVGFyZ2V0KTtcblx0ICAgICAgICByZW1vdmVDbGFzcyhwYXJlbnQsb3Blbik7XG5cdCAgICAgICAgbWVudVtzZXRBdHRyaWJ1dGVdKGFyaWFFeHBhbmRlZCxmYWxzZSk7XG5cdCAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChwYXJlbnQsIGhpZGRlbkV2ZW50LCBjb21wb25lbnQsIHJlbGF0ZWRUYXJnZXQpO1xuXHQgICAgICAgIG9mZihkb2N1bWVudCwga2V5ZG93bkV2ZW50LCBrZXlIYW5kbGVyKTtcblx0ICAgICAgICBpc09wZW4gPSBmYWxzZTtcblx0ICAgICAgfTtcblx0ICBcblx0ICAgIC8vIHB1YmxpYyBtZXRob2RzXG5cdCAgICB0aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAoaGFzQ2xhc3MocGFyZW50LG9wZW4pICYmIGlzT3BlbikgeyBoaWRlKCk7IH0gXG5cdCAgICAgIGVsc2UgeyBzaG93KCk7IH1cblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICBpZiAoICEoc3RyaW5nRHJvcGRvd24gaW4gZWxlbWVudCkgKSB7IC8vIHByZXZlbnQgYWRkaW5nIGV2ZW50IGhhbmRsZXJzIHR3aWNlXG5cdCAgICAgIG1lbnVbc2V0QXR0cmlidXRlXSgndGFiaW5kZXgnLCAnMCcpOyAvLyBGaXggb25ibHVyIG9uIENocm9tZSB8IFNhZmFyaVxuXHQgICAgICBvbihkb2N1bWVudCwgY2xpY2tFdmVudCwgY2xpY2tIYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGVsZW1lbnRbc3RyaW5nRHJvcGRvd25dID0gdGhpcztcblx0ICB9O1xuXHQgIFxuXHQgIC8vIERST1BET1dOIERBVEEgQVBJXG5cdCAgLy8gPT09PT09PT09PT09PT09PT1cblx0ICBpbml0aWFsaXplRGF0YUFQSSggc3RyaW5nRHJvcGRvd24sIERyb3Bkb3duLCBkYXRhVG9nZ2xlICk7XG5cdCAgXG5cdCAgXG5cdCAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgTW9kYWxcblx0ICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0ICAgIFxuXHQgIC8vIE1PREFMIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT1cblx0ICB2YXIgTW9kYWwgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7IC8vIGVsZW1lbnQgY2FuIGJlIHRoZSBtb2RhbC90cmlnZ2VyaW5nIGJ1dHRvblxuXHQgIFxuXHQgICAgLy8gdGhlIG1vZGFsIChib3RoIEphdmFTY3JpcHQgLyBEQVRBIEFQSSBpbml0KSAvIHRyaWdnZXJpbmcgYnV0dG9uIGVsZW1lbnQgKERBVEEgQVBJKVxuXHQgICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcblx0ICBcblx0ICAgIC8vIGRldGVybWluZSBtb2RhbCwgdHJpZ2dlcmluZyBlbGVtZW50IFxuXHQgICAgdmFyIGJ0bkNoZWNrID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpfHxlbGVtZW50W2dldEF0dHJpYnV0ZV0oJ2hyZWYnKSxcblx0ICAgICAgY2hlY2tNb2RhbCA9IHF1ZXJ5RWxlbWVudCggYnRuQ2hlY2sgKSxcblx0ICAgICAgbW9kYWwgPSBoYXNDbGFzcyhlbGVtZW50LCdtb2RhbCcpID8gZWxlbWVudCA6IGNoZWNrTW9kYWwsXG5cdCAgXG5cdCAgICAgIC8vIHN0cmluZ3Ncblx0ICAgICAgY29tcG9uZW50ID0gJ21vZGFsJyxcblx0ICAgICAgc3RhdGljU3RyaW5nID0gJ3N0YXRpYycsXG5cdCAgICAgIHBhZGRpbmdMZWZ0ID0gJ3BhZGRpbmdMZWZ0Jyxcblx0ICAgICAgcGFkZGluZ1JpZ2h0ID0gJ3BhZGRpbmdSaWdodCcsXG5cdCAgICAgIG1vZGFsQmFja2Ryb3BTdHJpbmcgPSAnbW9kYWwtYmFja2Ryb3AnO1xuXHQgIFxuXHQgICAgaWYgKCBoYXNDbGFzcyhlbGVtZW50LCdtb2RhbCcpICkgeyBlbGVtZW50ID0gbnVsbDsgfSAvLyBtb2RhbCBpcyBub3cgaW5kZXBlbmRlbnQgb2YgaXQncyB0cmlnZ2VyaW5nIGVsZW1lbnRcblx0ICBcblx0ICAgIGlmICggIW1vZGFsICkgeyByZXR1cm47IH0gLy8gaW52YWxpZGF0ZVxuXHQgIFxuXHQgICAgLy8gc2V0IG9wdGlvbnNcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgIFxuXHQgICAgdGhpc1trZXlib2FyZF0gPSBvcHRpb25zW2tleWJvYXJkXSA9PT0gZmFsc2UgfHwgbW9kYWxbZ2V0QXR0cmlidXRlXShkYXRhS2V5Ym9hcmQpID09PSAnZmFsc2UnID8gZmFsc2UgOiB0cnVlO1xuXHQgICAgdGhpc1tiYWNrZHJvcF0gPSBvcHRpb25zW2JhY2tkcm9wXSA9PT0gc3RhdGljU3RyaW5nIHx8IG1vZGFsW2dldEF0dHJpYnV0ZV0oZGF0YWJhY2tkcm9wKSA9PT0gc3RhdGljU3RyaW5nID8gc3RhdGljU3RyaW5nIDogdHJ1ZTtcblx0ICAgIHRoaXNbYmFja2Ryb3BdID0gb3B0aW9uc1tiYWNrZHJvcF0gPT09IGZhbHNlIHx8IG1vZGFsW2dldEF0dHJpYnV0ZV0oZGF0YWJhY2tkcm9wKSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdGhpc1tiYWNrZHJvcF07XG5cdCAgICB0aGlzW2NvbnRlbnRdICA9IG9wdGlvbnNbY29udGVudF07IC8vIEphdmFTY3JpcHQgb25seVxuXHQgIFxuXHQgICAgLy8gYmluZCwgY29uc3RhbnRzLCBldmVudCB0YXJnZXRzIGFuZCBvdGhlciB2YXJzXG5cdCAgICB2YXIgc2VsZiA9IHRoaXMsIG9wZW4gPSB0aGlzLm9wZW4gPSBmYWxzZSwgcmVsYXRlZFRhcmdldCA9IG51bGwsXG5cdCAgICAgIGJvZHlJc092ZXJmbG93aW5nLCBtb2RhbElzT3ZlcmZsb3dpbmcsIHNjcm9sbGJhcldpZHRoLCBvdmVybGF5LFxuXHQgIFxuXHQgICAgICAvLyBhbHNvIGZpbmQgZml4ZWQtdG9wIC8gZml4ZWQtYm90dG9tIGl0ZW1zXG5cdCAgICAgIGZpeGVkSXRlbXMgPSBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGRvYywnbmF2YmFyLWZpeGVkLXRvcCcpLmNvbmNhdChnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGRvYywnbmF2YmFyLWZpeGVkLWJvdHRvbScpKSxcblx0ICBcblx0ICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG5cdCAgICAgIGdldFdpbmRvd1dpZHRoID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWxSZWN0ID0gZG9jW2dldEJvdW5kaW5nQ2xpZW50UmVjdF0oKTtcblx0ICAgICAgICByZXR1cm4gZ2xvYmFsT2JqZWN0W2lubmVyV2lkdGhdIHx8IChodG1sUmVjdFtyaWdodF0gLSBNYXRoLmFicyhodG1sUmVjdFtsZWZ0XSkpO1xuXHQgICAgICB9LFxuXHQgICAgICBzZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGJvZHlTdHlsZSA9IGJvZHkuY3VycmVudFN0eWxlIHx8IGdsb2JhbE9iamVjdC5nZXRDb21wdXRlZFN0eWxlKGJvZHkpLCBcblx0ICAgICAgICAgICAgYm9keVBhZCA9IHBhcnNlSW50KChib2R5U3R5bGVbcGFkZGluZ1JpZ2h0XSksIDEwKSwgaXRlbVBhZDtcblx0ICAgICAgICBpZiAoYm9keUlzT3ZlcmZsb3dpbmcpIHsgXG5cdCAgICAgICAgICBib2R5W3N0eWxlXVtwYWRkaW5nUmlnaHRdID0gKGJvZHlQYWQgKyBzY3JvbGxiYXJXaWR0aCkgKyAncHgnO1xuXHQgICAgICAgICAgaWYgKGZpeGVkSXRlbXNbbGVuZ3RoXSl7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZml4ZWRJdGVtc1tsZW5ndGhdOyBpKyspIHtcblx0ICAgICAgICAgICAgICBpdGVtUGFkID0gZ2xvYmFsT2JqZWN0LmdldENvbXB1dGVkU3R5bGUoZml4ZWRJdGVtc1tpXSlbcGFkZGluZ1JpZ2h0XTtcblx0ICAgICAgICAgICAgICBmaXhlZEl0ZW1zW2ldW3N0eWxlXVtwYWRkaW5nUmlnaHRdID0gKCBwYXJzZUludChpdGVtUGFkKSArIHNjcm9sbGJhcldpZHRoKSArICdweCc7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIHJlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGJvZHlbc3R5bGVdW3BhZGRpbmdSaWdodF0gPSAnJztcblx0ICAgICAgICBpZiAoZml4ZWRJdGVtc1tsZW5ndGhdKXtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZml4ZWRJdGVtc1tsZW5ndGhdOyBpKyspIHtcblx0ICAgICAgICAgICAgZml4ZWRJdGVtc1tpXVtzdHlsZV1bcGFkZGluZ1JpZ2h0XSA9ICcnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgbWVhc3VyZVNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHsgLy8gdGh4IHdhbHNoXG5cdCAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBzY3JvbGxCYXJXaWR0aDtcblx0ICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gY29tcG9uZW50Kyctc2Nyb2xsYmFyLW1lYXN1cmUnOyAvLyB0aGlzIGlzIGhlcmUgdG8gc3RheVxuXHQgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcblx0ICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdltvZmZzZXRXaWR0aF0gLSBzY3JvbGxEaXZbY2xpZW50V2lkdGhdO1xuXHQgICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblx0ICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG5cdCAgICAgIH0sXG5cdCAgICAgIGNoZWNrU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGJvZHlJc092ZXJmbG93aW5nID0gYm9keVtjbGllbnRXaWR0aF0gPCBnZXRXaW5kb3dXaWR0aCgpO1xuXHQgICAgICAgIG1vZGFsSXNPdmVyZmxvd2luZyA9IG1vZGFsW3Njcm9sbEhlaWdodF0gPiBkb2NbY2xpZW50SGVpZ2h0XTtcblx0ICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IG1lYXN1cmVTY3JvbGxiYXIoKTtcblx0ICAgICAgfSxcblx0ICAgICAgYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG1vZGFsW3N0eWxlXVtwYWRkaW5nTGVmdF0gPSAhYm9keUlzT3ZlcmZsb3dpbmcgJiYgbW9kYWxJc092ZXJmbG93aW5nID8gc2Nyb2xsYmFyV2lkdGggKyAncHgnIDogJyc7XG5cdCAgICAgICAgbW9kYWxbc3R5bGVdW3BhZGRpbmdSaWdodF0gPSBib2R5SXNPdmVyZmxvd2luZyAmJiAhbW9kYWxJc092ZXJmbG93aW5nID8gc2Nyb2xsYmFyV2lkdGggKyAncHgnIDogJyc7XG5cdCAgICAgIH0sXG5cdCAgICAgIHJlc2V0QWRqdXN0bWVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbW9kYWxbc3R5bGVdW3BhZGRpbmdMZWZ0XSA9ICcnO1xuXHQgICAgICAgIG1vZGFsW3N0eWxlXVtwYWRkaW5nUmlnaHRdID0gJyc7XG5cdCAgICAgIH0sXG5cdCAgICAgIGNyZWF0ZU92ZXJsYXkgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgbmV3T3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgICAgIG92ZXJsYXkgPSBxdWVyeUVsZW1lbnQoJy4nK21vZGFsQmFja2Ryb3BTdHJpbmcpO1xuXHQgIFxuXHQgICAgICAgIGlmICggb3ZlcmxheSA9PT0gbnVsbCApIHtcblx0ICAgICAgICAgIG5ld092ZXJsYXlbc2V0QXR0cmlidXRlXSgnY2xhc3MnLG1vZGFsQmFja2Ryb3BTdHJpbmcrJyBmYWRlJyk7XG5cdCAgICAgICAgICBvdmVybGF5ID0gbmV3T3ZlcmxheTtcblx0ICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICByZW1vdmVPdmVybGF5ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgb3ZlcmxheSA9IHF1ZXJ5RWxlbWVudCgnLicrbW9kYWxCYWNrZHJvcFN0cmluZyk7IFxuXHQgICAgICAgIGlmICggb3ZlcmxheSAmJiBvdmVybGF5ICE9PSBudWxsICYmIHR5cGVvZiBvdmVybGF5ID09PSAnb2JqZWN0JyApIHtcblx0ICAgICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IG92ZXJsYXkgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAga2V5ZG93bkhhbmRsZXJUb2dnbGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBpZiAoIWhhc0NsYXNzKG1vZGFsLGluQ2xhc3MpKSB7XG5cdCAgICAgICAgICBvbihkb2N1bWVudCwga2V5ZG93bkV2ZW50LCBrZXlIYW5kbGVyKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb2ZmKGRvY3VtZW50LCBrZXlkb3duRXZlbnQsIGtleUhhbmRsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgcmVzaXplSGFuZGxlclRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGlmICghaGFzQ2xhc3MobW9kYWwsaW5DbGFzcykpIHtcblx0ICAgICAgICAgIG9uKGdsb2JhbE9iamVjdCwgcmVzaXplRXZlbnQsIHNlbGYudXBkYXRlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb2ZmKGdsb2JhbE9iamVjdCwgcmVzaXplRXZlbnQsIHNlbGYudXBkYXRlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIGRpc21pc3NIYW5kbGVyVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKCFoYXNDbGFzcyhtb2RhbCxpbkNsYXNzKSkge1xuXHQgICAgICAgICAgb24obW9kYWwsIGNsaWNrRXZlbnQsIGRpc21pc3NIYW5kbGVyKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb2ZmKG1vZGFsLCBjbGlja0V2ZW50LCBkaXNtaXNzSGFuZGxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICAvLyBoYW5kbGVyc1xuXHQgICAgICBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgdmFyIGNsaWNrVGFyZ2V0ID0gZVt0YXJnZXRdOyBcblx0ICAgICAgICBjbGlja1RhcmdldCA9IGNsaWNrVGFyZ2V0W2hhc0F0dHJpYnV0ZV0oZGF0YVRhcmdldCkgfHwgY2xpY2tUYXJnZXRbaGFzQXR0cmlidXRlXSgnaHJlZicpID8gY2xpY2tUYXJnZXQgOiBjbGlja1RhcmdldFtwYXJlbnROb2RlXTtcblx0ICAgICAgICBpZiAoICFvcGVuICYmIGNsaWNrVGFyZ2V0ID09PSBlbGVtZW50ICYmICFoYXNDbGFzcyhtb2RhbCxpbkNsYXNzKSApIHtcblx0ICAgICAgICAgIG1vZGFsLm1vZGFsVHJpZ2dlciA9IGVsZW1lbnQ7XG5cdCAgICAgICAgICByZWxhdGVkVGFyZ2V0ID0gZWxlbWVudDtcblx0ICAgICAgICAgIHNlbGYuc2hvdygpO1xuXHQgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAga2V5SGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0ICAgICAgICB2YXIga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7IC8vIGtleUNvZGUgZm9yIElFOFxuXHQgICAgICAgIGlmIChzZWxmW2tleWJvYXJkXSAmJiBrZXkgPT0gMjcgJiYgb3Blbikge1xuXHQgICAgICAgICAgc2VsZi5oaWRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBkaXNtaXNzSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0ICAgICAgICB2YXIgY2xpY2tUYXJnZXQgPSBlW3RhcmdldF07XG5cdCAgICAgICAgaWYgKCBvcGVuICYmIChjbGlja1RhcmdldFtwYXJlbnROb2RlXVtnZXRBdHRyaWJ1dGVdKGRhdGFEaXNtaXNzKSA9PT0gY29tcG9uZW50IFxuXHQgICAgICAgICAgICB8fCBjbGlja1RhcmdldFtnZXRBdHRyaWJ1dGVdKGRhdGFEaXNtaXNzKSA9PT0gY29tcG9uZW50XG5cdCAgICAgICAgICAgIHx8IChjbGlja1RhcmdldCA9PT0gbW9kYWwgJiYgc2VsZltiYWNrZHJvcF0gIT09IHN0YXRpY1N0cmluZykgKSApIHtcblx0ICAgICAgICAgIHNlbGYuaGlkZSgpOyByZWxhdGVkVGFyZ2V0ID0gbnVsbDtcblx0ICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgXG5cdCAgICAvLyBwdWJsaWMgbWV0aG9kc1xuXHQgICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKG9wZW4gJiYgaGFzQ2xhc3MobW9kYWwsaW5DbGFzcykpIHt0aGlzLmhpZGUoKTt9IGVsc2Uge3RoaXMuc2hvdygpO31cblx0ICAgIH07XG5cdCAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChtb2RhbCwgc2hvd0V2ZW50LCBjb21wb25lbnQsIHJlbGF0ZWRUYXJnZXQpO1xuXHQgIFxuXHQgICAgICAvLyB3ZSBlbGVnYW50bHkgaGlkZSBhbnkgb3BlbmVkIG1vZGFsXG5cdCAgICAgIHZhciBjdXJyZW50T3BlbiA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZG9jdW1lbnQsY29tcG9uZW50KycgaW4nKVswXTtcblx0ICAgICAgY3VycmVudE9wZW4gJiYgY3VycmVudE9wZW4gIT09IG1vZGFsICYmIGN1cnJlbnRPcGVuLm1vZGFsVHJpZ2dlcltzdHJpbmdNb2RhbF0uaGlkZSgpOyBcblx0ICBcblx0ICAgICAgaWYgKCB0aGlzW2JhY2tkcm9wXSApIHtcblx0ICAgICAgICBjcmVhdGVPdmVybGF5KCk7XG5cdCAgICAgIH1cblx0ICBcblx0ICAgICAgaWYgKCBvdmVybGF5ICYmICFoYXNDbGFzcyhvdmVybGF5LGluQ2xhc3MpKSB7XG5cdCAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7IGFkZENsYXNzKG92ZXJsYXksaW5DbGFzcyk7IH0sMCk7XG5cdCAgICAgIH1cblx0ICBcblx0ICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgbW9kYWxbc3R5bGVdLmRpc3BsYXkgPSAnYmxvY2snO1xuXHQgIFxuXHQgICAgICAgIGNoZWNrU2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgc2V0U2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgYWRqdXN0RGlhbG9nKCk7XG5cdCAgXG5cdCAgICAgICAgcmVzaXplSGFuZGxlclRvZ2dsZSgpO1xuXHQgICAgICAgIGRpc21pc3NIYW5kbGVyVG9nZ2xlKCk7XG5cdCAgICAgICAga2V5ZG93bkhhbmRsZXJUb2dnbGUoKTtcblx0ICBcblx0ICAgICAgICBhZGRDbGFzcyhib2R5LGNvbXBvbmVudCsnLW9wZW4nKTtcblx0ICAgICAgICBhZGRDbGFzcyhtb2RhbCxpbkNsYXNzKTtcblx0ICAgICAgICBtb2RhbFtzZXRBdHRyaWJ1dGVdKGFyaWFIaWRkZW4sIGZhbHNlKTtcblx0ICBcblx0ICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChtb2RhbCwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBvcGVuID0gc2VsZi5vcGVuID0gdHJ1ZTtcblx0ICAgICAgICAgIHNldEZvY3VzKG1vZGFsKTtcblx0ICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwobW9kYWwsIHNob3duRXZlbnQsIGNvbXBvbmVudCwgcmVsYXRlZFRhcmdldCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0sIHN1cHBvcnRUcmFuc2l0aW9ucyA/IDE1MCA6IDApO1xuXHQgICAgfTtcblx0ICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG1vZGFsLCBoaWRlRXZlbnQsIGNvbXBvbmVudCk7XG5cdCAgICAgIG92ZXJsYXkgPSBxdWVyeUVsZW1lbnQoJy4nK21vZGFsQmFja2Ryb3BTdHJpbmcpO1xuXHQgIFxuXHQgICAgICByZW1vdmVDbGFzcyhtb2RhbCxpbkNsYXNzKTtcblx0ICAgICAgbW9kYWxbc2V0QXR0cmlidXRlXShhcmlhSGlkZGVuLCB0cnVlKTtcblx0ICBcblx0ICAgICAgISFvdmVybGF5ICYmIHJlbW92ZUNsYXNzKG92ZXJsYXksaW5DbGFzcyk7XG5cdCAgXG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChtb2RhbCwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXNpemVIYW5kbGVyVG9nZ2xlKCk7XG5cdCAgICAgICAgICBkaXNtaXNzSGFuZGxlclRvZ2dsZSgpO1xuXHQgICAgICAgICAga2V5ZG93bkhhbmRsZXJUb2dnbGUoKTtcblx0ICBcblx0ICAgICAgICAgIG1vZGFsW3N0eWxlXS5kaXNwbGF5ID0gJyc7XG5cdCAgXG5cdCAgICAgICAgICBvcGVuID0gc2VsZi5vcGVuID0gZmFsc2U7XG5cdCAgICAgICAgICBlbGVtZW50ICYmIChzZXRGb2N1cyhlbGVtZW50KSk7XG5cdCAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG1vZGFsLCBoaWRkZW5FdmVudCwgY29tcG9uZW50KTtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgaWYgKCFnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGRvY3VtZW50LGNvbXBvbmVudCsnICcraW5DbGFzcylbMF0pIHtcblx0ICAgICAgICAgICAgICByZXNldEFkanVzdG1lbnRzKCk7XG5cdCAgICAgICAgICAgICAgcmVzZXRTY3JvbGxiYXIoKTtcblx0ICAgICAgICAgICAgICByZW1vdmVDbGFzcyhib2R5LGNvbXBvbmVudCsnLW9wZW4nKTtcblx0ICAgICAgICAgICAgICByZW1vdmVPdmVybGF5KCk7IFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9LCAxMDApO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9LCBzdXBwb3J0VHJhbnNpdGlvbnMgPyAxNTAgOiAwKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLnNldENvbnRlbnQgPSBmdW5jdGlvbiggY29udGVudCApIHtcblx0ICAgICAgcXVlcnlFbGVtZW50KCcuJytjb21wb25lbnQrJy1jb250ZW50Jyxtb2RhbCkuaW5uZXJIVE1MID0gY29udGVudDtcblx0ICAgIH07XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAob3Blbikge1xuXHQgICAgICAgIGNoZWNrU2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgc2V0U2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgYWRqdXN0RGlhbG9nKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyBvdmVyIGFuZCBvdmVyXG5cdCAgICAvLyBtb2RhbCBpcyBpbmRlcGVuZGVudCBvZiBhIHRyaWdnZXJpbmcgZWxlbWVudCBcblx0ICAgIGlmICggISFlbGVtZW50ICYmICEoc3RyaW5nTW9kYWwgaW4gZWxlbWVudCkgKSB7XG5cdCAgICAgIG9uKGVsZW1lbnQsIGNsaWNrRXZlbnQsIGNsaWNrSGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAoICEhdGhpc1tjb250ZW50XSApIHsgdGhpcy5zZXRDb250ZW50KCB0aGlzW2NvbnRlbnRdICk7IH1cblx0ICAgICEhZWxlbWVudCAmJiAoZWxlbWVudFtzdHJpbmdNb2RhbF0gPSB0aGlzKTtcblx0ICB9O1xuXHQgIFxuXHQgIC8vIERBVEEgQVBJXG5cdCAgaW5pdGlhbGl6ZURhdGFBUEkoc3RyaW5nTW9kYWwsIE1vZGFsLCBkYXRhVG9nZ2xlKTtcblx0ICBcblx0ICBcblx0ICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBQb3BvdmVyXG5cdCAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdCAgXG5cdCAgLy8gUE9QT1ZFUiBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT09PT09XG5cdCAgdmFyIFBvcG92ZXIgPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucyApIHtcblx0ICBcblx0ICAgIC8vIGluaXRpYWxpemF0aW9uIGVsZW1lbnRcblx0ICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgXG5cdCAgICAvLyBEQVRBIEFQSVxuXHQgICAgdmFyIHRyaWdnZXJEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUcmlnZ2VyKSwgLy8gY2xpY2sgLyBob3ZlciAvIGZvY3VzXG5cdCAgICAgICAgYW5pbWF0aW9uRGF0YSA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhQW5pbWF0aW9uKSwgLy8gdHJ1ZSAvIGZhbHNlXG5cdCAgICAgICAgcGxhY2VtZW50RGF0YSA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhUGxhY2VtZW50KSxcblx0ICAgICAgICBkaXNtaXNzaWJsZURhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YURpc21pc3NpYmxlKSxcblx0ICAgICAgICBkZWxheURhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YURlbGF5KSxcblx0ICAgICAgICBjb250YWluZXJEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFDb250YWluZXIpLFxuXHQgIFxuXHQgICAgICAgIC8vIGludGVybmFsIHN0cmluZ3Ncblx0ICAgICAgICBjb21wb25lbnQgPSAncG9wb3ZlcicsXG5cdCAgICAgICAgdGVtcGxhdGUgPSAndGVtcGxhdGUnLFxuXHQgICAgICAgIHRyaWdnZXIgPSAndHJpZ2dlcicsXG5cdCAgICAgICAgY2xhc3NTdHJpbmcgPSAnY2xhc3MnLFxuXHQgICAgICAgIGRpdiA9ICdkaXYnLFxuXHQgICAgICAgIGZhZGUgPSAnZmFkZScsXG5cdCAgICAgICAgdGl0bGUgPSAndGl0bGUnLFxuXHQgICAgICAgIGNvbnRlbnQgPSAnY29udGVudCcsXG5cdCAgICAgICAgZGF0YVRpdGxlID0gJ2RhdGEtdGl0bGUnLFxuXHQgICAgICAgIGRhdGFDb250ZW50ID0gJ2RhdGEtY29udGVudCcsXG5cdCAgICAgICAgZGlzbWlzc2libGUgPSAnZGlzbWlzc2libGUnLFxuXHQgICAgICAgIGNsb3NlQnRuID0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIj7DlzwvYnV0dG9uPicsXG5cdCAgICAgICAgXG5cdCAgICAgICAgLy8gbWF5YmUgdGhlIGVsZW1lbnQgaXMgaW5zaWRlIGEgbW9kYWxcblx0ICAgICAgICBtb2RhbCA9IGdldENsb3Nlc3QoZWxlbWVudCwnLm1vZGFsJyksXG5cdCAgICAgICAgXG5cdCAgICAgICAgLy8gbWF5YmUgdGhlIGVsZW1lbnQgaXMgaW5zaWRlIGEgZml4ZWQgbmF2YmFyXG5cdCAgICAgICAgbmF2YmFyRml4ZWRUb3AgPSBnZXRDbG9zZXN0KGVsZW1lbnQsZml4ZWRUb3ApLFxuXHQgICAgICAgIG5hdmJhckZpeGVkQm90dG9tID0gZ2V0Q2xvc2VzdChlbGVtZW50LGZpeGVkQm90dG9tKTtcblx0ICBcblx0ICAgIC8vIHNldCBvcHRpb25zXG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgIHRoaXNbdGVtcGxhdGVdID0gb3B0aW9uc1t0ZW1wbGF0ZV0gPyBvcHRpb25zW3RlbXBsYXRlXSA6IG51bGw7IC8vIEphdmFTY3JpcHQgb25seVxuXHQgICAgdGhpc1t0cmlnZ2VyXSA9IG9wdGlvbnNbdHJpZ2dlcl0gPyBvcHRpb25zW3RyaWdnZXJdIDogdHJpZ2dlckRhdGEgfHwgaG92ZXJFdmVudDtcblx0ICAgIHRoaXNbYW5pbWF0aW9uXSA9IG9wdGlvbnNbYW5pbWF0aW9uXSAmJiBvcHRpb25zW2FuaW1hdGlvbl0gIT09IGZhZGUgPyBvcHRpb25zW2FuaW1hdGlvbl0gOiBhbmltYXRpb25EYXRhIHx8IGZhZGU7XG5cdCAgICB0aGlzW3BsYWNlbWVudF0gPSBvcHRpb25zW3BsYWNlbWVudF0gPyBvcHRpb25zW3BsYWNlbWVudF0gOiBwbGFjZW1lbnREYXRhIHx8IHRvcDtcblx0ICAgIHRoaXNbZGVsYXldID0gcGFyc2VJbnQob3B0aW9uc1tkZWxheV0gfHwgZGVsYXlEYXRhKSB8fCAyMDA7XG5cdCAgICB0aGlzW2Rpc21pc3NpYmxlXSA9IG9wdGlvbnNbZGlzbWlzc2libGVdIHx8IGRpc21pc3NpYmxlRGF0YSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuXHQgICAgdGhpc1tjb250YWluZXJdID0gcXVlcnlFbGVtZW50KG9wdGlvbnNbY29udGFpbmVyXSkgPyBxdWVyeUVsZW1lbnQob3B0aW9uc1tjb250YWluZXJdKSBcblx0ICAgICAgICAgICAgICAgICAgICA6IHF1ZXJ5RWxlbWVudChjb250YWluZXJEYXRhKSA/IHF1ZXJ5RWxlbWVudChjb250YWluZXJEYXRhKSBcblx0ICAgICAgICAgICAgICAgICAgICA6IG5hdmJhckZpeGVkVG9wID8gbmF2YmFyRml4ZWRUb3Bcblx0ICAgICAgICAgICAgICAgICAgICA6IG5hdmJhckZpeGVkQm90dG9tID8gbmF2YmFyRml4ZWRCb3R0b21cblx0ICAgICAgICAgICAgICAgICAgICA6IG1vZGFsID8gbW9kYWwgOiBib2R5O1xuXHQgIFxuXHQgICAgLy8gYmluZCwgY29udGVudFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzLCBcblx0ICAgICAgdGl0bGVTdHJpbmcgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YVRpdGxlKSB8fCBudWxsLFxuXHQgICAgICBjb250ZW50U3RyaW5nID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFDb250ZW50KSB8fCBudWxsO1xuXHQgIFxuXHQgICAgaWYgKCAhY29udGVudFN0cmluZyAmJiAhdGhpc1t0ZW1wbGF0ZV0gKSByZXR1cm47IC8vIGludmFsaWRhdGVcblx0ICBcblx0ICAgIC8vIGNvbnN0YW50cywgdmFyc1xuXHQgICAgdmFyIHBvcG92ZXIgPSBudWxsLCB0aW1lciA9IDAsIHBsYWNlbWVudFNldHRpbmcgPSB0aGlzW3BsYWNlbWVudF0sXG5cdCAgICAgIFxuXHQgICAgICAvLyBoYW5kbGVyc1xuXHQgICAgICBkaXNtaXNzaWJsZUhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgaWYgKHBvcG92ZXIgIT09IG51bGwgJiYgZVt0YXJnZXRdID09PSBxdWVyeUVsZW1lbnQoJy5jbG9zZScscG9wb3ZlcikpIHtcblx0ICAgICAgICAgIHNlbGYuaGlkZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICBcblx0ICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG5cdCAgICAgIHJlbW92ZVBvcG92ZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBzZWxmW2NvbnRhaW5lcl0ucmVtb3ZlQ2hpbGQocG9wb3Zlcik7XG5cdCAgICAgICAgdGltZXIgPSBudWxsOyBwb3BvdmVyID0gbnVsbDsgXG5cdCAgICAgIH0sXG5cdCAgICAgIGNyZWF0ZVBvcG92ZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB0aXRsZVN0cmluZyA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhVGl0bGUpOyAvLyBjaGVjayBjb250ZW50IGFnYWluXG5cdCAgICAgICAgY29udGVudFN0cmluZyA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhQ29udGVudCk7XG5cdCAgXG5cdCAgICAgICAgcG9wb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2KTtcblx0ICBcblx0ICAgICAgICBpZiAoIGNvbnRlbnRTdHJpbmcgIT09IG51bGwgJiYgc2VsZlt0ZW1wbGF0ZV0gPT09IG51bGwgKSB7IC8vY3JlYXRlIHRoZSBwb3BvdmVyIGZyb20gZGF0YSBhdHRyaWJ1dGVzXG5cdCAgXG5cdCAgICAgICAgICBwb3BvdmVyW3NldEF0dHJpYnV0ZV0oJ3JvbGUnLCd0b29sdGlwJyk7XG5cdCAgXG5cdCAgICAgICAgICBpZiAodGl0bGVTdHJpbmcgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdmFyIHBvcG92ZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG5cdCAgICAgICAgICAgIHBvcG92ZXJUaXRsZVtzZXRBdHRyaWJ1dGVdKGNsYXNzU3RyaW5nLGNvbXBvbmVudCsnLXRpdGxlJyk7XG5cdCAgXG5cdCAgICAgICAgICAgIHBvcG92ZXJUaXRsZS5pbm5lckhUTUwgPSBzZWxmW2Rpc21pc3NpYmxlXSA/IHRpdGxlU3RyaW5nICsgY2xvc2VCdG4gOiB0aXRsZVN0cmluZztcblx0ICAgICAgICAgICAgcG9wb3Zlci5hcHBlbmRDaGlsZChwb3BvdmVyVGl0bGUpO1xuXHQgICAgICAgICAgfVxuXHQgIFxuXHQgICAgICAgICAgdmFyIHBvcG92ZXJBcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2KSwgcG9wb3ZlckNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGRpdik7XG5cdCAgICAgICAgICBwb3BvdmVyQXJyb3dbc2V0QXR0cmlidXRlXShjbGFzc1N0cmluZywnYXJyb3cnKTsgcG9wb3ZlckNvbnRlbnRbc2V0QXR0cmlidXRlXShjbGFzc1N0cmluZyxjb21wb25lbnQrJy1jb250ZW50Jyk7XG5cdCAgICAgICAgICBwb3BvdmVyLmFwcGVuZENoaWxkKHBvcG92ZXJBcnJvdyk7IHBvcG92ZXIuYXBwZW5kQ2hpbGQocG9wb3ZlckNvbnRlbnQpO1xuXHQgIFxuXHQgICAgICAgICAgLy9zZXQgcG9wb3ZlciBjb250ZW50XG5cdCAgICAgICAgICBwb3BvdmVyQ29udGVudC5pbm5lckhUTUwgPSBzZWxmW2Rpc21pc3NpYmxlXSAmJiB0aXRsZVN0cmluZyA9PT0gbnVsbCA/IGNvbnRlbnRTdHJpbmcgKyBjbG9zZUJ0biA6IGNvbnRlbnRTdHJpbmc7XG5cdCAgXG5cdCAgICAgICAgfSBlbHNlIHsgIC8vIG9yIGNyZWF0ZSB0aGUgcG9wb3ZlciBmcm9tIHRlbXBsYXRlXG5cdCAgICAgICAgICB2YXIgcG9wb3ZlclRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkaXYpO1xuXHQgICAgICAgICAgcG9wb3ZlclRlbXBsYXRlLmlubmVySFRNTCA9IHNlbGZbdGVtcGxhdGVdO1xuXHQgICAgICAgICAgcG9wb3Zlci5pbm5lckhUTUwgPSBwb3BvdmVyVGVtcGxhdGUuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG5cdCAgICAgICAgfVxuXHQgIFxuXHQgICAgICAgIC8vYXBwZW5kIHRvIHRoZSBjb250YWluZXJcblx0ICAgICAgICBzZWxmW2NvbnRhaW5lcl0uYXBwZW5kQ2hpbGQocG9wb3Zlcik7XG5cdCAgICAgICAgcG9wb3ZlcltzdHlsZV0uZGlzcGxheSA9ICdibG9jayc7XG5cdCAgICAgICAgcG9wb3ZlcltzZXRBdHRyaWJ1dGVdKGNsYXNzU3RyaW5nLCBjb21wb25lbnQrICcgJyArIHBsYWNlbWVudFNldHRpbmcgKyAnICcgKyBzZWxmW2FuaW1hdGlvbl0pO1xuXHQgICAgICB9LFxuXHQgICAgICBzaG93UG9wb3ZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAhaGFzQ2xhc3MocG9wb3ZlcixpbkNsYXNzKSAmJiAoIGFkZENsYXNzKHBvcG92ZXIsaW5DbGFzcykgKTtcblx0ICAgICAgfSxcblx0ICAgICAgdXBkYXRlUG9wb3ZlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHN0eWxlVGlwKGVsZW1lbnQscG9wb3ZlcixwbGFjZW1lbnRTZXR0aW5nLHNlbGZbY29udGFpbmVyXSk7XG5cdCAgICAgICAgaWYgKCFpc0VsZW1lbnRJblZpZXdwb3J0KHBvcG92ZXIpICkgeyBcblx0ICAgICAgICAgIHBsYWNlbWVudFNldHRpbmcgPSB1cGRhdGVQbGFjZW1lbnQocGxhY2VtZW50U2V0dGluZyk7IFxuXHQgICAgICAgICAgc3R5bGVUaXAoZWxlbWVudCxwb3BvdmVyLHBsYWNlbWVudFNldHRpbmcsc2VsZltjb250YWluZXJdKTsgXG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgIFxuXHQgICAgLy8gcHVibGljIG1ldGhvZHMgLyBoYW5kbGVyc1xuXHQgICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKHBvcG92ZXIgPT09IG51bGwpIHsgc2VsZi5zaG93KCk7IH0gXG5cdCAgICAgIGVsc2UgeyBzZWxmLmhpZGUoKTsgfVxuXHQgICAgfTtcblx0ICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuXHQgICAgICB0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGlmIChwb3BvdmVyID09PSBudWxsKSB7XG5cdCAgICAgICAgICBwbGFjZW1lbnRTZXR0aW5nID0gc2VsZltwbGFjZW1lbnRdOyAvLyB3ZSByZXNldCBwbGFjZW1lbnQgaW4gYWxsIGNhc2VzXG5cdCAgICAgICAgICBjcmVhdGVQb3BvdmVyKCk7XG5cdCAgICAgICAgICB1cGRhdGVQb3BvdmVyKCk7XG5cdCAgICAgICAgICBzaG93UG9wb3ZlcigpO1xuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBzaG93RXZlbnQsIGNvbXBvbmVudCk7XG5cdCAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChwb3BvdmVyLCBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBzaG93bkV2ZW50LCBjb21wb25lbnQpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAyMCApO1xuXHQgICAgfTtcblx0ICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuXHQgICAgICB0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGlmIChwb3BvdmVyICYmIHBvcG92ZXIgIT09IG51bGwgJiYgaGFzQ2xhc3MocG9wb3ZlcixpbkNsYXNzKSkge1xuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBoaWRlRXZlbnQsIGNvbXBvbmVudCk7XG5cdCAgICAgICAgICByZW1vdmVDbGFzcyhwb3BvdmVyLGluQ2xhc3MpO1xuXHQgICAgICAgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQocG9wb3ZlciwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJlbW92ZVBvcG92ZXIoKTtcblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBoaWRkZW5FdmVudCwgY29tcG9uZW50KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgc2VsZltkZWxheV0gKTtcblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICBpZiAoICEoc3RyaW5nUG9wb3ZlciBpbiBlbGVtZW50KSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2Vcblx0ICAgICAgaWYgKHNlbGZbdHJpZ2dlcl0gPT09IGhvdmVyRXZlbnQpIHtcblx0ICAgICAgICBvbiggZWxlbWVudCwgbW91c2VIb3ZlclswXSwgc2VsZi5zaG93ICk7XG5cdCAgICAgICAgaWYgKCFzZWxmW2Rpc21pc3NpYmxlXSkgeyBvbiggZWxlbWVudCwgbW91c2VIb3ZlclsxXSwgc2VsZi5oaWRlICk7IH1cblx0ICAgICAgfSBlbHNlIGlmICgvXihjbGlja3xmb2N1cykkLy50ZXN0KHNlbGZbdHJpZ2dlcl0pKSB7XG5cdCAgICAgICAgb24oIGVsZW1lbnQsIHNlbGZbdHJpZ2dlcl0sIHNlbGYudG9nZ2xlICk7XG5cdCAgICAgICAgaWYgKCFzZWxmW2Rpc21pc3NpYmxlXSkgeyBvbiggZWxlbWVudCwgJ2JsdXInLCBzZWxmLmhpZGUgKTsgfVxuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAoc2VsZltkaXNtaXNzaWJsZV0pIHsgb24oIGRvY3VtZW50LCBjbGlja0V2ZW50LCBkaXNtaXNzaWJsZUhhbmRsZXIgKTsgfVxuXHQgICAgXG5cdCAgICAgIC8vIGRpc21pc3Mgb24gd2luZG93IHJlc2l6ZVxuXHQgICAgICAhaXNJRTggJiYgb24oIGdsb2JhbE9iamVjdCwgcmVzaXplRXZlbnQsIHNlbGYuaGlkZSApO1xuXHQgIFxuXHQgICAgfVxuXHQgICAgZWxlbWVudFtzdHJpbmdQb3BvdmVyXSA9IHNlbGY7XG5cdCAgfTtcblx0ICBcblx0ICAvLyBQT1BPVkVSIERBVEEgQVBJXG5cdCAgLy8gPT09PT09PT09PT09PT09PVxuXHQgIGluaXRpYWxpemVEYXRhQVBJKHN0cmluZ1BvcG92ZXIsIFBvcG92ZXIsIGRhdGFUb2dnbGUpO1xuXHQgIFxuXHQgIFxuXHQgIC8qIE5hdGl2ZSBKYXZhc2NyaXB0IGZvciBCb290c3RyYXAgMyB8IFNjcm9sbFNweVxuXHQgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0ICBcblx0ICAvLyBTQ1JPTExTUFkgREVGSU5JVElPTlxuXHQgIC8vID09PT09PT09PT09PT09PT09PT09XG5cdCAgdmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICBcblx0ICAgIC8vIGluaXRpYWxpemF0aW9uIGVsZW1lbnQsIHRoZSBlbGVtZW50IHdlIHNweSBvblxuXHQgICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTsgXG5cdCAgXG5cdCAgICAvLyBEQVRBIEFQSVxuXHQgICAgdmFyIHRhcmdldERhdGEgPSBxdWVyeUVsZW1lbnQoZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpKTtcblx0ICBcblx0ICAgIC8vIHNldCBvcHRpb25zXG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgIGlmICggIW9wdGlvbnNbdGFyZ2V0XSAmJiAhdGFyZ2V0RGF0YSApIHsgcmV0dXJuOyB9IC8vIGludmFsaWRhdGVcblx0ICBcblx0ICAgIC8vIGV2ZW50IHRhcmdldHMsIGNvbnN0YW50c1xuXHQgICAgdmFyIHNweVRhcmdldCA9IG9wdGlvbnNbdGFyZ2V0XSAmJiBxdWVyeUVsZW1lbnQob3B0aW9uc1t0YXJnZXRdKSB8fCB0YXJnZXREYXRhLFxuXHQgICAgICAgIGxpbmtzID0gc3B5VGFyZ2V0ICYmIHNweVRhcmdldFtnZXRFbGVtZW50c0J5VGFnTmFtZV0oJ0EnKSwgXG5cdCAgICAgICAgaXRlbXMgPSBbXSwgdGFyZ2V0SXRlbXMgPSBbXSwgc2Nyb2xsT2Zmc2V0LFxuXHQgICAgICAgIHNjcm9sbFRhcmdldCA9IGVsZW1lbnRbb2Zmc2V0SGVpZ2h0XSA8IGVsZW1lbnRbc2Nyb2xsSGVpZ2h0XSA/IGVsZW1lbnQgOiBnbG9iYWxPYmplY3QsIC8vIGRldGVybWluZSB3aGljaCBpcyB0aGUgcmVhbCBzY3JvbGxUYXJnZXRcblx0ICAgICAgICBpc1dpbmRvdyA9IHNjcm9sbFRhcmdldCA9PT0gZ2xvYmFsT2JqZWN0OyAgXG5cdCAgXG5cdCAgICAvLyBwb3B1bGF0ZSBpdGVtcyBhbmQgdGFyZ2V0c1xuXHQgICAgZm9yICh2YXIgaT0wLCBpbD1saW5rc1tsZW5ndGhdOyBpPGlsOyBpKyspIHtcblx0ICAgICAgdmFyIGhyZWYgPSBsaW5rc1tpXVtnZXRBdHRyaWJ1dGVdKCdocmVmJyksIFxuXHQgICAgICAgICAgdGFyZ2V0SXRlbSA9IGhyZWYgJiYgdGFyZ2V0c1JlZy50ZXN0KGhyZWYpICYmIHF1ZXJ5RWxlbWVudChocmVmKTtcblx0ICAgICAgaWYgKCAhIXRhcmdldEl0ZW0gKSB7XG5cdCAgICAgICAgaXRlbXMucHVzaChsaW5rc1tpXSk7XG5cdCAgICAgICAgdGFyZ2V0SXRlbXMucHVzaCh0YXJnZXRJdGVtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIFxuXHQgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG5cdCAgICB2YXIgdXBkYXRlSXRlbSA9IGZ1bmN0aW9uKGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IGl0ZW1zW2luZGV4XVtwYXJlbnROb2RlXSwgLy8gaXRlbSdzIHBhcmVudCBMSSBlbGVtZW50XG5cdCAgICAgICAgICB0YXJnZXRJdGVtID0gdGFyZ2V0SXRlbXNbaW5kZXhdLCAvLyB0aGUgbWVudSBpdGVtIHRhcmdldHMgdGhpcyBlbGVtZW50XG5cdCAgICAgICAgICBkcm9wZG93biA9IGdldENsb3Nlc3QocGFyZW50LCcuZHJvcGRvd24nKSxcblx0ICAgICAgICAgIHRhcmdldFJlY3QgPSBpc1dpbmRvdyAmJiB0YXJnZXRJdGVtW2dldEJvdW5kaW5nQ2xpZW50UmVjdF0oKSxcblx0ICBcblx0ICAgICAgICAgIGlzQWN0aXZlID0gaGFzQ2xhc3MocGFyZW50LGFjdGl2ZSkgfHwgZmFsc2UsXG5cdCAgXG5cdCAgICAgICAgICB0b3BFZGdlID0gaXNXaW5kb3cgPyB0YXJnZXRSZWN0W3RvcF0gKyBzY3JvbGxPZmZzZXQgOiB0YXJnZXRJdGVtW29mZnNldFRvcF0gLSAodGFyZ2V0SXRlbXNbaW5kZXgtMV0gPyAwIDogMTApLFxuXHQgICAgICAgICAgYm90dG9tRWRnZSA9IGlzV2luZG93ID8gdGFyZ2V0UmVjdFtib3R0b21dICsgc2Nyb2xsT2Zmc2V0IDogdGFyZ2V0SXRlbXNbaW5kZXgrMV0gPyB0YXJnZXRJdGVtc1tpbmRleCsxXVtvZmZzZXRUb3BdIDogZWxlbWVudFtzY3JvbGxIZWlnaHRdLFxuXHQgIFxuXHQgICAgICAgICAgaW5zaWRlID0gc2Nyb2xsT2Zmc2V0ID49IHRvcEVkZ2UgJiYgYm90dG9tRWRnZSA+IHNjcm9sbE9mZnNldDtcblx0ICBcblx0ICAgICAgICBpZiAoICFpc0FjdGl2ZSAmJiBpbnNpZGUgKSB7XG5cdCAgICAgICAgICBpZiAoIHBhcmVudC50YWdOYW1lID09PSAnTEknICYmICFoYXNDbGFzcyhwYXJlbnQsYWN0aXZlKSApIHtcblx0ICAgICAgICAgICAgYWRkQ2xhc3MocGFyZW50LGFjdGl2ZSk7XG5cdCAgICAgICAgICAgIGlzQWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgaWYgKGRyb3Bkb3duICYmICFoYXNDbGFzcyhkcm9wZG93bixhY3RpdmUpICkge1xuXHQgICAgICAgICAgICAgIGFkZENsYXNzKGRyb3Bkb3duLGFjdGl2ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCAnYWN0aXZhdGUnLCAnc2Nyb2xsc3B5JywgaXRlbXNbaW5kZXhdKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKCAhaW5zaWRlICkge1xuXHQgICAgICAgICAgaWYgKCBwYXJlbnQudGFnTmFtZSA9PT0gJ0xJJyAmJiBoYXNDbGFzcyhwYXJlbnQsYWN0aXZlKSApIHtcblx0ICAgICAgICAgICAgcmVtb3ZlQ2xhc3MocGFyZW50LGFjdGl2ZSk7XG5cdCAgICAgICAgICAgIGlzQWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChkcm9wZG93biAmJiBoYXNDbGFzcyhkcm9wZG93bixhY3RpdmUpICYmICFnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHBhcmVudFtwYXJlbnROb2RlXSxhY3RpdmUpLmxlbmd0aCApIHtcblx0ICAgICAgICAgICAgICByZW1vdmVDbGFzcyhkcm9wZG93bixhY3RpdmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmICggIWluc2lkZSAmJiAhaXNBY3RpdmUgfHwgaXNBY3RpdmUgJiYgaW5zaWRlICkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgdXBkYXRlSXRlbXMgPSBmdW5jdGlvbigpe1xuXHQgICAgICAgIHNjcm9sbE9mZnNldCA9IGlzV2luZG93ID8gZ2V0U2Nyb2xsKCkueSA6IGVsZW1lbnRbc2Nyb2xsVG9wXTtcblx0ICAgICAgICBmb3IgKHZhciBpbmRleD0wLCBpdGw9aXRlbXNbbGVuZ3RoXTsgaW5kZXg8aXRsOyBpbmRleCsrKSB7XG5cdCAgICAgICAgICB1cGRhdGVJdGVtKGluZGV4KVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICBcblx0ICAgIC8vIHB1YmxpYyBtZXRob2Rcblx0ICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdXBkYXRlSXRlbXMoKTtcblx0ICAgIH1cblx0ICBcblx0ICAgIC8vIGluaXRcblx0ICAgIGlmICggIShzdHJpbmdTY3JvbGxTcHkgaW4gZWxlbWVudCkgKSB7IC8vIHByZXZlbnQgYWRkaW5nIGV2ZW50IGhhbmRsZXJzIHR3aWNlXG5cdCAgICAgIG9uKCBzY3JvbGxUYXJnZXQsIHNjcm9sbEV2ZW50LCB0aGlzLnJlZnJlc2ggKTtcblx0ICAgICAgIWlzSUU4ICYmIG9uKCBnbG9iYWxPYmplY3QsIHJlc2l6ZUV2ZW50LCB0aGlzLnJlZnJlc2ggKTsgXG5cdCAgICB9XG5cdCAgICB0aGlzLnJlZnJlc2goKTtcblx0ICAgIGVsZW1lbnRbc3RyaW5nU2Nyb2xsU3B5XSA9IHRoaXM7XG5cdCAgfTtcblx0ICBcblx0ICAvLyBTQ1JPTExTUFkgREFUQSBBUElcblx0ICAvLyA9PT09PT09PT09PT09PT09PT1cblx0ICBpbml0aWFsaXplRGF0YUFQSShzdHJpbmdTY3JvbGxTcHksIFNjcm9sbFNweSwgZGF0YVNweSk7XG5cdCAgXG5cdCAgXG5cdCAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgVGFiXG5cdCAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHQgIFxuXHQgIC8vIFRBQiBERUZJTklUSU9OXG5cdCAgLy8gPT09PT09PT09PT09PT1cblx0ICB2YXIgVGFiID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMgKSB7XG5cdCAgXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG5cdCAgICBlbGVtZW50ID0gcXVlcnlFbGVtZW50KGVsZW1lbnQpO1xuXHQgIFxuXHQgICAgLy8gREFUQSBBUElcblx0ICAgIHZhciBoZWlnaHREYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFIZWlnaHQpLFxuXHQgICAgICBcblx0ICAgICAgICAvLyBzdHJpbmdzXG5cdCAgICAgICAgY29tcG9uZW50ID0gJ3RhYicsIGhlaWdodCA9ICdoZWlnaHQnLCBpc0FuaW1hdGluZyA9ICdpc0FuaW1hdGluZyc7XG5cdCAgXG5cdCAgICAvLyBzZXQgZGVmYXVsdCBhbmltYXRpb24gc3RhdGVcblx0ICAgIGVsZW1lbnRbaXNBbmltYXRpbmddID0gZmFsc2U7XG5cdCAgXG5cdCAgICAvLyBzZXQgb3B0aW9uc1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICB0aGlzW2hlaWdodF0gPSBzdXBwb3J0VHJhbnNpdGlvbnMgPyAob3B0aW9uc1toZWlnaHRdIHx8IGhlaWdodERhdGEgPT09ICd0cnVlJykgOiBmYWxzZTsgLy8gZmlsdGVyIGxlZ2FjeSBicm93c2Vyc1xuXHQgIFxuXHQgICAgLy8gYmluZCwgZXZlbnQgdGFyZ2V0c1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzLCBuZXh0LFxuXHQgICAgICB0YWJzID0gZ2V0Q2xvc2VzdChlbGVtZW50LCcubmF2JyksXG5cdCAgICAgIHRhYnNDb250ZW50Q29udGFpbmVyLFxuXHQgICAgICBkcm9wZG93biA9IHRhYnMgJiYgcXVlcnlFbGVtZW50KCcuZHJvcGRvd24nLHRhYnMpO1xuXHQgIFxuXHQgICAgaWYgKCF0YWJzKSByZXR1cm47IC8vIGludmFsaWRhdGUgXG5cdCAgXG5cdCAgICAvLyBwcml2YXRlIG1ldGhvZHNcblx0ICAgIHZhciBnZXRBY3RpdmVUYWIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgYWN0aXZlVGFicyA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUodGFicyxhY3RpdmUpLCBhY3RpdmVUYWI7XG5cdCAgICAgICAgaWYgKCBhY3RpdmVUYWJzW2xlbmd0aF0gPT09IDEgJiYgIWhhc0NsYXNzKGFjdGl2ZVRhYnNbMF0sJ2Ryb3Bkb3duJykgKSB7XG5cdCAgICAgICAgICBhY3RpdmVUYWIgPSBhY3RpdmVUYWJzWzBdO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoIGFjdGl2ZVRhYnNbbGVuZ3RoXSA+IDEgKSB7XG5cdCAgICAgICAgICBhY3RpdmVUYWIgPSBhY3RpdmVUYWJzW2FjdGl2ZVRhYnNbbGVuZ3RoXS0xXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGFjdGl2ZVRhYltnZXRFbGVtZW50c0J5VGFnTmFtZV0oJ0EnKVswXTtcblx0ICAgICAgfSxcblx0ICAgICAgZ2V0QWN0aXZlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBxdWVyeUVsZW1lbnQoZ2V0QWN0aXZlVGFiKClbZ2V0QXR0cmlidXRlXSgnaHJlZicpKTtcblx0ICAgICAgfSxcblx0ICAgICAgLy8gaGFuZGxlclxuXHQgICAgICBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIG5leHQgPSBlW3RhcmdldF1bZ2V0QXR0cmlidXRlXShkYXRhVG9nZ2xlKSA9PT0gY29tcG9uZW50IHx8IHRhcmdldHNSZWcudGVzdChlW3RhcmdldF1bZ2V0QXR0cmlidXRlXSgnaHJlZicpKSBcblx0ICAgICAgICAgICAgID8gZVt0YXJnZXRdIDogZVt0YXJnZXRdW3BhcmVudE5vZGVdOyAvLyBhbGxvdyBmb3IgY2hpbGQgZWxlbWVudHMgbGlrZSBpY29ucyB0byB1c2UgdGhlIGhhbmRsZXJcblx0ICAgICAgICBzZWxmLnNob3coKTtcblx0ICAgICAgfTtcblx0ICBcblx0ICAgIC8vIHB1YmxpYyBtZXRob2Rcblx0ICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkgeyAvLyB0aGUgdGFiIHdlIGNsaWNrZWQgaXMgbm93IHRoZSBuZXh0IHRhYlxuXHQgICAgICB2YXIgbmV4dENvbnRlbnQgPSBxdWVyeUVsZW1lbnQobmV4dFtnZXRBdHRyaWJ1dGVdKCdocmVmJykpLCAvL3RoaXMgaXMgdGhlIGFjdHVhbCBvYmplY3QsIHRoZSBuZXh0IHRhYiBjb250ZW50IHRvIGFjdGl2YXRlXG5cdCAgICAgICAgYWN0aXZlVGFiID0gZ2V0QWN0aXZlVGFiKCksIGFjdGl2ZUNvbnRlbnQgPSBnZXRBY3RpdmVDb250ZW50KCk7ICAgICAgXG5cdCAgICAgIFxuXHQgICAgICBpZiAoICghYWN0aXZlVGFiW2lzQW5pbWF0aW5nXSB8fCAhbmV4dFtpc0FuaW1hdGluZ10pICYmICFoYXNDbGFzcyhuZXh0W3BhcmVudE5vZGVdLGFjdGl2ZSkgKSB7XG5cdCAgICAgICAgYWN0aXZlVGFiW2lzQW5pbWF0aW5nXSA9IG5leHRbaXNBbmltYXRpbmddID0gdHJ1ZTtcblx0ICAgICAgICByZW1vdmVDbGFzcyhhY3RpdmVUYWJbcGFyZW50Tm9kZV0sYWN0aXZlKTtcblx0ICAgICAgICBhZGRDbGFzcyhuZXh0W3BhcmVudE5vZGVdLGFjdGl2ZSk7XG5cdCAgXG5cdCAgICAgICAgaWYgKCBkcm9wZG93biApIHtcblx0ICAgICAgICAgIGlmICggIWhhc0NsYXNzKGVsZW1lbnRbcGFyZW50Tm9kZV1bcGFyZW50Tm9kZV0sJ2Ryb3Bkb3duLW1lbnUnKSApIHtcblx0ICAgICAgICAgICAgaWYgKGhhc0NsYXNzKGRyb3Bkb3duLGFjdGl2ZSkpIHJlbW92ZUNsYXNzKGRyb3Bkb3duLGFjdGl2ZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWhhc0NsYXNzKGRyb3Bkb3duLGFjdGl2ZSkpIGFkZENsYXNzKGRyb3Bkb3duLGFjdGl2ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIFxuXHQgICAgICAgIGlmICh0YWJzQ29udGVudENvbnRhaW5lcikgdGFic0NvbnRlbnRDb250YWluZXJbc3R5bGVdW2hlaWdodF0gPSBnZXRNYXhIZWlnaHQoYWN0aXZlQ29udGVudCkgKyAncHgnOyAvLyBoZWlnaHQgYW5pbWF0aW9uXG5cdCAgXG5cdCAgICAgICAgKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICByZW1vdmVDbGFzcyhhY3RpdmVDb250ZW50LGluQ2xhc3MpO1xuXHQgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChhY3RpdmVUYWIsIGhpZGVFdmVudCwgY29tcG9uZW50LCBuZXh0KTtcblx0ICAgICAgICAgIChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChhY3RpdmVDb250ZW50LCBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICByZW1vdmVDbGFzcyhhY3RpdmVDb250ZW50LGFjdGl2ZSk7XG5cdCAgICAgICAgICAgICAgYWRkQ2xhc3MobmV4dENvbnRlbnQsYWN0aXZlKTtcblx0ICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgYWRkQ2xhc3MobmV4dENvbnRlbnQsaW5DbGFzcyk7XG5cdCAgICAgICAgICAgICAgICBuZXh0Q29udGVudFtvZmZzZXRIZWlnaHRdO1xuXHQgICAgICAgICAgICAgICAgaWYgKHRhYnNDb250ZW50Q29udGFpbmVyKSBhZGRDbGFzcyh0YWJzQ29udGVudENvbnRhaW5lcixjb2xsYXBzaW5nKTtcblx0ICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChuZXh0LCBzaG93RXZlbnQsIGNvbXBvbmVudCwgYWN0aXZlVGFiKTtcblx0ICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmKHRhYnNDb250ZW50Q29udGFpbmVyKSB0YWJzQ29udGVudENvbnRhaW5lcltzdHlsZV1baGVpZ2h0XSA9IGdldE1heEhlaWdodChuZXh0Q29udGVudCkgKyAncHgnOyAvLyBoZWlnaHQgYW5pbWF0aW9uXG5cdCAgICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChhY3RpdmVUYWIsIGhpZGRlbkV2ZW50LCBjb21wb25lbnQsIG5leHQpO1xuXHQgICAgICAgICAgICAgICAgICB9KCkpO1xuXHQgICAgICAgICAgICAgICAgfSgpKTtcblx0ICAgICAgICAgICAgICB9LDIwKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9KCkpO1xuXHQgICAgICAgIH0oKSk7XG5cdCAgXG5cdCAgICAgICAgKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChuZXh0Q29udGVudCwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwobmV4dCwgc2hvd25FdmVudCwgY29tcG9uZW50LCBhY3RpdmVUYWIpO1xuXHQgICAgICAgICAgICBpZiAodGFic0NvbnRlbnRDb250YWluZXIpIHsgLy8gaGVpZ2h0IGFuaW1hdGlvblxuXHQgICAgICAgICAgICAgIChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQodGFic0NvbnRlbnRDb250YWluZXIsIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgICAgICAgICB0YWJzQ29udGVudENvbnRhaW5lcltzdHlsZV1baGVpZ2h0XSA9ICcnO1xuXHQgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRhYnNDb250ZW50Q29udGFpbmVyLGNvbGxhcHNpbmcpO1xuXHQgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYltpc0FuaW1hdGluZ10gPSBuZXh0W2lzQW5pbWF0aW5nXSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICB9LDIwMCk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICB9KCkpO1xuXHQgICAgICAgICAgICB9IGVsc2UgeyBcblx0ICAgICAgICAgICAgICBhY3RpdmVUYWJbaXNBbmltYXRpbmddID0gbmV4dFtpc0FuaW1hdGluZ10gPSBmYWxzZTsgXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0oKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICBpZiAoICEoc3RyaW5nVGFiIGluIGVsZW1lbnQpICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuXHQgICAgICBvbihlbGVtZW50LCBjbGlja0V2ZW50LCBjbGlja0hhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXNbaGVpZ2h0XSkgeyB0YWJzQ29udGVudENvbnRhaW5lciA9IGdldEFjdGl2ZUNvbnRlbnQoKVtwYXJlbnROb2RlXTsgfVxuXHQgICAgZWxlbWVudFtzdHJpbmdUYWJdID0gdGhpcztcblx0ICB9O1xuXHQgIFxuXHQgIC8vIFRBQiBEQVRBIEFQSVxuXHQgIC8vID09PT09PT09PT09PVxuXHQgIGluaXRpYWxpemVEYXRhQVBJKHN0cmluZ1RhYiwgVGFiLCBkYXRhVG9nZ2xlKTtcblx0ICBcblx0ICBcblx0ICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBUb29sdGlwXG5cdCAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0ICBcblx0ICAvLyBUT09MVElQIERFRklOSVRJT05cblx0ICAvLyA9PT09PT09PT09PT09PT09PT1cblx0ICB2YXIgVG9vbHRpcCA9IGZ1bmN0aW9uKCBlbGVtZW50LG9wdGlvbnMgKSB7XG5cdCAgXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG5cdCAgICBlbGVtZW50ID0gcXVlcnlFbGVtZW50KGVsZW1lbnQpO1xuXHQgIFxuXHQgICAgLy8gREFUQSBBUElcblx0ICAgIHZhciBhbmltYXRpb25EYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFBbmltYXRpb24pO1xuXHQgICAgICAgIHBsYWNlbWVudERhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YVBsYWNlbWVudCk7XG5cdCAgICAgICAgZGVsYXlEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFEZWxheSksXG5cdCAgICAgICAgY29udGFpbmVyRGF0YSA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhQ29udGFpbmVyKSxcblx0ICAgICAgICBcblx0ICAgICAgICAvLyBzdHJpbmdzXG5cdCAgICAgICAgY29tcG9uZW50ID0gJ3Rvb2x0aXAnLFxuXHQgICAgICAgIGNsYXNzU3RyaW5nID0gJ2NsYXNzJyxcblx0ICAgICAgICB0aXRsZSA9ICd0aXRsZScsXG5cdCAgICAgICAgZmFkZSA9ICdmYWRlJyxcblx0ICAgICAgICBkaXYgPSAnZGl2Jyxcblx0ICBcblx0ICAgICAgICAvLyBtYXliZSB0aGUgZWxlbWVudCBpcyBpbnNpZGUgYSBtb2RhbFxuXHQgICAgICAgIG1vZGFsID0gZ2V0Q2xvc2VzdChlbGVtZW50LCcubW9kYWwnKSxcblx0ICAgICAgICBcblx0ICAgICAgICAvLyBtYXliZSB0aGUgZWxlbWVudCBpcyBpbnNpZGUgYSBmaXhlZCBuYXZiYXJcblx0ICAgICAgICBuYXZiYXJGaXhlZFRvcCA9IGdldENsb3Nlc3QoZWxlbWVudCxmaXhlZFRvcCksXG5cdCAgICAgICAgbmF2YmFyRml4ZWRCb3R0b20gPSBnZXRDbG9zZXN0KGVsZW1lbnQsZml4ZWRCb3R0b20pO1xuXHQgIFxuXHQgICAgLy8gc2V0IG9wdGlvbnNcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgdGhpc1thbmltYXRpb25dID0gb3B0aW9uc1thbmltYXRpb25dICYmIG9wdGlvbnNbYW5pbWF0aW9uXSAhPT0gZmFkZSA/IG9wdGlvbnNbYW5pbWF0aW9uXSA6IGFuaW1hdGlvbkRhdGEgfHwgZmFkZTtcblx0ICAgIHRoaXNbcGxhY2VtZW50XSA9IG9wdGlvbnNbcGxhY2VtZW50XSA/IG9wdGlvbnNbcGxhY2VtZW50XSA6IHBsYWNlbWVudERhdGEgfHwgdG9wO1xuXHQgICAgdGhpc1tkZWxheV0gPSBwYXJzZUludChvcHRpb25zW2RlbGF5XSB8fCBkZWxheURhdGEpIHx8IDIwMDtcblx0ICAgIHRoaXNbY29udGFpbmVyXSA9IHF1ZXJ5RWxlbWVudChvcHRpb25zW2NvbnRhaW5lcl0pID8gcXVlcnlFbGVtZW50KG9wdGlvbnNbY29udGFpbmVyXSkgXG5cdCAgICAgICAgICAgICAgICAgICAgOiBxdWVyeUVsZW1lbnQoY29udGFpbmVyRGF0YSkgPyBxdWVyeUVsZW1lbnQoY29udGFpbmVyRGF0YSkgXG5cdCAgICAgICAgICAgICAgICAgICAgOiBuYXZiYXJGaXhlZFRvcCA/IG5hdmJhckZpeGVkVG9wXG5cdCAgICAgICAgICAgICAgICAgICAgOiBuYXZiYXJGaXhlZEJvdHRvbSA/IG5hdmJhckZpeGVkQm90dG9tXG5cdCAgICAgICAgICAgICAgICAgICAgOiBtb2RhbCA/IG1vZGFsIDogYm9keTtcblx0ICBcblx0ICAgIC8vIGJpbmQsIGV2ZW50IHRhcmdldHMsIHRpdGxlIGFuZCBjb25zdGFudHNcblx0ICAgIHZhciBzZWxmID0gdGhpcywgdGltZXIgPSAwLCBwbGFjZW1lbnRTZXR0aW5nID0gdGhpc1twbGFjZW1lbnRdLCB0b29sdGlwID0gbnVsbCxcblx0ICAgICAgdGl0bGVTdHJpbmcgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0odGl0bGUpIHx8IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhT3JpZ2luYWxUaXRsZSk7XG5cdCAgXG5cdCAgICBpZiAoICF0aXRsZVN0cmluZyApIHJldHVybjsgLy8gaW52YWxpZGF0ZVxuXHQgIFxuXHQgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG5cdCAgICB2YXIgcmVtb3ZlVG9vbFRpcCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHNlbGZbY29udGFpbmVyXS5yZW1vdmVDaGlsZCh0b29sdGlwKTtcblx0ICAgICAgICB0b29sdGlwID0gbnVsbDsgdGltZXIgPSBudWxsO1xuXHQgICAgICB9LFxuXHQgICAgICBjcmVhdGVUb29sVGlwID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGl0bGVTdHJpbmcgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0odGl0bGUpIHx8IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhT3JpZ2luYWxUaXRsZSk7IC8vIHJlYWQgdGhlIHRpdGxlIGFnYWluXG5cdCAgICAgICAgdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2KTtcblx0ICAgICAgICB0b29sdGlwW3NldEF0dHJpYnV0ZV0oJ3JvbGUnLGNvbXBvbmVudCk7XG5cdCAgXG5cdCAgICAgICAgdmFyIHRvb2x0aXBBcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2KSwgdG9vbHRpcElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkaXYpO1xuXHQgICAgICAgIHRvb2x0aXBBcnJvd1tzZXRBdHRyaWJ1dGVdKGNsYXNzU3RyaW5nLCBjb21wb25lbnQrJy1hcnJvdycpOyB0b29sdGlwSW5uZXJbc2V0QXR0cmlidXRlXShjbGFzc1N0cmluZyxjb21wb25lbnQrJy1pbm5lcicpO1xuXHQgIFxuXHQgICAgICAgIHRvb2x0aXAuYXBwZW5kQ2hpbGQodG9vbHRpcEFycm93KTsgdG9vbHRpcC5hcHBlbmRDaGlsZCh0b29sdGlwSW5uZXIpO1xuXHQgIFxuXHQgICAgICAgIHRvb2x0aXBJbm5lci5pbm5lckhUTUwgPSB0aXRsZVN0cmluZztcblx0ICBcblx0ICAgICAgICBzZWxmW2NvbnRhaW5lcl0uYXBwZW5kQ2hpbGQodG9vbHRpcCk7XG5cdCAgICAgICAgdG9vbHRpcFtzZXRBdHRyaWJ1dGVdKGNsYXNzU3RyaW5nLCBjb21wb25lbnQgKyAnICcgKyBwbGFjZW1lbnRTZXR0aW5nICsgJyAnICsgc2VsZlthbmltYXRpb25dKTtcblx0ICAgICAgfSxcblx0ICAgICAgdXBkYXRlVG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzdHlsZVRpcChlbGVtZW50LHRvb2x0aXAscGxhY2VtZW50U2V0dGluZyxzZWxmW2NvbnRhaW5lcl0pO1xuXHQgICAgICAgIGlmICghaXNFbGVtZW50SW5WaWV3cG9ydCh0b29sdGlwKSApIHsgXG5cdCAgICAgICAgICBwbGFjZW1lbnRTZXR0aW5nID0gdXBkYXRlUGxhY2VtZW50KHBsYWNlbWVudFNldHRpbmcpOyBcblx0ICAgICAgICAgIHN0eWxlVGlwKGVsZW1lbnQsdG9vbHRpcCxwbGFjZW1lbnRTZXR0aW5nLHNlbGZbY29udGFpbmVyXSk7IFxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgc2hvd1Rvb2x0aXAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgIWhhc0NsYXNzKHRvb2x0aXAsaW5DbGFzcykgJiYgKCBhZGRDbGFzcyh0b29sdGlwLGluQ2xhc3MpICk7XG5cdCAgICAgIH07XG5cdCAgXG5cdCAgICAvLyBwdWJsaWMgbWV0aG9kc1xuXHQgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG5cdCAgICAgIHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKHRvb2x0aXAgPT09IG51bGwpIHtcblx0ICAgICAgICAgIHBsYWNlbWVudFNldHRpbmcgPSBzZWxmW3BsYWNlbWVudF07IC8vIHdlIHJlc2V0IHBsYWNlbWVudCBpbiBhbGwgY2FzZXNcblx0ICAgICAgICAgIGNyZWF0ZVRvb2xUaXAoKTtcblx0ICAgICAgICAgIHVwZGF0ZVRvb2x0aXAoKTtcblx0ICAgICAgICAgIHNob3dUb29sdGlwKCk7XG5cdCAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIHNob3dFdmVudCwgY29tcG9uZW50KTtcblx0ICAgICAgICAgIGVtdWxhdGVUcmFuc2l0aW9uRW5kKHRvb2x0aXAsIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIHNob3duRXZlbnQsIGNvbXBvbmVudCk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDIwICk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG5cdCAgICAgIHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKHRvb2x0aXAgJiYgdG9vbHRpcCAhPT0gbnVsbCAmJiBoYXNDbGFzcyh0b29sdGlwLGluQ2xhc3MpKSB7XG5cdCAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGhpZGVFdmVudCwgY29tcG9uZW50KTtcblx0ICAgICAgICAgIHJlbW92ZUNsYXNzKHRvb2x0aXAsaW5DbGFzcyk7XG5cdCAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZCh0b29sdGlwLCBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgcmVtb3ZlVG9vbFRpcCgpO1xuXHQgICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGhpZGRlbkV2ZW50LCBjb21wb25lbnQpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBzZWxmW2RlbGF5XSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKCF0b29sdGlwKSB7IHNlbGYuc2hvdygpOyB9IFxuXHQgICAgICBlbHNlIHsgc2VsZi5oaWRlKCk7IH1cblx0ICAgIH07XG5cdCAgXG5cdCAgICAvLyBpbml0XG5cdCAgICBpZiAoICEoc3RyaW5nVG9vbHRpcCBpbiBlbGVtZW50KSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2Vcblx0ICAgICAgZWxlbWVudFtzZXRBdHRyaWJ1dGVdKGRhdGFPcmlnaW5hbFRpdGxlLHRpdGxlU3RyaW5nKTtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodGl0bGUpO1xuXHQgICAgICBvbihlbGVtZW50LCBtb3VzZUhvdmVyWzBdLCB0aGlzLnNob3cpO1xuXHQgICAgICBvbihlbGVtZW50LCBtb3VzZUhvdmVyWzFdLCB0aGlzLmhpZGUpO1xuXHQgICAgfVxuXHQgICAgZWxlbWVudFtzdHJpbmdUb29sdGlwXSA9IHRoaXM7XG5cdCAgfTtcblx0ICBcblx0ICAvLyBUT09MVElQIERBVEEgQVBJXG5cdCAgLy8gPT09PT09PT09PT09PT09PT1cblx0ICBpbml0aWFsaXplRGF0YUFQSShzdHJpbmdUb29sdGlwLCBUb29sdGlwLCBkYXRhVG9nZ2xlKTtcblx0ICBcblx0ICBcblx0ICByZXR1cm4ge1xuXHQgICAgQWZmaXg6IEFmZml4LFxuXHQgICAgQWxlcnQ6IEFsZXJ0LFxuXHQgICAgQnV0dG9uOiBCdXR0b24sXG5cdCAgICBDYXJvdXNlbDogQ2Fyb3VzZWwsXG5cdCAgICBDb2xsYXBzZTogQ29sbGFwc2UsXG5cdCAgICBEcm9wZG93bjogRHJvcGRvd24sXG5cdCAgICBNb2RhbDogTW9kYWwsXG5cdCAgICBQb3BvdmVyOiBQb3BvdmVyLFxuXHQgICAgU2Nyb2xsU3B5OiBTY3JvbGxTcHksXG5cdCAgICBUYWI6IFRhYixcblx0ICAgIFRvb2x0aXA6IFRvb2x0aXBcblx0ICB9O1xuXHR9KSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBteS1jb20uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1NjUwYzA5OTgwNmQ3OWJlM2M4NSIsImltcG9ydCBic24gZnJvbSAnYm9vdHN0cmFwLm5hdGl2ZSc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXlvdXQuanMiLCIvLyBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgdjIuMC42IHwgwqkgZG5wX3RoZW1lIHwgTUlULUxpY2Vuc2VcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1EIHN1cHBvcnQ6XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIC8vIENvbW1vbkpTLWxpa2U6XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICB2YXIgYnNuID0gZmFjdG9yeSgpO1xuICAgIHJvb3QuQWZmaXggPSBic24uQWZmaXg7XG4gICAgcm9vdC5BbGVydCA9IGJzbi5BbGVydDtcbiAgICByb290LkJ1dHRvbiA9IGJzbi5CdXR0b247XG4gICAgcm9vdC5DYXJvdXNlbCA9IGJzbi5DYXJvdXNlbDtcbiAgICByb290LkNvbGxhcHNlID0gYnNuLkNvbGxhcHNlO1xuICAgIHJvb3QuRHJvcGRvd24gPSBic24uRHJvcGRvd247XG4gICAgcm9vdC5Nb2RhbCA9IGJzbi5Nb2RhbDtcbiAgICByb290LlBvcG92ZXIgPSBic24uUG9wb3ZlcjtcbiAgICByb290LlNjcm9sbFNweSA9IGJzbi5TY3JvbGxTcHk7XG4gICAgcm9vdC5UYWIgPSBic24uVGFiO1xuICAgIHJvb3QuVG9vbHRpcCA9IGJzbi5Ub29sdGlwO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgXG4gIC8qIE5hdGl2ZSBKYXZhc2NyaXB0IGZvciBCb290c3RyYXAgMyB8IEludGVybmFsIFV0aWxpdHkgRnVuY3Rpb25zXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBcbiAgLy8gZ2xvYmFsc1xuICB2YXIgZ2xvYmFsT2JqZWN0ID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0aGlzfHx3aW5kb3csXG4gICAgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBib2R5ID0gZG9jdW1lbnQuYm9keSxcbiAgXG4gICAgLy8gZnVuY3Rpb24gdG9nZ2xlIGF0dHJpYnV0ZXNcbiAgICBkYXRhVG9nZ2xlICAgID0gJ2RhdGEtdG9nZ2xlJyxcbiAgICBkYXRhRGlzbWlzcyAgID0gJ2RhdGEtZGlzbWlzcycsXG4gICAgZGF0YVNweSAgICAgICA9ICdkYXRhLXNweScsXG4gICAgZGF0YVJpZGUgICAgICA9ICdkYXRhLXJpZGUnLFxuICAgIFxuICAgIC8vIGNvbXBvbmVudHNcbiAgICBzdHJpbmdBZmZpeCAgICAgPSAnQWZmaXgnLFxuICAgIHN0cmluZ0FsZXJ0ICAgICA9ICdBbGVydCcsXG4gICAgc3RyaW5nQnV0dG9uICAgID0gJ0J1dHRvbicsXG4gICAgc3RyaW5nQ2Fyb3VzZWwgID0gJ0Nhcm91c2VsJyxcbiAgICBzdHJpbmdDb2xsYXBzZSAgPSAnQ29sbGFwc2UnLFxuICAgIHN0cmluZ0Ryb3Bkb3duICA9ICdEcm9wZG93bicsXG4gICAgc3RyaW5nTW9kYWwgICAgID0gJ01vZGFsJyxcbiAgICBzdHJpbmdQb3BvdmVyICAgPSAnUG9wb3ZlcicsXG4gICAgc3RyaW5nU2Nyb2xsU3B5ID0gJ1Njcm9sbFNweScsXG4gICAgc3RyaW5nVGFiICAgICAgID0gJ1RhYicsXG4gICAgc3RyaW5nVG9vbHRpcCAgID0gJ1Rvb2x0aXAnLFxuICBcbiAgICAvLyBvcHRpb25zIERBVEEgQVBJXG4gICAgZGF0YWJhY2tkcm9wICAgICAgPSAnZGF0YS1iYWNrZHJvcCcsXG4gICAgZGF0YUtleWJvYXJkICAgICAgPSAnZGF0YS1rZXlib2FyZCcsXG4gICAgZGF0YVRhcmdldCAgICAgICAgPSAnZGF0YS10YXJnZXQnLFxuICAgIGRhdGFJbnRlcnZhbCAgICAgID0gJ2RhdGEtaW50ZXJ2YWwnLFxuICAgIGRhdGFIZWlnaHQgICAgICAgID0gJ2RhdGEtaGVpZ2h0JyxcbiAgICBkYXRhUGF1c2UgICAgICAgICA9ICdkYXRhLXBhdXNlJyxcbiAgICBkYXRhT3JpZ2luYWxUaXRsZSA9ICdkYXRhLW9yaWdpbmFsLXRpdGxlJyxcbiAgICBkYXRhT3JpZ2luYWxUZXh0ICA9ICdkYXRhLW9yaWdpbmFsLXRleHQnLFxuICAgIGRhdGFEaXNtaXNzaWJsZSAgID0gJ2RhdGEtZGlzbWlzc2libGUnLFxuICAgIGRhdGFUcmlnZ2VyICAgICAgID0gJ2RhdGEtdHJpZ2dlcicsXG4gICAgZGF0YUFuaW1hdGlvbiAgICAgPSAnZGF0YS1hbmltYXRpb24nLFxuICAgIGRhdGFDb250YWluZXIgICAgID0gJ2RhdGEtY29udGFpbmVyJyxcbiAgICBkYXRhUGxhY2VtZW50ICAgICA9ICdkYXRhLXBsYWNlbWVudCcsXG4gICAgZGF0YURlbGF5ICAgICAgICAgPSAnZGF0YS1kZWxheScsXG4gICAgZGF0YU9mZnNldFRvcCAgICAgPSAnZGF0YS1vZmZzZXQtdG9wJyxcbiAgICBkYXRhT2Zmc2V0Qm90dG9tICA9ICdkYXRhLW9mZnNldC1ib3R0b20nLFxuICBcbiAgICAvLyBvcHRpb24ga2V5c1xuICAgIGJhY2tkcm9wID0gJ2JhY2tkcm9wJywga2V5Ym9hcmQgPSAna2V5Ym9hcmQnLCBkZWxheSA9ICdkZWxheScsXG4gICAgY29udGVudCA9ICdjb250ZW50JywgdGFyZ2V0ID0gJ3RhcmdldCcsIFxuICAgIGludGVydmFsID0gJ2ludGVydmFsJywgcGF1c2UgPSAncGF1c2UnLCBhbmltYXRpb24gPSAnYW5pbWF0aW9uJyxcbiAgICBwbGFjZW1lbnQgPSAncGxhY2VtZW50JywgY29udGFpbmVyID0gJ2NvbnRhaW5lcicsIFxuICBcbiAgICAvLyBib3ggbW9kZWxcbiAgICBvZmZzZXRUb3AgICAgPSAnb2Zmc2V0VG9wJywgICAgICBvZmZzZXRCb3R0b20gICA9ICdvZmZzZXRCb3R0b20nLFxuICAgIG9mZnNldExlZnQgICA9ICdvZmZzZXRMZWZ0JyxcbiAgICBzY3JvbGxUb3AgICAgPSAnc2Nyb2xsVG9wJywgICAgICBzY3JvbGxMZWZ0ICAgICA9ICdzY3JvbGxMZWZ0JyxcbiAgICBjbGllbnRXaWR0aCAgPSAnY2xpZW50V2lkdGgnLCAgICBjbGllbnRIZWlnaHQgICA9ICdjbGllbnRIZWlnaHQnLFxuICAgIG9mZnNldFdpZHRoICA9ICdvZmZzZXRXaWR0aCcsICAgIG9mZnNldEhlaWdodCAgID0gJ29mZnNldEhlaWdodCcsXG4gICAgaW5uZXJXaWR0aCAgID0gJ2lubmVyV2lkdGgnLCAgICAgaW5uZXJIZWlnaHQgICAgPSAnaW5uZXJIZWlnaHQnLFxuICAgIHNjcm9sbEhlaWdodCA9ICdzY3JvbGxIZWlnaHQnLCAgIGhlaWdodCAgICAgICAgID0gJ2hlaWdodCcsXG4gIFxuICAgIC8vIGFyaWFcbiAgICBhcmlhRXhwYW5kZWQgPSAnYXJpYS1leHBhbmRlZCcsXG4gICAgYXJpYUhpZGRlbiAgID0gJ2FyaWEtaGlkZGVuJyxcbiAgXG4gICAgLy8gZXZlbnQgbmFtZXNcbiAgICBjbGlja0V2ZW50ICAgID0gJ2NsaWNrJyxcbiAgICBob3ZlckV2ZW50ICAgID0gJ2hvdmVyJyxcbiAgICBrZXlkb3duRXZlbnQgID0gJ2tleWRvd24nLFxuICAgIHJlc2l6ZUV2ZW50ICAgPSAncmVzaXplJyxcbiAgICBzY3JvbGxFdmVudCAgID0gJ3Njcm9sbCcsXG4gICAgLy8gb3JpZ2luYWxFdmVudHNcbiAgICBzaG93RXZlbnQgICAgID0gJ3Nob3cnLFxuICAgIHNob3duRXZlbnQgICAgPSAnc2hvd24nLFxuICAgIGhpZGVFdmVudCAgICAgPSAnaGlkZScsXG4gICAgaGlkZGVuRXZlbnQgICA9ICdoaWRkZW4nLFxuICAgIGNsb3NlRXZlbnQgICAgPSAnY2xvc2UnLFxuICAgIGNsb3NlZEV2ZW50ICAgPSAnY2xvc2VkJyxcbiAgICBzbGlkRXZlbnQgICAgID0gJ3NsaWQnLFxuICAgIHNsaWRlRXZlbnQgICAgPSAnc2xpZGUnLFxuICAgIGNoYW5nZUV2ZW50ICAgPSAnY2hhbmdlJyxcbiAgXG4gICAgLy8gb3RoZXJcbiAgICBnZXRBdHRyaWJ1dGUgICAgICAgICA9ICdnZXRBdHRyaWJ1dGUnLFxuICAgIHNldEF0dHJpYnV0ZSAgICAgICAgID0gJ3NldEF0dHJpYnV0ZScsXG4gICAgaGFzQXR0cmlidXRlICAgICAgICAgPSAnaGFzQXR0cmlidXRlJyxcbiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZSA9ICdnZXRFbGVtZW50c0J5VGFnTmFtZScsXG4gICAgZ2V0Qm91bmRpbmdDbGllbnRSZWN0PSAnZ2V0Qm91bmRpbmdDbGllbnRSZWN0JyxcbiAgICBxdWVyeVNlbGVjdG9yQWxsICAgICA9ICdxdWVyeVNlbGVjdG9yQWxsJyxcbiAgICBnZXRFbGVtZW50c0J5Q0xBU1NOQU1FID0gJ2dldEVsZW1lbnRzQnlDbGFzc05hbWUnLFxuICBcbiAgICBpbmRleE9mICAgICAgPSAnaW5kZXhPZicsXG4gICAgcGFyZW50Tm9kZSAgID0gJ3BhcmVudE5vZGUnLFxuICAgIGxlbmd0aCAgICAgICA9ICdsZW5ndGgnLFxuICAgIHRvTG93ZXJDYXNlICA9ICd0b0xvd2VyQ2FzZScsXG4gICAgVHJhbnNpdGlvbiAgID0gJ1RyYW5zaXRpb24nLFxuICAgIFdlYmtpdCAgICAgICA9ICdXZWJraXQnLFxuICAgIHN0eWxlICAgICAgICA9ICdzdHlsZScsXG4gICAgXG4gICAgYWN0aXZlICAgICA9ICdhY3RpdmUnLFxuICAgIGluQ2xhc3MgICAgPSAnaW4nLFxuICAgIGNvbGxhcHNpbmcgPSAnY29sbGFwc2luZycsXG4gICAgZGlzYWJsZWQgICA9ICdkaXNhYmxlZCcsXG4gICAgbG9hZGluZyAgICA9ICdsb2FkaW5nJyxcbiAgICBsZWZ0ICAgICAgID0gJ2xlZnQnLFxuICAgIHJpZ2h0ICAgICAgPSAncmlnaHQnLFxuICAgIHRvcCAgICAgICAgPSAndG9wJyxcbiAgICBib3R0b20gICAgID0gJ2JvdHRvbScsXG4gIFxuICAgIC8vIElFOCBicm93c2VyIGRldGVjdFxuICAgIGlzSUU4ID0gISgnb3BhY2l0eScgaW4gYm9keVtzdHlsZV0pLFxuICBcbiAgICAvLyB0b29sdGlwIC8gcG9wb3ZlclxuICAgIGZpeGVkVG9wID0gJy5uYXZiYXItZml4ZWQtdG9wJyxcbiAgICBmaXhlZEJvdHRvbSA9ICcubmF2YmFyLWZpeGVkLWJvdHRvbScsICBcbiAgICBtb3VzZUhvdmVyID0gKCdvbm1vdXNlbGVhdmUnIGluIGRvY3VtZW50KSA/IFsgJ21vdXNlZW50ZXInLCAnbW91c2VsZWF2ZSddIDogWyAnbW91c2VvdmVyJywgJ21vdXNlb3V0JyBdLFxuICAgIHRpcFBvc2l0aW9ucyA9IC9cXGIodG9wfGJvdHRvbXxsZWZ0fHRvcCkrLyxcbiAgXG4gICAgLy8gdHJhbnNpdGlvbkVuZCBzaW5jZSAyLjAuNFxuICAgIHN1cHBvcnRUcmFuc2l0aW9ucyA9IFdlYmtpdCtUcmFuc2l0aW9uIGluIGRvY1tzdHlsZV0gfHwgVHJhbnNpdGlvblt0b0xvd2VyQ2FzZV0oKSBpbiBkb2Nbc3R5bGVdLFxuICAgIHRyYW5zaXRpb25FbmRFdmVudCA9IFdlYmtpdCtUcmFuc2l0aW9uIGluIGRvY1tzdHlsZV0gPyBXZWJraXRbdG9Mb3dlckNhc2VdKCkrVHJhbnNpdGlvbisnRW5kJyA6IFRyYW5zaXRpb25bdG9Mb3dlckNhc2VdKCkrJ2VuZCcsICBcbiAgXG4gICAgLy8gc2V0IG5ldyBmb2N1cyBlbGVtZW50IHNpbmNlIDIuMC4zXG4gICAgc2V0Rm9jdXMgPSBmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgIGVsZW1lbnQuZm9jdXMgPyBlbGVtZW50LmZvY3VzKCkgOiBlbGVtZW50LnNldEFjdGl2ZSgpO1xuICAgIH0sXG4gIFxuICAgIC8vIGNsYXNzIG1hbmlwdWxhdGlvbiwgc2luY2UgMi4wLjAgcmVxdWlyZXMgcG9seWZpbGwuanNcbiAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsZW1lbnQsY2xhc3NOQU1FKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOQU1FKTtcbiAgICB9LFxuICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWxlbWVudCxjbGFzc05BTUUpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05BTUUpO1xuICAgIH0sXG4gICAgaGFzQ2xhc3MgPSBmdW5jdGlvbihlbGVtZW50LGNsYXNzTkFNRSl7IC8vIHNpbmNlIDIuMC4wXG4gICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOQU1FKTtcbiAgICB9LFxuICBcbiAgICAvLyBzZWxlY3Rpb24gbWV0aG9kc1xuICAgIG5vZGVMaXN0VG9BcnJheSA9IGZ1bmN0aW9uKG5vZGVMaXN0KXtcbiAgICAgIHZhciBjaGlsZEl0ZW1zID0gW107IGZvciAodmFyIGkgPSAwLCBubGwgPSBub2RlTGlzdFtsZW5ndGhdOyBpPG5sbDsgaSsrKSB7IGNoaWxkSXRlbXMucHVzaCggbm9kZUxpc3RbaV0gKSB9XG4gICAgICByZXR1cm4gY2hpbGRJdGVtcztcbiAgICB9LFxuICAgIGdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBmdW5jdGlvbihlbGVtZW50LGNsYXNzTkFNRSkgeyAvLyBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIElFOCtcbiAgICAgIHZhciBzZWxlY3Rpb25NZXRob2QgPSBpc0lFOCA/IHF1ZXJ5U2VsZWN0b3JBbGwgOiBnZXRFbGVtZW50c0J5Q0xBU1NOQU1FOyAgICAgIFxuICAgICAgcmV0dXJuIG5vZGVMaXN0VG9BcnJheShlbGVtZW50W3NlbGVjdGlvbk1ldGhvZF0oIGlzSUU4ID8gJy4nICsgY2xhc3NOQU1FLnJlcGxhY2UoL1xccyg/PVthLXpdKS9nLCcuJykgOiBjbGFzc05BTUUgKSk7XG4gICAgfSxcbiAgICBxdWVyeUVsZW1lbnQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgdmFyIGxvb2tVcCA9IHBhcmVudCA/IHBhcmVudCA6IGRvY3VtZW50O1xuICAgICAgcmV0dXJuIHR5cGVvZiBzZWxlY3RvciA9PT0gJ29iamVjdCcgPyBzZWxlY3RvciA6IGxvb2tVcC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9LFxuICAgIGdldENsb3Nlc3QgPSBmdW5jdGlvbiAoZWxlbWVudCwgc2VsZWN0b3IpIHsgLy9lbGVtZW50IGlzIHRoZSBlbGVtZW50IGFuZCBzZWxlY3RvciBpcyBmb3IgdGhlIGNsb3Nlc3QgcGFyZW50IGVsZW1lbnQgdG8gZmluZFxuICAgIC8vIHNvdXJjZSBodHRwOi8vZ29tYWtldGhpbmdzLmNvbS9jbGltYmluZy11cC1hbmQtZG93bi10aGUtZG9tLXRyZWUtd2l0aC12YW5pbGxhLWphdmFzY3JpcHQvXG4gICAgICB2YXIgZmlyc3RDaGFyID0gc2VsZWN0b3IuY2hhckF0KDApO1xuICAgICAgZm9yICggOyBlbGVtZW50ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50OyBlbGVtZW50ID0gZWxlbWVudFtwYXJlbnROb2RlXSApIHsvLyBHZXQgY2xvc2VzdCBtYXRjaFxuICAgICAgICBpZiAoIGZpcnN0Q2hhciA9PT0gJy4nICkgey8vIElmIHNlbGVjdG9yIGlzIGEgY2xhc3NcbiAgICAgICAgICBpZiAoIHF1ZXJ5RWxlbWVudChzZWxlY3RvcixlbGVtZW50W3BhcmVudE5vZGVdKSAhPT0gbnVsbCAmJiBoYXNDbGFzcyhlbGVtZW50LHNlbGVjdG9yLnJlcGxhY2UoJy4nLCcnKSkgKSB7IHJldHVybiBlbGVtZW50OyB9XG4gICAgICAgIH0gZWxzZSBpZiAoIGZpcnN0Q2hhciA9PT0gJyMnICkgeyAvLyBJZiBzZWxlY3RvciBpcyBhbiBJRFxuICAgICAgICAgIGlmICggZWxlbWVudC5pZCA9PT0gc2VsZWN0b3Iuc3Vic3RyKDEpICkgeyByZXR1cm4gZWxlbWVudDsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgXG4gICAgLy8gZXZlbnQgYXR0YWNoIGpRdWVyeSBzdHlsZSAvIHRyaWdnZXIgIHNpbmNlIDEuMi4wXG4gICAgb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0sXG4gICAgb2ZmID0gZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0sXG4gICAgb25lID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7IC8vIG9uZSBzaW5jZSAyLjAuNFxuICAgICAgb24oZWxlbWVudCwgZXZlbnQsIGZ1bmN0aW9uIGhhbmRsZXJXcmFwcGVyKGUpe1xuICAgICAgICBoYW5kbGVyKGUpO1xuICAgICAgICBvZmYoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXJXcmFwcGVyKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbihlbGVtZW50LGhhbmRsZXIpeyAvLyBlbXVsYXRlVHJhbnNpdGlvbkVuZCBzaW5jZSAyLjAuNFxuICAgICAgaWYgKHN1cHBvcnRUcmFuc2l0aW9ucykgeyBvbmUoZWxlbWVudCwgdHJhbnNpdGlvbkVuZEV2ZW50LCBmdW5jdGlvbihlKXsgaGFuZGxlcihlKTsgfSk7IH0gXG4gICAgICBlbHNlIHsgaGFuZGxlcigpOyB9XG4gICAgfSxcbiAgICBib290c3RyYXBDdXN0b21FdmVudCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNvbXBvbmVudE5hbWUsIHJlbGF0ZWQpIHtcbiAgICAgIHZhciBPcmlnaW5hbEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCBldmVudE5hbWUgKyAnLmJzLicgKyBjb21wb25lbnROYW1lKTtcbiAgICAgIE9yaWdpbmFsQ3VzdG9tRXZlbnQucmVsYXRlZFRhcmdldCA9IHJlbGF0ZWQ7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoT3JpZ2luYWxDdXN0b21FdmVudCk7XG4gICAgfSxcbiAgXG4gICAgLy8gcmVmZXJlbmNlIGEgbGl2ZSBjb2xsZWN0aW9uIG9mIHRoZSBET01cbiAgICBBbGxET01FbGVtZW50cyA9IGRvY3VtZW50W2dldEVsZW1lbnRzQnlUYWdOYW1lXSgnKicpLFxuICBcbiAgICAvLyBJbml0IERBVEEgQVBJXG4gICAgaW5pdGlhbGl6ZURhdGFBUEkgPSBmdW5jdGlvbiggY29tcG9uZW50LCBjb25zdHJ1Y3RvciwgZGF0YUF0dHJpYnV0ZSwgY29sbGVjdGlvbiApe1xuICAgICAgdmFyIGxvb2tVcCA9IGNvbGxlY3Rpb24gJiYgY29sbGVjdGlvbltsZW5ndGhdID8gY29sbGVjdGlvbiA6IEFsbERPTUVsZW1lbnRzO1xuICAgICAgZm9yICh2YXIgaT0wOyBpIDwgbG9va1VwW2xlbmd0aF07IGkrKykge1xuICAgICAgICB2YXIgYXR0clZhbHVlID0gbG9va1VwW2ldW2dldEF0dHJpYnV0ZV0oZGF0YUF0dHJpYnV0ZSksIGV4cGVjdGVkQXR0clZhbHVlID0gY29tcG9uZW50LnJlcGxhY2UoL3NweS9pLCcnKVt0b0xvd2VyQ2FzZV0oKTtcbiAgICAgICAgaWYgKCBhdHRyVmFsdWUgJiYgY29tcG9uZW50ID09PSBzdHJpbmdCdXR0b24gJiYgKCBhdHRyVmFsdWVbaW5kZXhPZl0oZXhwZWN0ZWRBdHRyVmFsdWUpID4gLTEgKSAvLyBkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIlxuICAgICAgICAgICAgfHwgYXR0clZhbHVlID09PSBleHBlY3RlZEF0dHJWYWx1ZSApIHsgLy8gYWxsIG90aGVyIGNvbXBvbmVudHNcbiAgICAgICAgICBuZXcgY29uc3RydWN0b3IobG9va1VwW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sICBcbiAgXG4gICAgLy8gdGFiIC8gY29sbGFwc2Ugc3R1ZmZcbiAgICB0YXJnZXRzUmVnID0gL15cXCMoLikrJC8sXG4gICAgZ2V0T3V0ZXJIZWlnaHQgPSBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHZhciBjaGlsZFN0eWxlID0gY2hpbGQgJiYgKGNoaWxkLmN1cnJlbnRTdHlsZSB8fCBnbG9iYWxPYmplY3QuZ2V0Q29tcHV0ZWRTdHlsZShjaGlsZCkpLCBcbiAgICAgICAgYnRwID0gL3B4Ly50ZXN0KGNoaWxkU3R5bGUuYm9yZGVyVG9wV2lkdGgpID8gTWF0aC5yb3VuZChjaGlsZFN0eWxlLmJvcmRlclRvcFdpZHRoLnJlcGxhY2UoJ3B4JywnJykpIDogMCxcbiAgICAgICAgYnRiID0gL3B4Ly50ZXN0KGNoaWxkU3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpID8gTWF0aC5yb3VuZChjaGlsZFN0eWxlLmJvcmRlckJvdHRvbVdpZHRoLnJlcGxhY2UoJ3B4JywnJykpIDogMCxcbiAgICAgICAgbXRwID0gL3B4Ly50ZXN0KGNoaWxkU3R5bGUubWFyZ2luVG9wKSA/IE1hdGgucm91bmQoY2hpbGRTdHlsZS5tYXJnaW5Ub3AucmVwbGFjZSgncHgnLCcnKSkgOiAwLFxuICAgICAgICBtYnAgPSAvcHgvLnRlc3QoY2hpbGRTdHlsZS5tYXJnaW5Cb3R0b20pID8gTWF0aC5yb3VuZChjaGlsZFN0eWxlLm1hcmdpbkJvdHRvbS5yZXBsYWNlKCdweCcsJycpKSA6IDA7XG4gICAgICByZXR1cm4gY2hpbGRbY2xpZW50SGVpZ2h0XSArIHBhcnNlSW50KCBidHAgKSArIHBhcnNlSW50KCBidGIgKSArIHBhcnNlSW50KCBtdHAgKSArIHBhcnNlSW50KCBtYnAgKTtcbiAgICB9LFxuICAgIGdldE1heEhlaWdodCA9IGZ1bmN0aW9uKHBhcmVudCkgeyAvLyBnZXQgY29sbGFwc2UgdHJ1ZUhlaWdodCBhbmQgYm9yZGVyXG4gICAgICB2YXIgcGFyZW50SGVpZ2h0ID0gMDtcbiAgICAgIGZvciAodmFyIGsgPSAwLCBsbCA9IHBhcmVudC5jaGlsZHJlbltsZW5ndGhdOyBrIDwgbGw7IGsrKykge1xuICAgICAgICBwYXJlbnRIZWlnaHQgKz0gZ2V0T3V0ZXJIZWlnaHQocGFyZW50LmNoaWxkcmVuW2tdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJlbnRIZWlnaHQ7XG4gICAgfSxcbiAgXG4gICAgLy8gdG9vbHRpcCAvIHBvcG92ZXIgc3R1ZmZcbiAgICBpc0VsZW1lbnRJblZpZXdwb3J0ID0gZnVuY3Rpb24oZWxlbWVudCkgeyAvLyBjaGVjayBpZiB0aGlzLnRvb2x0aXAgaXMgaW4gdmlld3BvcnRcbiAgICAgIHZhciByZWN0ID0gZWxlbWVudFtnZXRCb3VuZGluZ0NsaWVudFJlY3RdKCk7XG4gICAgICByZXR1cm4gKCByZWN0W3RvcF0gPj0gMCAmJiByZWN0W2xlZnRdID49IDAgJiZcbiAgICAgICAgcmVjdFtib3R0b21dIDw9IChnbG9iYWxPYmplY3RbaW5uZXJIZWlnaHRdIHx8IGRvY1tjbGllbnRIZWlnaHRdKSAmJlxuICAgICAgICByZWN0W3JpZ2h0XSA8PSAoZ2xvYmFsT2JqZWN0W2lubmVyV2lkdGhdIHx8IGRvY1tjbGllbnRXaWR0aF0pIClcbiAgICB9LFxuICAgIGdldFNjcm9sbCA9IGZ1bmN0aW9uKCkgeyAvLyBhbHNvIEFmZml4IGFuZCBTY3JvbGxTcHkgdXNlcyBpdFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeSA6IGdsb2JhbE9iamVjdC5wYWdlWU9mZnNldCB8fCBkb2Nbc2Nyb2xsVG9wXSxcbiAgICAgICAgeCA6IGdsb2JhbE9iamVjdC5wYWdlWE9mZnNldCB8fCBkb2Nbc2Nyb2xsTGVmdF1cbiAgICAgIH1cbiAgICB9LFxuICAgIHN0eWxlVGlwID0gZnVuY3Rpb24obGluayxlbGVtZW50LHBvc2l0aW9uLHBhcmVudCkgeyAvLyBib3RoIHBvcG92ZXJzIGFuZCB0b29sdGlwc1xuICAgICAgdmFyIHJlY3QgPSBsaW5rW2dldEJvdW5kaW5nQ2xpZW50UmVjdF0oKSwgXG4gICAgICAgICAgc2Nyb2xsID0gcGFyZW50ID09PSBib2R5ID8gZ2V0U2Nyb2xsKCkgOiB7IHg6IHBhcmVudFtvZmZzZXRMZWZ0XSArIHBhcmVudFtzY3JvbGxMZWZ0XSwgeTogcGFyZW50W29mZnNldFRvcF0gKyBwYXJlbnRbc2Nyb2xsVG9wXSB9LFxuICAgICAgICAgIGxpbmtEaW1lbnNpb25zID0geyB3OiByZWN0W3JpZ2h0XSAtIHJlY3RbbGVmdF0sIGg6IHJlY3RbYm90dG9tXSAtIHJlY3RbdG9wXSB9LFxuICAgICAgICAgIGVsZW1lbnREaW1lbnNpb25zID0geyB3IDogZWxlbWVudFtvZmZzZXRXaWR0aF0sIGg6IGVsZW1lbnRbb2Zmc2V0SGVpZ2h0XSB9O1xuICBcbiAgICAgIC8vIGFwcGx5IHN0eWxpbmcgdG8gdG9vbHRpcCBvciBwb3BvdmVyXG4gICAgICBpZiAoIHBvc2l0aW9uID09PSB0b3AgKSB7IC8vIFRPUFxuICAgICAgICBlbGVtZW50W3N0eWxlXVt0b3BdID0gcmVjdFt0b3BdICsgc2Nyb2xsLnkgLSBlbGVtZW50RGltZW5zaW9ucy5oICsgJ3B4JztcbiAgICAgICAgZWxlbWVudFtzdHlsZV1bbGVmdF0gPSByZWN0W2xlZnRdICsgc2Nyb2xsLnggLSBlbGVtZW50RGltZW5zaW9ucy53LzIgKyBsaW5rRGltZW5zaW9ucy53LzIgKyAncHgnXG4gIFxuICAgICAgfSBlbHNlIGlmICggcG9zaXRpb24gPT09IGJvdHRvbSApIHsgLy8gQk9UVE9NXG4gICAgICAgIGVsZW1lbnRbc3R5bGVdW3RvcF0gPSByZWN0W3RvcF0gKyBzY3JvbGwueSArIGxpbmtEaW1lbnNpb25zLmggKyAncHgnO1xuICAgICAgICBlbGVtZW50W3N0eWxlXVtsZWZ0XSA9IHJlY3RbbGVmdF0gKyBzY3JvbGwueCAtIGVsZW1lbnREaW1lbnNpb25zLncvMiArIGxpbmtEaW1lbnNpb25zLncvMiArICdweCc7XG4gIFxuICAgICAgfSBlbHNlIGlmICggcG9zaXRpb24gPT09IGxlZnQgKSB7IC8vIExFRlRcbiAgICAgICAgZWxlbWVudFtzdHlsZV1bdG9wXSA9IHJlY3RbdG9wXSArIHNjcm9sbC55IC0gZWxlbWVudERpbWVuc2lvbnMuaC8yICsgbGlua0RpbWVuc2lvbnMuaC8yICsgJ3B4JztcbiAgICAgICAgZWxlbWVudFtzdHlsZV1bbGVmdF0gPSByZWN0W2xlZnRdICsgc2Nyb2xsLnggLSBlbGVtZW50RGltZW5zaW9ucy53ICsgJ3B4JztcbiAgXG4gICAgICB9IGVsc2UgaWYgKCBwb3NpdGlvbiA9PT0gcmlnaHQgKSB7IC8vIFJJR0hUXG4gICAgICAgIGVsZW1lbnRbc3R5bGVdW3RvcF0gPSByZWN0W3RvcF0gKyBzY3JvbGwueSAtIGVsZW1lbnREaW1lbnNpb25zLmgvMiArIGxpbmtEaW1lbnNpb25zLmgvMiArICdweCc7XG4gICAgICAgIGVsZW1lbnRbc3R5bGVdW2xlZnRdID0gcmVjdFtsZWZ0XSArIHNjcm9sbC54ICsgbGlua0RpbWVuc2lvbnMudyArICdweCc7XG4gICAgICB9XG4gICAgICBlbGVtZW50LmNsYXNzTmFtZVtpbmRleE9mXShwb3NpdGlvbikgPT09IC0xICYmIChlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UodGlwUG9zaXRpb25zLHBvc2l0aW9uKSk7XG4gICAgfSxcbiAgICB1cGRhdGVQbGFjZW1lbnQgPSBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgcmV0dXJuIHBvc2l0aW9uID09PSB0b3AgPyBib3R0b20gOiAvLyB0b3BcbiAgICAgICAgICAgICBwb3NpdGlvbiA9PT0gYm90dG9tID8gdG9wIDogLy8gYm90dG9tXG4gICAgICAgICAgICAgcG9zaXRpb24gPT09IGxlZnQgPyByaWdodCA6IC8vIGxlZnRcbiAgICAgICAgICAgICBwb3NpdGlvbiA9PT0gcmlnaHQgPyBsZWZ0IDogcG9zaXRpb247IC8vIHJpZ2h0XG4gICAgfTtcbiAgXG4gIFxuICBcbiAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgQWZmaXhcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIFxuICAvL0FGRklYIERFRklOSVRJT05cbiAgdmFyIEFmZml4ID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICBcbiAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG4gICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgXG4gICAgLy8gcmVhZCBEQVRBIEFQSVxuICAgIHZhciB0YXJnZXREYXRhICAgICAgICA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhVGFyZ2V0KSxcbiAgICAgICAgb2Zmc2V0VG9wRGF0YSAgICAgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YU9mZnNldFRvcCksXG4gICAgICAgIG9mZnNldEJvdHRvbURhdGEgID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFPZmZzZXRCb3R0b20pLFxuICAgICAgICBcbiAgICAgICAgLy8gY29tcG9uZW50IHNwZWNpZmljIHN0cmluZ3NcbiAgICAgICAgYWZmaXggPSAnYWZmaXgnLCBhZmZpeGVkID0gJ2FmZml4ZWQnLCBmbiA9ICdmdW5jdGlvbicsIHVwZGF0ZSA9ICd1cGRhdGUnLFxuICAgICAgICBhZmZpeFRvcCA9ICdhZmZpeC10b3AnLCBhZmZpeGVkVG9wID0gJ2FmZml4ZWQtdG9wJyxcbiAgICAgICAgYWZmaXhCb3R0b20gPSAnYWZmaXgtYm90dG9tJywgYWZmaXhlZEJvdHRvbSA9ICdhZmZpeGVkLWJvdHRvbSc7XG4gIFxuICAgIHRoaXNbdGFyZ2V0XSA9IG9wdGlvbnNbdGFyZ2V0XSA/IHF1ZXJ5RWxlbWVudChvcHRpb25zW3RhcmdldF0pIDogcXVlcnlFbGVtZW50KHRhcmdldERhdGEpIHx8IG51bGw7IC8vIHRhcmdldCBpcyBhbiBvYmplY3RcbiAgICB0aGlzW29mZnNldFRvcF0gPSBvcHRpb25zW29mZnNldFRvcF0gPyBvcHRpb25zW29mZnNldFRvcF0gOiBwYXJzZUludChvZmZzZXRUb3BEYXRhKSB8fCAwOyAvLyBvZmZzZXQgb3B0aW9uIGlzIGFuIGludGVnZXIgbnVtYmVyIG9yIGZ1bmN0aW9uIHRvIGRldGVybWluZSB0aGF0IG51bWJlclxuICAgIHRoaXNbb2Zmc2V0Qm90dG9tXSA9IG9wdGlvbnNbb2Zmc2V0Qm90dG9tXSA/IG9wdGlvbnNbb2Zmc2V0Qm90dG9tXTogcGFyc2VJbnQob2Zmc2V0Qm90dG9tRGF0YSkgfHwgMDtcbiAgXG4gICAgaWYgKCAhdGhpc1t0YXJnZXRdICYmICEoIHRoaXNbb2Zmc2V0VG9wXSB8fCB0aGlzW29mZnNldEJvdHRvbV0gKSApIHsgcmV0dXJuOyB9IC8vIGludmFsaWRhdGVcbiAgXG4gICAgLy8gaW50ZXJuYWwgYmluZFxuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgXG4gICAgICAvLyBjb25zdGFudHNcbiAgICAgIHJlc2l6ZURlbGF5ID0gIXN1cHBvcnRUcmFuc2l0aW9ucyA/IDUwMCA6IDUwLCAvLyBmb3IgbGVnYWN5IGJyb3dzZXJzIHdlIHRyeSB0byBsaW1pdCB0aGUgaW50ZXJ2YWwgZm9yIHVwZGF0aW5nIHRoZSBBZmZpeFxuICAgICAgcGluT2Zmc2V0VG9wLCBwaW5PZmZzZXRCb3R0b20sIG1heFNjcm9sbCwgc2Nyb2xsWSwgcGlubmVkVG9wLCBwaW5uZWRCb3R0b20sXG4gICAgICBhZmZpeGVkVG9Ub3AgPSBmYWxzZSwgYWZmaXhlZFRvQm90dG9tID0gZmFsc2UsXG4gICAgICBcbiAgICAgIC8vIHByaXZhdGUgbWV0aG9kcyBcbiAgICAgIGdldE1heFNjcm9sbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCggYm9keVtzY3JvbGxIZWlnaHRdLCBib2R5W29mZnNldEhlaWdodF0sIGRvY1tjbGllbnRIZWlnaHRdLCBkb2Nbc2Nyb2xsSGVpZ2h0XSwgZG9jW29mZnNldEhlaWdodF0gKTtcbiAgICAgIH0sXG4gICAgICBnZXRPZmZzZXRUb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICggc2VsZlt0YXJnZXRdICE9PSBudWxsICkge1xuICAgICAgICAgIHJldHVybiBzZWxmW3RhcmdldF1bZ2V0Qm91bmRpbmdDbGllbnRSZWN0XSgpW3RvcF0gKyBzY3JvbGxZO1xuICAgICAgICB9IGVsc2UgaWYgKCBzZWxmW29mZnNldFRvcF0gKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHR5cGVvZiBzZWxmW29mZnNldFRvcF0gPT09IGZuID8gc2VsZltvZmZzZXRUb3BdKCkgOiBzZWxmW29mZnNldFRvcF0gfHwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnZXRPZmZzZXRCb3R0b20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICggc2VsZltvZmZzZXRCb3R0b21dICkge1xuICAgICAgICAgIHJldHVybiBtYXhTY3JvbGwgLSBlbGVtZW50W29mZnNldEhlaWdodF0gLSBwYXJzZUludCggdHlwZW9mIHNlbGZbb2Zmc2V0Qm90dG9tXSA9PT0gZm4gPyBzZWxmW29mZnNldEJvdHRvbV0oKSA6IHNlbGZbb2Zmc2V0Qm90dG9tXSB8fCAwICk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjaGVja1Bvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXhTY3JvbGwgPSBnZXRNYXhTY3JvbGwoKTtcbiAgICAgICAgc2Nyb2xsWSA9IHBhcnNlSW50KGdldFNjcm9sbCgpLnksMCk7XG4gICAgICAgIHBpbk9mZnNldFRvcCA9IGdldE9mZnNldFRvcCgpO1xuICAgICAgICBwaW5PZmZzZXRCb3R0b20gPSBnZXRPZmZzZXRCb3R0b20oKTsgXG4gICAgICAgIHBpbm5lZFRvcCA9ICggcGFyc2VJbnQocGluT2Zmc2V0VG9wKSAtIHNjcm9sbFkgPCAwKSAmJiAoc2Nyb2xsWSA+IHBhcnNlSW50KHBpbk9mZnNldFRvcCkgKTtcbiAgICAgICAgcGlubmVkQm90dG9tID0gKCBwYXJzZUludChwaW5PZmZzZXRCb3R0b20pIC0gc2Nyb2xsWSA8IDApICYmIChzY3JvbGxZID4gcGFyc2VJbnQocGluT2Zmc2V0Qm90dG9tKSApO1xuICAgICAgfSxcbiAgICAgIHBpblRvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCAhYWZmaXhlZFRvVG9wICYmICFoYXNDbGFzcyhlbGVtZW50LGFmZml4KSApIHsgLy8gb24gbG9hZGluZyBhIHBhZ2UgaGFsZndheSBzY3JvbGxlZCB0aGVzZSBldmVudHMgZG9uJ3QgdHJpZ2dlciBpbiBDaHJvbWVcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGFmZml4LCBhZmZpeCk7XG4gICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeFRvcCwgYWZmaXgpO1xuICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsYWZmaXgpO1xuICAgICAgICAgIGFmZml4ZWRUb1RvcCA9IHRydWU7XG4gICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeGVkLCBhZmZpeCk7XG4gICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBhZmZpeGVkVG9wLCBhZmZpeCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1blBpblRvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCBhZmZpeGVkVG9Ub3AgJiYgaGFzQ2xhc3MoZWxlbWVudCxhZmZpeCkgKSB7XG4gICAgICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCxhZmZpeCk7XG4gICAgICAgICAgYWZmaXhlZFRvVG9wID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwaW5Cb3R0b20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICggIWFmZml4ZWRUb0JvdHRvbSAmJiAhaGFzQ2xhc3MoZWxlbWVudCwgYWZmaXhCb3R0b20pICkge1xuICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgYWZmaXgsIGFmZml4KTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGFmZml4Qm90dG9tLCBhZmZpeCk7XG4gICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCxhZmZpeEJvdHRvbSk7XG4gICAgICAgICAgYWZmaXhlZFRvQm90dG9tID0gdHJ1ZTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGFmZml4ZWQsIGFmZml4KTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGFmZml4ZWRCb3R0b20sIGFmZml4KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVuUGluQm90dG9tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIGFmZml4ZWRUb0JvdHRvbSAmJiBoYXNDbGFzcyhlbGVtZW50LGFmZml4Qm90dG9tKSApIHtcbiAgICAgICAgICByZW1vdmVDbGFzcyhlbGVtZW50LGFmZml4Qm90dG9tKTtcbiAgICAgICAgICBhZmZpeGVkVG9Cb3R0b20gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVwZGF0ZVBpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCBwaW5uZWRCb3R0b20gKSB7XG4gICAgICAgICAgaWYgKCBwaW5uZWRUb3AgKSB7IHVuUGluVG9wKCk7IH1cbiAgICAgICAgICBwaW5Cb3R0b20oKTsgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5QaW5Cb3R0b20oKTtcbiAgICAgICAgICBpZiAoIHBpbm5lZFRvcCApIHsgcGluVG9wKCk7IH0gXG4gICAgICAgICAgZWxzZSB7IHVuUGluVG9wKCk7IH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgXG4gICAgLy8gcHVibGljIG1ldGhvZFxuICAgIHRoaXNbdXBkYXRlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrUG9zaXRpb24oKTtcbiAgICAgIHVwZGF0ZVBpbigpOyBcbiAgICB9O1xuICBcbiAgICAvLyBpbml0XG4gICAgaWYgKCAhKHN0cmluZ0FmZml4IGluIGVsZW1lbnQgKSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2VcbiAgICAgIG9uKCBnbG9iYWxPYmplY3QsIHNjcm9sbEV2ZW50LCB0aGlzW3VwZGF0ZV0gKTtcbiAgICAgIG9uKCBnbG9iYWxPYmplY3QsIHJlc2l6ZUV2ZW50LCBmdW5jdGlvbigpIHsgc2V0VGltZW91dChmdW5jdGlvbigpeyBzZWxmW3VwZGF0ZV0oKTsgfSwgcmVzaXplRGVsYXkpOyB9KTtcbiAgICB9XG4gICAgZWxlbWVudFtzdHJpbmdBZmZpeF0gPSB0aGlzO1xuICBcbiAgICB0aGlzW3VwZGF0ZV0oKTtcbiAgfTtcbiAgXG4gIC8vIEFGRklYIERBVEEgQVBJXG4gIC8vID09PT09PT09PT09PT09PT09XG4gIGluaXRpYWxpemVEYXRhQVBJKCBzdHJpbmdBZmZpeCwgQWZmaXgsIGRhdGFTcHkgKTtcbiAgXG4gIFxuICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBBbGVydFxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgXG4gIC8vIEFMRVJUIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PVxuICB2YXIgQWxlcnQgPSBmdW5jdGlvbiggZWxlbWVudCApIHtcbiAgICBcbiAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG4gICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcbiAgXG4gICAgLy8gYmluZCwgdGFyZ2V0IGFsZXJ0LCBkdXJhdGlvbiBhbmQgc3R1ZmZcbiAgICB2YXIgc2VsZiA9IHRoaXMsIGNvbXBvbmVudCA9ICdhbGVydCcsXG4gICAgICBhbGVydCA9IGdldENsb3Nlc3QoZWxlbWVudCwnLicrY29tcG9uZW50KSxcbiAgICAgIC8vIGhhbmRsZXJzXG4gICAgICBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZVt0YXJnZXRdO1xuICAgICAgICBldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0W2hhc0F0dHJpYnV0ZV0oZGF0YURpc21pc3MpID8gZXZlbnRUYXJnZXQgOiBldmVudFRhcmdldFtwYXJlbnROb2RlXTtcbiAgICAgICAgaWYgKGV2ZW50VGFyZ2V0ICYmIGV2ZW50VGFyZ2V0W2hhc0F0dHJpYnV0ZV0oZGF0YURpc21pc3MpKSB7IC8vIHdlIGRvdWJsZSBjaGVjayB0aGUgZGF0YSBhdHRyaWJ1dGUsIGl0J3MgaW1wb3J0YW50XG4gICAgICAgICAgYWxlcnQgPSBnZXRDbG9zZXN0KGV2ZW50VGFyZ2V0LCcuJytjb21wb25lbnQpO1xuICAgICAgICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoJ1snK2RhdGFEaXNtaXNzKyc9XCInK2NvbXBvbmVudCsnXCJdJyxhbGVydCk7XG4gICAgICAgICAgKGVsZW1lbnQgPT09IGV2ZW50VGFyZ2V0IHx8IGVsZW1lbnQgPT09IGV2ZW50VGFyZ2V0W3BhcmVudE5vZGVdKSAmJiBhbGVydCAmJiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0cmFuc2l0aW9uRW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoYWxlcnQsIGNsb3NlZEV2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICBvZmYoZWxlbWVudCwgY2xpY2tFdmVudCwgY2xpY2tIYW5kbGVyKTsgLy8gZGV0YWNoIGl0J3MgbGlzdGVuZXJcbiAgICAgICAgYWxlcnRbcGFyZW50Tm9kZV0ucmVtb3ZlQ2hpbGQoYWxlcnQpO1xuICAgICAgfTtcbiAgICBcbiAgICAvLyBwdWJsaWMgbWV0aG9kXG4gICAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCBhbGVydCAmJiBlbGVtZW50ICYmIGhhc0NsYXNzKGFsZXJ0LGluQ2xhc3MpICkge1xuICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGFsZXJ0LCBjbG9zZUV2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICByZW1vdmVDbGFzcyhhbGVydCxpbkNsYXNzKTtcbiAgICAgICAgKGZ1bmN0aW9uKCl7IGFsZXJ0ICYmIGVtdWxhdGVUcmFuc2l0aW9uRW5kKGFsZXJ0LHRyYW5zaXRpb25FbmRIYW5kbGVyKTt9KCkpXG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgLy8gaW5pdFxuICAgIGlmICggIShzdHJpbmdBbGVydCBpbiBlbGVtZW50ICkgKSB7IC8vIHByZXZlbnQgYWRkaW5nIGV2ZW50IGhhbmRsZXJzIHR3aWNlXG4gICAgICBvbihlbGVtZW50LCBjbGlja0V2ZW50LCBjbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICBlbGVtZW50W3N0cmluZ0FsZXJ0XSA9IHRoaXM7XG4gIH07XG4gIFxuICAvLyBBTEVSVCBEQVRBIEFQSVxuICAvLyA9PT09PT09PT09PT09PVxuICBpbml0aWFsaXplRGF0YUFQSSAoIHN0cmluZ0FsZXJ0LCBBbGVydCwgZGF0YURpc21pc3MgKTtcbiAgXG4gIFxuICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBCdXR0b25cbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgXG4gIC8vIEJVVFRPTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT1cbiAgdmFyIEJ1dHRvbiA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb24gKSB7XG4gIFxuICAgIC8vIGluaXRpYWxpemF0aW9uIGVsZW1lbnRcbiAgICBlbGVtZW50ID0gcXVlcnlFbGVtZW50KGVsZW1lbnQpO1xuICBcbiAgICAvLyBzZXQgb3B0aW9uXG4gICAgb3B0aW9uID0gb3B0aW9uIHx8IG51bGw7XG4gIFxuICAgIC8vIGNvbnN0YW50XG4gICAgdmFyIHRvZ2dsZWQgPSBmYWxzZSwgLy8gdG9nZ2xlZCBtYWtlcyBzdXJlIHRvIHByZXZlbnQgdHJpZ2dlcmluZyB0d2ljZSB0aGUgY2hhbmdlLmJzLmJ1dHRvbiBldmVudHNcbiAgXG4gICAgICAgIC8vIHN0cmluZ3NcbiAgICAgICAgY29tcG9uZW50ID0gJ2J1dHRvbicsXG4gICAgICAgIGNoZWNrZWQgPSAnY2hlY2tlZCcsXG4gICAgICAgIHJlc2V0ID0gJ3Jlc2V0JyxcbiAgICAgICAgTEFCRUwgPSAnTEFCRUwnLFxuICAgICAgICBJTlBVVCA9ICdJTlBVVCcsXG4gIFxuICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG4gICAgICBzZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoICEhIG9wdGlvbiAmJiBvcHRpb24gIT09IHJlc2V0ICkge1xuICAgICAgICAgIGlmICggb3B0aW9uID09PSBsb2FkaW5nICkge1xuICAgICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCxkaXNhYmxlZCk7XG4gICAgICAgICAgICBlbGVtZW50W3NldEF0dHJpYnV0ZV0oZGlzYWJsZWQsZGlzYWJsZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50W3NldEF0dHJpYnV0ZV0oZGF0YU9yaWdpbmFsVGV4dCwgZWxlbWVudC5pbm5lckhUTUwucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpKTsgLy8gdHJpbSB0aGUgdGV4dFxuICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKCdkYXRhLScrb3B0aW9uKyctdGV4dCcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVzZXRTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFPcmlnaW5hbFRleHQpKSB7XG4gICAgICAgICAgaWYgKCBoYXNDbGFzcyhlbGVtZW50LGRpc2FibGVkKSB8fCBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGlzYWJsZWQpID09PSBkaXNhYmxlZCApIHtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQsZGlzYWJsZWQpO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoZGlzYWJsZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhT3JpZ2luYWxUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRvZ2dsZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVbdGFyZ2V0XVtwYXJlbnROb2RlXSxcbiAgICAgICAgICBsYWJlbCA9IGVbdGFyZ2V0XS50YWdOYW1lID09PSBMQUJFTCA/IGVbdGFyZ2V0XSA6IHBhcmVudC50YWdOYW1lID09PSBMQUJFTCA/IHBhcmVudCA6IG51bGw7IC8vIHRoZSAuYnRuIGxhYmVsXG4gIFxuICAgICAgICBpZiAoICFsYWJlbCApIHJldHVybjsgLy9yZWFjdCBpZiBhIGxhYmVsIG9yIGl0cyBpbW1lZGlhdGUgY2hpbGQgaXMgY2xpY2tlZFxuICBcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gdGhpcywgLy8gdGhlIGJ1dHRvbiBncm91cCwgdGhlIHRhcmdldCBvZiB0aGUgaGFuZGxlciBmdW5jdGlvblxuICAgICAgICAgIGxhYmVscyA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZXZlbnRUYXJnZXQsJ2J0bicpLCAvLyBhbGwgdGhlIGJ1dHRvbiBncm91cCBidXR0b25zXG4gICAgICAgICAgaW5wdXQgPSBsYWJlbFtnZXRFbGVtZW50c0J5VGFnTmFtZV0oSU5QVVQpWzBdO1xuICBcbiAgICAgICAgaWYgKCAhaW5wdXQgKSByZXR1cm47IC8vcmV0dXJuIGlmIG5vIGlucHV0IGZvdW5kXG4gIFxuICAgICAgICAvLyBtYW5hZ2UgdGhlIGRvbSBtYW5pcHVsYXRpb25cbiAgICAgICAgaWYgKCBpbnB1dC50eXBlID09PSAnY2hlY2tib3gnICkgeyAvL2NoZWNrYm94ZXNcbiAgICAgICAgICBpZiAoICFpbnB1dFtjaGVja2VkXSApIHtcbiAgICAgICAgICAgIGFkZENsYXNzKGxhYmVsLGFjdGl2ZSk7XG4gICAgICAgICAgICBpbnB1dFtnZXRBdHRyaWJ1dGVdKGNoZWNrZWQpO1xuICAgICAgICAgICAgaW5wdXRbc2V0QXR0cmlidXRlXShjaGVja2VkLGNoZWNrZWQpO1xuICAgICAgICAgICAgaW5wdXRbY2hlY2tlZF0gPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhsYWJlbCxhY3RpdmUpO1xuICAgICAgICAgICAgaW5wdXRbZ2V0QXR0cmlidXRlXShjaGVja2VkKTtcbiAgICAgICAgICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZShjaGVja2VkKTtcbiAgICAgICAgICAgIGlucHV0W2NoZWNrZWRdID0gZmFsc2U7XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICBpZiAoIXRvZ2dsZWQpIHsgLy8gcHJldmVudCB0cmlnZ2VyaW5nIHRoZSBldmVudCB0d2ljZVxuICAgICAgICAgICAgdG9nZ2xlZCA9IHRydWU7XG4gICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGlucHV0LCBjaGFuZ2VFdmVudCwgY29tcG9uZW50KTsgLy90cmlnZ2VyIHRoZSBjaGFuZ2UgZm9yIHRoZSBpbnB1dFxuICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBjaGFuZ2VFdmVudCwgY29tcG9uZW50KTsgLy90cmlnZ2VyIHRoZSBjaGFuZ2UgZm9yIHRoZSBidG4tZ3JvdXBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmICggaW5wdXQudHlwZSA9PT0gJ3JhZGlvJyAmJiAhdG9nZ2xlZCApIHsgLy8gcmFkaW8gYnV0dG9uc1xuICAgICAgICAgIGlmICggIWlucHV0W2NoZWNrZWRdICkgeyAvLyBkb24ndCB0cmlnZ2VyIGlmIGFscmVhZHkgYWN0aXZlXG4gICAgICAgICAgICBhZGRDbGFzcyhsYWJlbCxhY3RpdmUpO1xuICAgICAgICAgICAgaW5wdXRbc2V0QXR0cmlidXRlXShjaGVja2VkLGNoZWNrZWQpO1xuICAgICAgICAgICAgaW5wdXRbY2hlY2tlZF0gPSB0cnVlO1xuICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChpbnB1dCwgY2hhbmdlRXZlbnQsIGNvbXBvbmVudCk7IC8vdHJpZ2dlciB0aGUgY2hhbmdlIGZvciB0aGUgaW5wdXRcbiAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgY2hhbmdlRXZlbnQsIGNvbXBvbmVudCk7IC8vdHJpZ2dlciB0aGUgY2hhbmdlIGZvciB0aGUgYnRuLWdyb3VwXG4gIFxuICAgICAgICAgICAgdG9nZ2xlZCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGwgPSBsYWJlbHNbbGVuZ3RoXTsgaTxsbDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciBvdGhlckxhYmVsID0gbGFiZWxzW2ldLCBvdGhlcklucHV0ID0gb3RoZXJMYWJlbFtnZXRFbGVtZW50c0J5VGFnTmFtZV0oSU5QVVQpWzBdO1xuICAgICAgICAgICAgICBpZiAoIG90aGVyTGFiZWwgIT09IGxhYmVsICYmIGhhc0NsYXNzKG90aGVyTGFiZWwsYWN0aXZlKSApICB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3Mob3RoZXJMYWJlbCxhY3RpdmUpO1xuICAgICAgICAgICAgICAgIG90aGVySW5wdXQucmVtb3ZlQXR0cmlidXRlKGNoZWNrZWQpO1xuICAgICAgICAgICAgICAgIG90aGVySW5wdXRbY2hlY2tlZF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG90aGVySW5wdXQsIGNoYW5nZUV2ZW50LCBjb21wb25lbnQpOyAvLyB0cmlnZ2VyIHRoZSBjaGFuZ2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgdG9nZ2xlZCA9IGZhbHNlOyB9LCA1MCApO1xuICAgICAgfTtcbiAgXG4gICAgLy8gaW5pdFxuICAgIGlmICggaGFzQ2xhc3MoZWxlbWVudCwnYnRuJykgKSB7IC8vIHdoZW4gQnV0dG9uIHRleHQgaXMgdXNlZCB3ZSBleGVjdXRlIGl0IGFzIGFuIGluc3RhbmNlIG1ldGhvZFxuICAgICAgaWYgKCBvcHRpb24gIT09IG51bGwgKSB7XG4gICAgICAgIGlmICggb3B0aW9uICE9PSByZXNldCApIHsgc2V0U3RhdGUoKTsgfSBcbiAgICAgICAgZWxzZSB7IHJlc2V0U3RhdGUoKTsgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIGhhc0NsYXNzKGVsZW1lbnQsJ2J0bi1ncm91cCcpICkge1xuICAgICAgaWYgKCAhKCBzdHJpbmdCdXR0b24gaW4gZWxlbWVudCApICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuICAgICAgICBvbiggZWxlbWVudCwgY2xpY2tFdmVudCwgdG9nZ2xlICk7XG4gICAgICB9XG4gICAgICBlbGVtZW50W3N0cmluZ0J1dHRvbl0gPSB0aGlzO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEJVVFRPTiBEQVRBIEFQSVxuICAvLyA9PT09PT09PT09PT09PT09PVxuICBpbml0aWFsaXplRGF0YUFQSSggc3RyaW5nQnV0dG9uLCBCdXR0b24sIGRhdGFUb2dnbGUgKTtcbiAgXG4gIFxuICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBDYXJvdXNlbFxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgXG4gIC8vIENBUk9VU0VMIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PVxuICB2YXIgQ2Fyb3VzZWwgPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucyApIHtcbiAgXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoIGVsZW1lbnQgKTtcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgXG4gICAgLy8gREFUQSBBUElcbiAgICB2YXIgaW50ZXJ2YWxEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFJbnRlcnZhbCkgPT09ICdmYWxzZScgPyBmYWxzZSA6IHBhcnNlSW50KGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhSW50ZXJ2YWwpKSB8fCA1MDAwLCAvLyBib290c3RyYXAgY2Fyb3VzZWwgZGVmYXVsdCBpbnRlcnZhbFxuICAgICAgICBwYXVzZURhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YVBhdXNlKSA9PT0gaG92ZXJFdmVudCB8fCBmYWxzZSxcbiAgICAgICAga2V5Ym9hcmREYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFLZXlib2FyZCkgPT09ICd0cnVlJyB8fCBmYWxzZSxcbiAgICAgIFxuICAgICAgICAvLyBzdHJpbmdzXG4gICAgICAgIGNvbXBvbmVudCA9ICdjYXJvdXNlbCcsXG4gICAgICAgIHBhdXNlZCA9ICdwYXVzZWQnLFxuICAgICAgICBkaXJlY3Rpb24gPSAnZGlyZWN0aW9uJyxcbiAgICAgICAgZGF0YVNsaWRlVG8gPSAnZGF0YS1zbGlkZS10byc7IFxuICBcbiAgICB0aGlzW2tleWJvYXJkXSA9IG9wdGlvbnNba2V5Ym9hcmRdID09PSB0cnVlIHx8IGtleWJvYXJkRGF0YTtcbiAgICB0aGlzW3BhdXNlXSA9IChvcHRpb25zW3BhdXNlXSA9PT0gaG92ZXJFdmVudCB8fCBwYXVzZURhdGEpID8gaG92ZXJFdmVudCA6IGZhbHNlOyAvLyBmYWxzZSAvIGhvdmVyXG4gIFxuICAgIGlmICggISggb3B0aW9uc1tpbnRlcnZhbF0gfHwgaW50ZXJ2YWxEYXRhICkgKSB7IC8vIGRldGVybWluZSBzbGlkZSBpbnRlcnZhbFxuICAgICAgdGhpc1tpbnRlcnZhbF0gPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpc1tpbnRlcnZhbF0gPSBwYXJzZUludChvcHRpb25zW2ludGVydmFsXSkgfHwgaW50ZXJ2YWxEYXRhOyAvLyBkZWZhdWx0IHNsaWRlIGludGVydmFsXG4gICAgfVxuICBcbiAgICAvLyBiaW5kLCBldmVudCB0YXJnZXRzXG4gICAgdmFyIHNlbGYgPSB0aGlzLCBpbmRleCA9IGVsZW1lbnQuaW5kZXggPSAwLCB0aW1lciA9IGVsZW1lbnQudGltZXIgPSAwLCBcbiAgICAgIGlzU2xpZGluZyA9IGZhbHNlLCAvLyBpc1NsaWRpbmcgcHJldmVudHMgY2xpY2sgZXZlbnQgaGFuZGxlcnMgd2hlbiBhbmltYXRpb24gaXMgcnVubmluZ1xuICAgICAgc2xpZGVzID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlbGVtZW50LCdpdGVtJyksIHRvdGFsID0gc2xpZGVzW2xlbmd0aF0sXG4gICAgICBzbGlkZURpcmVjdGlvbiA9IHRoaXNbZGlyZWN0aW9uXSA9IGxlZnQsXG4gICAgICBjb250cm9scyA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudCxjb21wb25lbnQrJy1jb250cm9sJyksXG4gICAgICBsZWZ0QXJyb3cgPSBjb250cm9sc1swXSwgcmlnaHRBcnJvdyA9IGNvbnRyb2xzWzFdLFxuICAgICAgaW5kaWNhdG9yID0gcXVlcnlFbGVtZW50KCAnLicrY29tcG9uZW50KyctaW5kaWNhdG9ycycsIGVsZW1lbnQgKSxcbiAgICAgIGluZGljYXRvcnMgPSBpbmRpY2F0b3JbZ2V0RWxlbWVudHNCeVRhZ05hbWVdKCBcIkxJXCIgKTtcbiAgXG4gICAgLy8gaGFuZGxlcnNcbiAgICB2YXIgcGF1c2VIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIHNlbGZbaW50ZXJ2YWxdICE9PWZhbHNlICYmICFoYXNDbGFzcyhlbGVtZW50LHBhdXNlZCkgKSB7XG4gICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCxwYXVzZWQpO1xuICAgICAgICAgICFpc1NsaWRpbmcgJiYgY2xlYXJJbnRlcnZhbCggdGltZXIgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlc3VtZUhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCBzZWxmW2ludGVydmFsXSAhPT0gZmFsc2UgJiYgaGFzQ2xhc3MoZWxlbWVudCxwYXVzZWQpICkge1xuICAgICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQscGF1c2VkKTtcbiAgICAgICAgICAhaXNTbGlkaW5nICYmIGNsZWFySW50ZXJ2YWwoIHRpbWVyICk7XG4gICAgICAgICAgIWlzU2xpZGluZyAmJiBzZWxmLmN5Y2xlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbmRpY2F0b3JIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChpc1NsaWRpbmcpIHJldHVybjtcbiAgXG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGVbdGFyZ2V0XSwgYWN0aXZlSW5kaWNhdG9yID0gc2VsZi5nZXRBY3RpdmVJbmRleCgpOyAvLyBldmVudCB0YXJnZXQgfCB0aGUgY3VycmVudCBhY3RpdmUgaXRlbVxuICBcbiAgICAgICAgaWYgKCBldmVudFRhcmdldCAmJiAhaGFzQ2xhc3MoZXZlbnRUYXJnZXQsYWN0aXZlKSAmJiBldmVudFRhcmdldFtnZXRBdHRyaWJ1dGVdKGRhdGFTbGlkZVRvKSApIHtcbiAgICAgICAgICBpbmRleCA9IHBhcnNlSW50KCBldmVudFRhcmdldFtnZXRBdHRyaWJ1dGVdKGRhdGFTbGlkZVRvKSwgMTAgKTtcbiAgXG4gICAgICAgICAgLy9kZXRlcm1pbmUgZGlyZWN0aW9uIGZpcnN0XG4gICAgICAgICAgaWYgICggKGFjdGl2ZUluZGljYXRvciA8IGluZGV4ICkgfHwgKGFjdGl2ZUluZGljYXRvciA9PT0gMCAmJiBpbmRleCA9PT0gdG90YWwgLTEgKSApIHtcbiAgICAgICAgICAgIHNsaWRlRGlyZWN0aW9uID0gc2VsZltkaXJlY3Rpb25dID0gbGVmdDsgLy8gbmV4dFxuICAgICAgICAgIH0gZWxzZSBpZiAgKCAoYWN0aXZlSW5kaWNhdG9yID4gaW5kZXgpIHx8IChhY3RpdmVJbmRpY2F0b3IgPT09IHRvdGFsIC0gMSAmJiBpbmRleCA9PT0gMCApICkge1xuICAgICAgICAgICAgc2xpZGVEaXJlY3Rpb24gPSBzZWxmW2RpcmVjdGlvbl0gPSByaWdodDsgLy8gcHJldlxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9XG4gIFxuICAgICAgICBzZWxmLnNsaWRlVG8oIGluZGV4ICk7IC8vRG8gdGhlIHNsaWRlXG4gICAgICB9LFxuICAgICAgY29udHJvbHNIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoaXNTbGlkaW5nKSByZXR1cm47XG4gIFxuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICBcbiAgICAgICAgaWYgKCBldmVudFRhcmdldCA9PT0gcmlnaHRBcnJvdyApIHtcbiAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIHNsaWRlRGlyZWN0aW9uID0gc2VsZltkaXJlY3Rpb25dID0gbGVmdDsgLy9zZXQgZGlyZWN0aW9uIGZpcnN0XG4gIFxuICAgICAgICAgIGlmKCBpbmRleCA9PT0gdG90YWwgLSAxICkge1xuICAgICAgICAgICAgaW5kZXggPSB0b3RhbCAtIDE7XG4gICAgICAgICAgfSBlbHNlIGlmICggaW5kZXggPT09IHRvdGFsICl7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCBldmVudFRhcmdldCA9PT0gbGVmdEFycm93ICkge1xuICAgICAgICAgIGluZGV4LS07XG4gICAgICAgICAgc2xpZGVEaXJlY3Rpb24gPSBzZWxmW2RpcmVjdGlvbl0gPSByaWdodDsgLy9zZXQgZGlyZWN0aW9uIGZpcnN0XG4gIFxuICAgICAgICAgIGlmKCBpbmRleCA9PT0gMCApIHtcbiAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgICB9IGVsc2UgaWYgKCBpbmRleCA8IDAgKXtcbiAgICAgICAgICAgIGluZGV4ID0gdG90YWwgLSAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gIFxuICAgICAgICBzZWxmLnNsaWRlVG8oIGluZGV4ICk7IC8vRG8gdGhlIHNsaWRlXG4gICAgICB9LFxuICAgICAga2V5SGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChpc1NsaWRpbmcpIHJldHVybjtcbiAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XG4gICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBzbGlkZURpcmVjdGlvbiA9IHNlbGZbZGlyZWN0aW9uXSA9IGxlZnQ7XG4gICAgICAgICAgICBpZiggaW5kZXggPT0gdG90YWwgLSAxICkgeyBpbmRleCA9IHRvdGFsIC0gMTsgfSBlbHNlXG4gICAgICAgICAgICBpZiAoIGluZGV4ID09IHRvdGFsICl7IGluZGV4ID0gMCB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgICAgIHNsaWRlRGlyZWN0aW9uID0gc2VsZltkaXJlY3Rpb25dID0gcmlnaHQ7XG4gICAgICAgICAgICBpZiAoIGluZGV4ID09IDAgKSB7IGluZGV4ID0gMDsgfSBlbHNlXG4gICAgICAgICAgICBpZiAoIGluZGV4IDwgMCApIHsgaW5kZXggPSB0b3RhbCAtIDEgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuc2xpZGVUbyggaW5kZXggKTsgLy9EbyB0aGUgc2xpZGVcbiAgICAgIH0sXG4gICAgICAvLyBwcml2YXRlIG1ldGhvZHNcbiAgICAgIHNldEFjdGl2ZVBhZ2UgPSBmdW5jdGlvbiggcGFnZUluZGV4ICkgeyAvL2luZGljYXRvcnNcbiAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpY2wgPSBpbmRpY2F0b3JzW2xlbmd0aF07IGkgPCBpY2w7IGkrKyApIHtcbiAgICAgICAgICByZW1vdmVDbGFzcyhpbmRpY2F0b3JzW2ldLGFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGljYXRvcnNbcGFnZUluZGV4XSkgYWRkQ2xhc3MoaW5kaWNhdG9yc1twYWdlSW5kZXhdLCBhY3RpdmUpO1xuICAgICAgfTtcbiAgXG4gIFxuICAgIC8vIHB1YmxpYyBtZXRob2RzXG4gICAgdGhpcy5jeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2xpZGVEaXJlY3Rpb24gPSB0aGlzW2RpcmVjdGlvbl0gPSBsZWZ0OyAvLyBtYWtlIHN1cmUgdG8gYWx3YXlzIGNvbWUgYmFjayB0byBkZWZhdWx0IHNsaWRlRGlyZWN0aW9uXG4gICAgICB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRleCsrO1xuICBcbiAgICAgICAgaW5kZXggPSBpbmRleCA9PT0gdG90YWwgPyAwIDogaW5kZXg7XG4gICAgICAgIHNlbGYuc2xpZGVUbyggaW5kZXggKTtcbiAgICAgIH0sIHRoaXNbaW50ZXJ2YWxdKTtcbiAgICB9O1xuICAgIHRoaXMuc2xpZGVUbyA9IGZ1bmN0aW9uKCBuZXh0ICkge1xuICAgICAgdmFyIGFjdGl2ZUl0ZW0gPSB0aGlzLmdldEFjdGl2ZUluZGV4KCksIC8vIHRoZSBjdXJyZW50IGFjdGl2ZVxuICAgICAgICAgIG9yaWVudGF0aW9uID0gc2xpZGVEaXJlY3Rpb24gPT09IGxlZnQgPyAnbmV4dCcgOiAncHJldic7IC8vZGV0ZXJtaW5lIHR5cGVcbiAgXG4gICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIHNsaWRlRXZlbnQsIGNvbXBvbmVudCwgc2xpZGVzW25leHRdKTsgLy8gaGVyZSB3ZSBnbyB3aXRoIHRoZSBzbGlkZVxuICBcbiAgICAgIGlzU2xpZGluZyA9IHRoaXMuaXNTbGlkaW5nID0gdHJ1ZTtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgc2V0QWN0aXZlUGFnZSggbmV4dCApO1xuICBcbiAgICAgIGlmICggc3VwcG9ydFRyYW5zaXRpb25zICYmIGhhc0NsYXNzKGVsZW1lbnQsJ3NsaWRlJykgKSB7XG4gIFxuICAgICAgICBhZGRDbGFzcyhzbGlkZXNbbmV4dF0sb3JpZW50YXRpb24pO1xuICAgICAgICBzbGlkZXNbbmV4dF1bb2Zmc2V0V2lkdGhdO1xuICAgICAgICBhZGRDbGFzcyhzbGlkZXNbbmV4dF0sc2xpZGVEaXJlY3Rpb24pO1xuICAgICAgICBhZGRDbGFzcyhzbGlkZXNbYWN0aXZlSXRlbV0sc2xpZGVEaXJlY3Rpb24pO1xuICBcbiAgICAgICAgb25lKHNsaWRlc1thY3RpdmVJdGVtXSwgdHJhbnNpdGlvbkVuZEV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIHRpbWVvdXQgPSBlW3RhcmdldF0gIT09IHNsaWRlc1thY3RpdmVJdGVtXSA/IGUuZWxhcHNlZFRpbWUqMTAwMCA6IDA7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgaXNTbGlkaW5nID0gc2VsZi5pc1NsaWRpbmcgPSBmYWxzZTtcbiAgXG4gICAgICAgICAgICBhZGRDbGFzcyhzbGlkZXNbbmV4dF0sYWN0aXZlKTtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNsaWRlc1thY3RpdmVJdGVtXSxhY3RpdmUpO1xuICBcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNsaWRlc1tuZXh0XSxvcmllbnRhdGlvbik7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhzbGlkZXNbbmV4dF0sc2xpZGVEaXJlY3Rpb24pO1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3Moc2xpZGVzW2FjdGl2ZUl0ZW1dLHNsaWRlRGlyZWN0aW9uKTtcbiAgXG4gICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIHNsaWRFdmVudCwgY29tcG9uZW50LCBzbGlkZXNbbmV4dF0pO1xuICBcbiAgICAgICAgICAgIGlmICggc2VsZltpbnRlcnZhbF0gJiYgIWhhc0NsYXNzKGVsZW1lbnQscGF1c2VkKSApIHtcbiAgICAgICAgICAgICAgc2VsZi5jeWNsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sdGltZW91dCk7XG4gICAgICAgIH0pO1xuICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZENsYXNzKHNsaWRlc1tuZXh0XSxhY3RpdmUpO1xuICAgICAgICBzbGlkZXNbbmV4dF1bb2Zmc2V0V2lkdGhdO1xuICAgICAgICByZW1vdmVDbGFzcyhzbGlkZXNbYWN0aXZlSXRlbV0sYWN0aXZlKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpc1NsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIHNlbGZbaW50ZXJ2YWxdICYmICFoYXNDbGFzcyhlbGVtZW50LHBhdXNlZCkgKSB7XG4gICAgICAgICAgICBzZWxmLmN5Y2xlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgc2xpZEV2ZW50LCBjb21wb25lbnQsIHNsaWRlc1tuZXh0XSk7IC8vIGhlcmUgd2UgZ28gd2l0aCB0aGUgc2xpZCBldmVudFxuICAgICAgICB9LCAxMDAgKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZ2V0QWN0aXZlSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2xpZGVzW2luZGV4T2ZdKGdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudCwnaXRlbSBhY3RpdmUnKVswXSkgfHwgMDtcbiAgICB9O1xuICBcbiAgICAvLyBpbml0XG4gICAgaWYgKCAhKHN0cmluZ0Nhcm91c2VsIGluIGVsZW1lbnQgKSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2VcbiAgXG4gICAgICBpZiAoIHRoaXNbcGF1c2VdICYmIHRoaXNbaW50ZXJ2YWxdICkge1xuICAgICAgICBvbiggZWxlbWVudCwgbW91c2VIb3ZlclswXSwgcGF1c2VIYW5kbGVyICk7XG4gICAgICAgIG9uKCBlbGVtZW50LCBtb3VzZUhvdmVyWzFdLCByZXN1bWVIYW5kbGVyICk7XG4gICAgICAgIG9uKCBlbGVtZW50LCAndG91Y2hzdGFydCcsIHBhdXNlSGFuZGxlciApO1xuICAgICAgICBvbiggZWxlbWVudCwgJ3RvdWNoZW5kJywgcmVzdW1lSGFuZGxlciApO1xuICAgICAgfVxuICAgIFxuICAgICAgcmlnaHRBcnJvdyAmJiBvbiggcmlnaHRBcnJvdywgY2xpY2tFdmVudCwgY29udHJvbHNIYW5kbGVyICk7XG4gICAgICBsZWZ0QXJyb3cgJiYgb24oIGxlZnRBcnJvdywgY2xpY2tFdmVudCwgY29udHJvbHNIYW5kbGVyICk7XG4gICAgXG4gICAgICBpbmRpY2F0b3IgJiYgb24oIGluZGljYXRvciwgY2xpY2tFdmVudCwgaW5kaWNhdG9ySGFuZGxlciwgZmFsc2UpO1xuICAgICAgdGhpc1trZXlib2FyZF0gPT09IHRydWUgJiYgb24oIGdsb2JhbE9iamVjdCwga2V5ZG93bkV2ZW50LCBrZXlIYW5kbGVyLCBmYWxzZSk7XG4gIFxuICAgIH1cbiAgICBpZiAodGhpcy5nZXRBY3RpdmVJbmRleCgpPDApIHtcbiAgICAgIHNsaWRlc1tsZW5ndGhdICYmIGFkZENsYXNzKHNsaWRlc1swXSxhY3RpdmUpO1xuICAgICAgaW5kaWNhdG9yc1tsZW5ndGhdICYmIHNldEFjdGl2ZVBhZ2UoMCk7XG4gICAgfVxuICBcbiAgICBpZiAoIHRoaXNbaW50ZXJ2YWxdICl7IHRoaXMuY3ljbGUoKTsgfVxuICAgIGVsZW1lbnRbc3RyaW5nQ2Fyb3VzZWxdID0gdGhpcztcbiAgfTtcbiAgXG4gIC8vIENBUk9VU0VMIERBVEEgQVBJXG4gIC8vID09PT09PT09PT09PT09PT09XG4gIGluaXRpYWxpemVEYXRhQVBJKCBzdHJpbmdDYXJvdXNlbCwgQ2Fyb3VzZWwsIGRhdGFSaWRlICk7XG4gIFxuICBcbiAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgQ29sbGFwc2VcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBcbiAgLy8gQ09MTEFQU0UgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09XG4gIHZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb25zICkge1xuICBcbiAgICAvLyBpbml0aWFsaXphdGlvbiBlbGVtZW50XG4gICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgXG4gIFxuICAgIC8vIGV2ZW50IHRhcmdldHMgYW5kIGNvbnN0YW50c1xuICAgIHZhciBhY2NvcmRpb24gPSBudWxsLCBjb2xsYXBzZSA9IG51bGwsIHNlbGYgPSB0aGlzLCBcbiAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2UsIC8vIHdoZW4gdHJ1ZSBpdCB3aWxsIHByZXZlbnQgY2xpY2sgaGFuZGxlcnNcbiAgICAgIGFjY29yZGlvbkRhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oJ2RhdGEtcGFyZW50JyksXG4gIFxuICAgICAgLy8gY29tcG9uZW50IHN0cmluZ3NcbiAgICAgIGNvbXBvbmVudCA9ICdjb2xsYXBzZScsXG4gICAgICBjb2xsYXBzZWQgPSAnY29sbGFwc2VkJyxcbiAgXG4gICAgICAvLyBwcml2YXRlIG1ldGhvZHNcbiAgICAgIG9wZW5BY3Rpb24gPSBmdW5jdGlvbihjb2xsYXBzZUVsZW1lbnQpIHtcbiAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChjb2xsYXBzZUVsZW1lbnQsIHNob3dFdmVudCwgY29tcG9uZW50KTtcbiAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICBhZGRDbGFzcyhjb2xsYXBzZUVsZW1lbnQsY29sbGFwc2luZyk7XG4gICAgICAgIGFkZENsYXNzKGNvbGxhcHNlRWxlbWVudCxpbkNsYXNzKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb2xsYXBzZUVsZW1lbnRbc3R5bGVdW2hlaWdodF0gPSBnZXRNYXhIZWlnaHQoY29sbGFwc2VFbGVtZW50KSArICdweCc7XG4gIFxuICAgICAgICAgIChmdW5jdGlvbigpe1xuICAgICAgICAgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQoY29sbGFwc2VFbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgY29sbGFwc2VFbGVtZW50W3NldEF0dHJpYnV0ZV0oYXJpYUV4cGFuZGVkLCd0cnVlJyk7XG4gICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGNvbGxhcHNlRWxlbWVudCxjb2xsYXBzaW5nKTtcbiAgICAgICAgICAgICAgY29sbGFwc2VFbGVtZW50W3N0eWxlXVtoZWlnaHRdID0gJyc7XG4gICAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoY29sbGFwc2VFbGVtZW50LCBzaG93bkV2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSgpKTtcbiAgICAgICAgfSwyMCk7XG4gICAgICB9LFxuICAgICAgY2xvc2VBY3Rpb24gPSBmdW5jdGlvbihjb2xsYXBzZUVsZW1lbnQpIHtcbiAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChjb2xsYXBzZUVsZW1lbnQsIGhpZGVFdmVudCwgY29tcG9uZW50KTtcbiAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICBjb2xsYXBzZUVsZW1lbnRbc3R5bGVdW2hlaWdodF0gPSBnZXRNYXhIZWlnaHQoY29sbGFwc2VFbGVtZW50KSArICdweCc7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYWRkQ2xhc3MoY29sbGFwc2VFbGVtZW50LGNvbGxhcHNpbmcpO1xuICAgICAgICAgIGNvbGxhcHNlRWxlbWVudFtzdHlsZV1baGVpZ2h0XSA9ICcwcHgnO1xuICBcbiAgICAgICAgICAoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGVtdWxhdGVUcmFuc2l0aW9uRW5kKGNvbGxhcHNlRWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbGxhcHNlRWxlbWVudFtzZXRBdHRyaWJ1dGVdKGFyaWFFeHBhbmRlZCwnZmFsc2UnKTtcbiAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoY29sbGFwc2VFbGVtZW50LGNvbGxhcHNpbmcpO1xuICAgICAgICAgICAgICByZW1vdmVDbGFzcyhjb2xsYXBzZUVsZW1lbnQsaW5DbGFzcyk7XG4gICAgICAgICAgICAgIGNvbGxhcHNlRWxlbWVudFtzdHlsZV1baGVpZ2h0XSA9ICcnO1xuICAgICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGNvbGxhcHNlRWxlbWVudCwgaGlkZGVuRXZlbnQsIGNvbXBvbmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KCkpO1xuICAgICAgICB9LDIwKTtcbiAgICAgIH0sXG4gICAgICBnZXRUYXJnZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhyZWYgPSBlbGVtZW50LmhyZWYgJiYgZWxlbWVudFtnZXRBdHRyaWJ1dGVdKCdocmVmJyksXG4gICAgICAgICAgcGFyZW50ID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpLFxuICAgICAgICAgIGlkID0gaHJlZiB8fCAoIHBhcmVudCAmJiB0YXJnZXRzUmVnLnRlc3QocGFyZW50KSApICYmIHBhcmVudDtcbiAgICAgICAgcmV0dXJuIGlkICYmIHF1ZXJ5RWxlbWVudChpZCk7XG4gICAgICB9O1xuICAgIFxuICAgIC8vIHB1YmxpYyBtZXRob2RzXG4gICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIGlzQW5pbWF0aW5nICkgcmV0dXJuO1xuICAgICAgaWYgKCFoYXNDbGFzcyhjb2xsYXBzZSxpbkNsYXNzKSkgeyBzZWxmLnNob3coKTsgfSBcbiAgICAgIGVsc2UgeyBzZWxmLmhpZGUoKTsgfVxuICAgIH07XG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbG9zZUFjdGlvbihjb2xsYXBzZSk7XG4gICAgICBhZGRDbGFzcyhlbGVtZW50LGNvbGxhcHNlZCk7XG4gICAgfTtcbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgIG9wZW5BY3Rpb24oY29sbGFwc2UpO1xuICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCxjb2xsYXBzZWQpO1xuICBcbiAgICAgIGlmICggYWNjb3JkaW9uICE9PSBudWxsICkge1xuICAgICAgICB2YXIgYWN0aXZlQ29sbGFwc2VzID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhY2NvcmRpb24sY29tcG9uZW50KycgJytpbkNsYXNzKTtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBhbD1hY3RpdmVDb2xsYXBzZXNbbGVuZ3RoXTsgaTxhbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCBhY3RpdmVDb2xsYXBzZXNbaV0gIT09IGNvbGxhcHNlKSBjbG9zZUFjdGlvbihhY3RpdmVDb2xsYXBzZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgLy8gaW5pdFxuICAgIGlmICggIShzdHJpbmdDb2xsYXBzZSBpbiBlbGVtZW50ICkgKSB7IC8vIHByZXZlbnQgYWRkaW5nIGV2ZW50IGhhbmRsZXJzIHR3aWNlXG4gICAgICBvbihlbGVtZW50LCBjbGlja0V2ZW50LCB0aGlzLnRvZ2dsZSk7XG4gICAgfVxuICAgIGNvbGxhcHNlID0gZ2V0VGFyZ2V0KCk7XG4gICAgYWNjb3JkaW9uID0gcXVlcnlFbGVtZW50KG9wdGlvbnMucGFyZW50KSB8fCBhY2NvcmRpb25EYXRhICYmIGdldENsb3Nlc3QoZWxlbWVudCwgYWNjb3JkaW9uRGF0YSk7XG4gICAgZWxlbWVudFtzdHJpbmdDb2xsYXBzZV0gPSB0aGlzO1xuICB9O1xuICBcbiAgLy8gQ09MTEFQU0UgREFUQSBBUElcbiAgLy8gPT09PT09PT09PT09PT09PT1cbiAgaW5pdGlhbGl6ZURhdGFBUEkoc3RyaW5nQ29sbGFwc2UsIENvbGxhcHNlLCBkYXRhVG9nZ2xlKTtcbiAgXG4gIFxuICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBEcm9wZG93blxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgXG4gIC8vIERST1BET1dOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PVxuICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9uICkge1xuICAgICAgXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoZWxlbWVudCk7XG4gIFxuICAgIC8vIHNldCBvcHRpb25cbiAgICB0aGlzLnBlcnNpc3QgPSBvcHRpb24gPT09IHRydWUgfHwgZWxlbWVudFtnZXRBdHRyaWJ1dGVdKCdkYXRhLXBlcnNpc3QnKSA9PT0gJ3RydWUnIHx8IGZhbHNlO1xuICBcbiAgICAvLyBjb25zdGFudHMsIGV2ZW50IHRhcmdldHMsIHN0cmluZ3NcbiAgICB2YXIgc2VsZiA9IHRoaXMsIGlzT3BlbiA9IGZhbHNlLFxuICAgICAgcGFyZW50ID0gZWxlbWVudFtwYXJlbnROb2RlXSxcbiAgICAgIGNvbXBvbmVudCA9ICdkcm9wZG93bicsIG9wZW4gPSAnb3BlbicsXG4gICAgICByZWxhdGVkVGFyZ2V0ID0gbnVsbCxcbiAgICAgIG1lbnUgPSBxdWVyeUVsZW1lbnQoJy5kcm9wZG93bi1tZW51JywgcGFyZW50KSxcbiAgICAgIGNoaWxkcmVuID0gbm9kZUxpc3RUb0FycmF5KCBtZW51W2dldEVsZW1lbnRzQnlUYWdOYW1lXSgnKicpKSxcbiAgXG4gICAgICAvLyBoYW5kbGVyc1xuICAgICAga2V5SGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGlzT3BlbiAmJiAoZS53aGljaCA9PSAyNyB8fCBlLmtleUNvZGUgPT0gMjcpKSB7IHJlbGF0ZWRUYXJnZXQgPSBudWxsOyBoaWRlKCk7IH0gLy8gZS5rZXlDb2RlIGZvciBJRThcbiAgICAgIH0sXG4gICAgICBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGVbdGFyZ2V0XSwgaGFzRGF0YTtcbiAgICAgICAgaGFzRGF0YSA9ICggZXZlbnRUYXJnZXQubm9kZVR5cGUgIT09IDEgJiYgKGV2ZW50VGFyZ2V0W2dldEF0dHJpYnV0ZV0oZGF0YVRvZ2dsZSkgfHwgZXZlbnRUYXJnZXRbcGFyZW50Tm9kZV1bZ2V0QXR0cmlidXRlXShkYXRhVG9nZ2xlKSkgKTtcbiAgICAgICAgaWYgKCBldmVudFRhcmdldCA9PT0gZWxlbWVudCB8fCBldmVudFRhcmdldCA9PT0gcGFyZW50IHx8IGV2ZW50VGFyZ2V0W3BhcmVudE5vZGVdID09PSBlbGVtZW50ICkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gY29tbWVudCB0aGlzIGxpbmUgdG8gc3RvcCBwcmV2ZW50aW5nIG5hdmlnYXRpb24gd2hlbiBjbGljayB0YXJnZXQgaXMgYSBsaW5rIFxuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQgPSBlbGVtZW50O1xuICAgICAgICAgIHNlbGYudG9nZ2xlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIGlzT3BlbiApIHtcbiAgICAgICAgICBpZiAoIChldmVudFRhcmdldCA9PT0gbWVudSB8fCBjaGlsZHJlbiAmJiBjaGlsZHJlbltpbmRleE9mXShldmVudFRhcmdldCkgPiAtMSkgJiYgKCBzZWxmLnBlcnNpc3QgfHwgaGFzRGF0YSApICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7IHJlbGF0ZWRUYXJnZXQgPSBudWxsOyBoaWRlKCk7IH1cbiAgICAgICAgfVxuICAgICAgICAoL1xcIyQvLnRlc3QoZXZlbnRUYXJnZXQuaHJlZikgfHwgZXZlbnRUYXJnZXRbcGFyZW50Tm9kZV0gJiYgL1xcIyQvLnRlc3QoZXZlbnRUYXJnZXRbcGFyZW50Tm9kZV0uaHJlZikpICYmIGUucHJldmVudERlZmF1bHQoKTsgLy8gc2hvdWxkIGJlIGhlcmUgdG8gcHJldmVudCBqdW1wc1xuICAgICAgfSxcbiAgICAgIC8vIHByaXZhdGUgbWV0aG9kc1xuICAgICAgc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKHBhcmVudCwgc2hvd0V2ZW50LCBjb21wb25lbnQsIHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICBhZGRDbGFzcyhwYXJlbnQsb3Blbik7XG4gICAgICAgIG1lbnVbc2V0QXR0cmlidXRlXShhcmlhRXhwYW5kZWQsdHJ1ZSk7XG4gICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwocGFyZW50LCBzaG93bkV2ZW50LCBjb21wb25lbnQsIHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICBvbihkb2N1bWVudCwga2V5ZG93bkV2ZW50LCBrZXlIYW5kbGVyKTtcbiAgICAgICAgaXNPcGVuID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBoaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwocGFyZW50LCBoaWRlRXZlbnQsIGNvbXBvbmVudCwgcmVsYXRlZFRhcmdldCk7XG4gICAgICAgIHJlbW92ZUNsYXNzKHBhcmVudCxvcGVuKTtcbiAgICAgICAgbWVudVtzZXRBdHRyaWJ1dGVdKGFyaWFFeHBhbmRlZCxmYWxzZSk7XG4gICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwocGFyZW50LCBoaWRkZW5FdmVudCwgY29tcG9uZW50LCByZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgb2ZmKGRvY3VtZW50LCBrZXlkb3duRXZlbnQsIGtleUhhbmRsZXIpO1xuICAgICAgICBpc09wZW4gPSBmYWxzZTtcbiAgICAgIH07XG4gIFxuICAgIC8vIHB1YmxpYyBtZXRob2RzXG4gICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChoYXNDbGFzcyhwYXJlbnQsb3BlbikgJiYgaXNPcGVuKSB7IGhpZGUoKTsgfSBcbiAgICAgIGVsc2UgeyBzaG93KCk7IH1cbiAgICB9O1xuICBcbiAgICAvLyBpbml0XG4gICAgaWYgKCAhKHN0cmluZ0Ryb3Bkb3duIGluIGVsZW1lbnQpICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuICAgICAgbWVudVtzZXRBdHRyaWJ1dGVdKCd0YWJpbmRleCcsICcwJyk7IC8vIEZpeCBvbmJsdXIgb24gQ2hyb21lIHwgU2FmYXJpXG4gICAgICBvbihkb2N1bWVudCwgY2xpY2tFdmVudCwgY2xpY2tIYW5kbGVyKTtcbiAgICB9XG4gICAgZWxlbWVudFtzdHJpbmdEcm9wZG93bl0gPSB0aGlzO1xuICB9O1xuICBcbiAgLy8gRFJPUERPV04gREFUQSBBUElcbiAgLy8gPT09PT09PT09PT09PT09PT1cbiAgaW5pdGlhbGl6ZURhdGFBUEkoIHN0cmluZ0Ryb3Bkb3duLCBEcm9wZG93biwgZGF0YVRvZ2dsZSApO1xuICBcbiAgXG4gIC8qIE5hdGl2ZSBKYXZhc2NyaXB0IGZvciBCb290c3RyYXAgMyB8IE1vZGFsXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAgIFxuICAvLyBNT0RBTCBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PVxuICB2YXIgTW9kYWwgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7IC8vIGVsZW1lbnQgY2FuIGJlIHRoZSBtb2RhbC90cmlnZ2VyaW5nIGJ1dHRvblxuICBcbiAgICAvLyB0aGUgbW9kYWwgKGJvdGggSmF2YVNjcmlwdCAvIERBVEEgQVBJIGluaXQpIC8gdHJpZ2dlcmluZyBidXR0b24gZWxlbWVudCAoREFUQSBBUEkpXG4gICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTtcbiAgXG4gICAgLy8gZGV0ZXJtaW5lIG1vZGFsLCB0cmlnZ2VyaW5nIGVsZW1lbnQgXG4gICAgdmFyIGJ0bkNoZWNrID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpfHxlbGVtZW50W2dldEF0dHJpYnV0ZV0oJ2hyZWYnKSxcbiAgICAgIGNoZWNrTW9kYWwgPSBxdWVyeUVsZW1lbnQoIGJ0bkNoZWNrICksXG4gICAgICBtb2RhbCA9IGhhc0NsYXNzKGVsZW1lbnQsJ21vZGFsJykgPyBlbGVtZW50IDogY2hlY2tNb2RhbCxcbiAgXG4gICAgICAvLyBzdHJpbmdzXG4gICAgICBjb21wb25lbnQgPSAnbW9kYWwnLFxuICAgICAgc3RhdGljU3RyaW5nID0gJ3N0YXRpYycsXG4gICAgICBwYWRkaW5nTGVmdCA9ICdwYWRkaW5nTGVmdCcsXG4gICAgICBwYWRkaW5nUmlnaHQgPSAncGFkZGluZ1JpZ2h0JyxcbiAgICAgIG1vZGFsQmFja2Ryb3BTdHJpbmcgPSAnbW9kYWwtYmFja2Ryb3AnO1xuICBcbiAgICBpZiAoIGhhc0NsYXNzKGVsZW1lbnQsJ21vZGFsJykgKSB7IGVsZW1lbnQgPSBudWxsOyB9IC8vIG1vZGFsIGlzIG5vdyBpbmRlcGVuZGVudCBvZiBpdCdzIHRyaWdnZXJpbmcgZWxlbWVudFxuICBcbiAgICBpZiAoICFtb2RhbCApIHsgcmV0dXJuOyB9IC8vIGludmFsaWRhdGVcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgXG4gICAgdGhpc1trZXlib2FyZF0gPSBvcHRpb25zW2tleWJvYXJkXSA9PT0gZmFsc2UgfHwgbW9kYWxbZ2V0QXR0cmlidXRlXShkYXRhS2V5Ym9hcmQpID09PSAnZmFsc2UnID8gZmFsc2UgOiB0cnVlO1xuICAgIHRoaXNbYmFja2Ryb3BdID0gb3B0aW9uc1tiYWNrZHJvcF0gPT09IHN0YXRpY1N0cmluZyB8fCBtb2RhbFtnZXRBdHRyaWJ1dGVdKGRhdGFiYWNrZHJvcCkgPT09IHN0YXRpY1N0cmluZyA/IHN0YXRpY1N0cmluZyA6IHRydWU7XG4gICAgdGhpc1tiYWNrZHJvcF0gPSBvcHRpb25zW2JhY2tkcm9wXSA9PT0gZmFsc2UgfHwgbW9kYWxbZ2V0QXR0cmlidXRlXShkYXRhYmFja2Ryb3ApID09PSAnZmFsc2UnID8gZmFsc2UgOiB0aGlzW2JhY2tkcm9wXTtcbiAgICB0aGlzW2NvbnRlbnRdICA9IG9wdGlvbnNbY29udGVudF07IC8vIEphdmFTY3JpcHQgb25seVxuICBcbiAgICAvLyBiaW5kLCBjb25zdGFudHMsIGV2ZW50IHRhcmdldHMgYW5kIG90aGVyIHZhcnNcbiAgICB2YXIgc2VsZiA9IHRoaXMsIG9wZW4gPSB0aGlzLm9wZW4gPSBmYWxzZSwgcmVsYXRlZFRhcmdldCA9IG51bGwsXG4gICAgICBib2R5SXNPdmVyZmxvd2luZywgbW9kYWxJc092ZXJmbG93aW5nLCBzY3JvbGxiYXJXaWR0aCwgb3ZlcmxheSxcbiAgXG4gICAgICAvLyBhbHNvIGZpbmQgZml4ZWQtdG9wIC8gZml4ZWQtYm90dG9tIGl0ZW1zXG4gICAgICBmaXhlZEl0ZW1zID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShkb2MsJ25hdmJhci1maXhlZC10b3AnKS5jb25jYXQoZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShkb2MsJ25hdmJhci1maXhlZC1ib3R0b20nKSksXG4gIFxuICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXG4gICAgICBnZXRXaW5kb3dXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbFJlY3QgPSBkb2NbZ2V0Qm91bmRpbmdDbGllbnRSZWN0XSgpO1xuICAgICAgICByZXR1cm4gZ2xvYmFsT2JqZWN0W2lubmVyV2lkdGhdIHx8IChodG1sUmVjdFtyaWdodF0gLSBNYXRoLmFicyhodG1sUmVjdFtsZWZ0XSkpO1xuICAgICAgfSxcbiAgICAgIHNldFNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJvZHlTdHlsZSA9IGJvZHkuY3VycmVudFN0eWxlIHx8IGdsb2JhbE9iamVjdC5nZXRDb21wdXRlZFN0eWxlKGJvZHkpLCBcbiAgICAgICAgICAgIGJvZHlQYWQgPSBwYXJzZUludCgoYm9keVN0eWxlW3BhZGRpbmdSaWdodF0pLCAxMCksIGl0ZW1QYWQ7XG4gICAgICAgIGlmIChib2R5SXNPdmVyZmxvd2luZykgeyBcbiAgICAgICAgICBib2R5W3N0eWxlXVtwYWRkaW5nUmlnaHRdID0gKGJvZHlQYWQgKyBzY3JvbGxiYXJXaWR0aCkgKyAncHgnO1xuICAgICAgICAgIGlmIChmaXhlZEl0ZW1zW2xlbmd0aF0pe1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaXhlZEl0ZW1zW2xlbmd0aF07IGkrKykge1xuICAgICAgICAgICAgICBpdGVtUGFkID0gZ2xvYmFsT2JqZWN0LmdldENvbXB1dGVkU3R5bGUoZml4ZWRJdGVtc1tpXSlbcGFkZGluZ1JpZ2h0XTtcbiAgICAgICAgICAgICAgZml4ZWRJdGVtc1tpXVtzdHlsZV1bcGFkZGluZ1JpZ2h0XSA9ICggcGFyc2VJbnQoaXRlbVBhZCkgKyBzY3JvbGxiYXJXaWR0aCkgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBib2R5W3N0eWxlXVtwYWRkaW5nUmlnaHRdID0gJyc7XG4gICAgICAgIGlmIChmaXhlZEl0ZW1zW2xlbmd0aF0pe1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZml4ZWRJdGVtc1tsZW5ndGhdOyBpKyspIHtcbiAgICAgICAgICAgIGZpeGVkSXRlbXNbaV1bc3R5bGVdW3BhZGRpbmdSaWdodF0gPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtZWFzdXJlU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkgeyAvLyB0aHggd2Fsc2hcbiAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9IGNvbXBvbmVudCsnLXNjcm9sbGJhci1tZWFzdXJlJzsgLy8gdGhpcyBpcyBoZXJlIHRvIHN0YXlcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChzY3JvbGxEaXYpO1xuICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdltvZmZzZXRXaWR0aF0gLSBzY3JvbGxEaXZbY2xpZW50V2lkdGhdO1xuICAgICAgICBib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG4gICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgIH0sXG4gICAgICBjaGVja1Njcm9sbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm9keUlzT3ZlcmZsb3dpbmcgPSBib2R5W2NsaWVudFdpZHRoXSA8IGdldFdpbmRvd1dpZHRoKCk7XG4gICAgICAgIG1vZGFsSXNPdmVyZmxvd2luZyA9IG1vZGFsW3Njcm9sbEhlaWdodF0gPiBkb2NbY2xpZW50SGVpZ2h0XTtcbiAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBtZWFzdXJlU2Nyb2xsYmFyKCk7XG4gICAgICB9LFxuICAgICAgYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBtb2RhbFtzdHlsZV1bcGFkZGluZ0xlZnRdID0gIWJvZHlJc092ZXJmbG93aW5nICYmIG1vZGFsSXNPdmVyZmxvd2luZyA/IHNjcm9sbGJhcldpZHRoICsgJ3B4JyA6ICcnO1xuICAgICAgICBtb2RhbFtzdHlsZV1bcGFkZGluZ1JpZ2h0XSA9IGJvZHlJc092ZXJmbG93aW5nICYmICFtb2RhbElzT3ZlcmZsb3dpbmcgPyBzY3JvbGxiYXJXaWR0aCArICdweCcgOiAnJztcbiAgICAgIH0sXG4gICAgICByZXNldEFkanVzdG1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBtb2RhbFtzdHlsZV1bcGFkZGluZ0xlZnRdID0gJyc7XG4gICAgICAgIG1vZGFsW3N0eWxlXVtwYWRkaW5nUmlnaHRdID0gJyc7XG4gICAgICB9LFxuICAgICAgY3JlYXRlT3ZlcmxheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbmV3T3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5ID0gcXVlcnlFbGVtZW50KCcuJyttb2RhbEJhY2tkcm9wU3RyaW5nKTtcbiAgXG4gICAgICAgIGlmICggb3ZlcmxheSA9PT0gbnVsbCApIHtcbiAgICAgICAgICBuZXdPdmVybGF5W3NldEF0dHJpYnV0ZV0oJ2NsYXNzJyxtb2RhbEJhY2tkcm9wU3RyaW5nKycgZmFkZScpO1xuICAgICAgICAgIG92ZXJsYXkgPSBuZXdPdmVybGF5O1xuICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZW1vdmVPdmVybGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG92ZXJsYXkgPSBxdWVyeUVsZW1lbnQoJy4nK21vZGFsQmFja2Ryb3BTdHJpbmcpOyBcbiAgICAgICAgaWYgKCBvdmVybGF5ICYmIG92ZXJsYXkgIT09IG51bGwgJiYgdHlwZW9mIG92ZXJsYXkgPT09ICdvYmplY3QnICkge1xuICAgICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IG92ZXJsYXkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAga2V5ZG93bkhhbmRsZXJUb2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFoYXNDbGFzcyhtb2RhbCxpbkNsYXNzKSkge1xuICAgICAgICAgIG9uKGRvY3VtZW50LCBrZXlkb3duRXZlbnQsIGtleUhhbmRsZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9mZihkb2N1bWVudCwga2V5ZG93bkV2ZW50LCBrZXlIYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlc2l6ZUhhbmRsZXJUb2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFoYXNDbGFzcyhtb2RhbCxpbkNsYXNzKSkge1xuICAgICAgICAgIG9uKGdsb2JhbE9iamVjdCwgcmVzaXplRXZlbnQsIHNlbGYudXBkYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmYoZ2xvYmFsT2JqZWN0LCByZXNpemVFdmVudCwgc2VsZi51cGRhdGUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGlzbWlzc0hhbmRsZXJUb2dnbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFoYXNDbGFzcyhtb2RhbCxpbkNsYXNzKSkge1xuICAgICAgICAgIG9uKG1vZGFsLCBjbGlja0V2ZW50LCBkaXNtaXNzSGFuZGxlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2ZmKG1vZGFsLCBjbGlja0V2ZW50LCBkaXNtaXNzSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBoYW5kbGVyc1xuICAgICAgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgY2xpY2tUYXJnZXQgPSBlW3RhcmdldF07IFxuICAgICAgICBjbGlja1RhcmdldCA9IGNsaWNrVGFyZ2V0W2hhc0F0dHJpYnV0ZV0oZGF0YVRhcmdldCkgfHwgY2xpY2tUYXJnZXRbaGFzQXR0cmlidXRlXSgnaHJlZicpID8gY2xpY2tUYXJnZXQgOiBjbGlja1RhcmdldFtwYXJlbnROb2RlXTtcbiAgICAgICAgaWYgKCAhb3BlbiAmJiBjbGlja1RhcmdldCA9PT0gZWxlbWVudCAmJiAhaGFzQ2xhc3MobW9kYWwsaW5DbGFzcykgKSB7XG4gICAgICAgICAgbW9kYWwubW9kYWxUcmlnZ2VyID0gZWxlbWVudDtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0ID0gZWxlbWVudDtcbiAgICAgICAgICBzZWxmLnNob3coKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBrZXlIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7IC8vIGtleUNvZGUgZm9yIElFOFxuICAgICAgICBpZiAoc2VsZltrZXlib2FyZF0gJiYga2V5ID09IDI3ICYmIG9wZW4pIHtcbiAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRpc21pc3NIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgY2xpY2tUYXJnZXQgPSBlW3RhcmdldF07XG4gICAgICAgIGlmICggb3BlbiAmJiAoY2xpY2tUYXJnZXRbcGFyZW50Tm9kZV1bZ2V0QXR0cmlidXRlXShkYXRhRGlzbWlzcykgPT09IGNvbXBvbmVudCBcbiAgICAgICAgICAgIHx8IGNsaWNrVGFyZ2V0W2dldEF0dHJpYnV0ZV0oZGF0YURpc21pc3MpID09PSBjb21wb25lbnRcbiAgICAgICAgICAgIHx8IChjbGlja1RhcmdldCA9PT0gbW9kYWwgJiYgc2VsZltiYWNrZHJvcF0gIT09IHN0YXRpY1N0cmluZykgKSApIHtcbiAgICAgICAgICBzZWxmLmhpZGUoKTsgcmVsYXRlZFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICBcbiAgICAvLyBwdWJsaWMgbWV0aG9kc1xuICAgIHRoaXMudG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAob3BlbiAmJiBoYXNDbGFzcyhtb2RhbCxpbkNsYXNzKSkge3RoaXMuaGlkZSgpO30gZWxzZSB7dGhpcy5zaG93KCk7fVxuICAgIH07XG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG1vZGFsLCBzaG93RXZlbnQsIGNvbXBvbmVudCwgcmVsYXRlZFRhcmdldCk7XG4gIFxuICAgICAgLy8gd2UgZWxlZ2FudGx5IGhpZGUgYW55IG9wZW5lZCBtb2RhbFxuICAgICAgdmFyIGN1cnJlbnRPcGVuID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShkb2N1bWVudCxjb21wb25lbnQrJyBpbicpWzBdO1xuICAgICAgY3VycmVudE9wZW4gJiYgY3VycmVudE9wZW4gIT09IG1vZGFsICYmIGN1cnJlbnRPcGVuLm1vZGFsVHJpZ2dlcltzdHJpbmdNb2RhbF0uaGlkZSgpOyBcbiAgXG4gICAgICBpZiAoIHRoaXNbYmFja2Ryb3BdICkge1xuICAgICAgICBjcmVhdGVPdmVybGF5KCk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKCBvdmVybGF5ICYmICFoYXNDbGFzcyhvdmVybGF5LGluQ2xhc3MpKSB7XG4gICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgeyBhZGRDbGFzcyhvdmVybGF5LGluQ2xhc3MpOyB9LDApO1xuICAgICAgfVxuICBcbiAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICBtb2RhbFtzdHlsZV0uZGlzcGxheSA9ICdibG9jayc7XG4gIFxuICAgICAgICBjaGVja1Njcm9sbGJhcigpO1xuICAgICAgICBzZXRTY3JvbGxiYXIoKTtcbiAgICAgICAgYWRqdXN0RGlhbG9nKCk7XG4gIFxuICAgICAgICByZXNpemVIYW5kbGVyVG9nZ2xlKCk7XG4gICAgICAgIGRpc21pc3NIYW5kbGVyVG9nZ2xlKCk7XG4gICAgICAgIGtleWRvd25IYW5kbGVyVG9nZ2xlKCk7XG4gIFxuICAgICAgICBhZGRDbGFzcyhib2R5LGNvbXBvbmVudCsnLW9wZW4nKTtcbiAgICAgICAgYWRkQ2xhc3MobW9kYWwsaW5DbGFzcyk7XG4gICAgICAgIG1vZGFsW3NldEF0dHJpYnV0ZV0oYXJpYUhpZGRlbiwgZmFsc2UpO1xuICBcbiAgICAgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQobW9kYWwsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG9wZW4gPSBzZWxmLm9wZW4gPSB0cnVlO1xuICAgICAgICAgIHNldEZvY3VzKG1vZGFsKTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG1vZGFsLCBzaG93bkV2ZW50LCBjb21wb25lbnQsIHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIHN1cHBvcnRUcmFuc2l0aW9ucyA/IDE1MCA6IDApO1xuICAgIH07XG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG1vZGFsLCBoaWRlRXZlbnQsIGNvbXBvbmVudCk7XG4gICAgICBvdmVybGF5ID0gcXVlcnlFbGVtZW50KCcuJyttb2RhbEJhY2tkcm9wU3RyaW5nKTtcbiAgXG4gICAgICByZW1vdmVDbGFzcyhtb2RhbCxpbkNsYXNzKTtcbiAgICAgIG1vZGFsW3NldEF0dHJpYnV0ZV0oYXJpYUhpZGRlbiwgdHJ1ZSk7XG4gIFxuICAgICAgISFvdmVybGF5ICYmIHJlbW92ZUNsYXNzKG92ZXJsYXksaW5DbGFzcyk7XG4gIFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChtb2RhbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmVzaXplSGFuZGxlclRvZ2dsZSgpO1xuICAgICAgICAgIGRpc21pc3NIYW5kbGVyVG9nZ2xlKCk7XG4gICAgICAgICAga2V5ZG93bkhhbmRsZXJUb2dnbGUoKTtcbiAgXG4gICAgICAgICAgbW9kYWxbc3R5bGVdLmRpc3BsYXkgPSAnJztcbiAgXG4gICAgICAgICAgb3BlbiA9IHNlbGYub3BlbiA9IGZhbHNlO1xuICAgICAgICAgIGVsZW1lbnQgJiYgKHNldEZvY3VzKGVsZW1lbnQpKTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG1vZGFsLCBoaWRkZW5FdmVudCwgY29tcG9uZW50KTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoIWdldEVsZW1lbnRzQnlDbGFzc05hbWUoZG9jdW1lbnQsY29tcG9uZW50KycgJytpbkNsYXNzKVswXSkge1xuICAgICAgICAgICAgICByZXNldEFkanVzdG1lbnRzKCk7XG4gICAgICAgICAgICAgIHJlc2V0U2Nyb2xsYmFyKCk7XG4gICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGJvZHksY29tcG9uZW50Kyctb3BlbicpO1xuICAgICAgICAgICAgICByZW1vdmVPdmVybGF5KCk7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgc3VwcG9ydFRyYW5zaXRpb25zID8gMTUwIDogMCk7XG4gICAgfTtcbiAgICB0aGlzLnNldENvbnRlbnQgPSBmdW5jdGlvbiggY29udGVudCApIHtcbiAgICAgIHF1ZXJ5RWxlbWVudCgnLicrY29tcG9uZW50KyctY29udGVudCcsbW9kYWwpLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKG9wZW4pIHtcbiAgICAgICAgY2hlY2tTY3JvbGxiYXIoKTtcbiAgICAgICAgc2V0U2Nyb2xsYmFyKCk7XG4gICAgICAgIGFkanVzdERpYWxvZygpO1xuICAgICAgfVxuICAgIH07XG4gIFxuICAgIC8vIGluaXRcbiAgICAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyBvdmVyIGFuZCBvdmVyXG4gICAgLy8gbW9kYWwgaXMgaW5kZXBlbmRlbnQgb2YgYSB0cmlnZ2VyaW5nIGVsZW1lbnQgXG4gICAgaWYgKCAhIWVsZW1lbnQgJiYgIShzdHJpbmdNb2RhbCBpbiBlbGVtZW50KSApIHtcbiAgICAgIG9uKGVsZW1lbnQsIGNsaWNrRXZlbnQsIGNsaWNrSGFuZGxlcik7XG4gICAgfVxuICAgIGlmICggISF0aGlzW2NvbnRlbnRdICkgeyB0aGlzLnNldENvbnRlbnQoIHRoaXNbY29udGVudF0gKTsgfVxuICAgICEhZWxlbWVudCAmJiAoZWxlbWVudFtzdHJpbmdNb2RhbF0gPSB0aGlzKTtcbiAgfTtcbiAgXG4gIC8vIERBVEEgQVBJXG4gIGluaXRpYWxpemVEYXRhQVBJKHN0cmluZ01vZGFsLCBNb2RhbCwgZGF0YVRvZ2dsZSk7XG4gIFxuICBcbiAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgUG9wb3ZlclxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgXG4gIC8vIFBPUE9WRVIgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT1cbiAgdmFyIFBvcG92ZXIgPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucyApIHtcbiAgXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoZWxlbWVudCk7XG4gIFxuICAgIC8vIERBVEEgQVBJXG4gICAgdmFyIHRyaWdnZXJEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUcmlnZ2VyKSwgLy8gY2xpY2sgLyBob3ZlciAvIGZvY3VzXG4gICAgICAgIGFuaW1hdGlvbkRhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YUFuaW1hdGlvbiksIC8vIHRydWUgLyBmYWxzZVxuICAgICAgICBwbGFjZW1lbnREYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFQbGFjZW1lbnQpLFxuICAgICAgICBkaXNtaXNzaWJsZURhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YURpc21pc3NpYmxlKSxcbiAgICAgICAgZGVsYXlEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFEZWxheSksXG4gICAgICAgIGNvbnRhaW5lckRhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YUNvbnRhaW5lciksXG4gIFxuICAgICAgICAvLyBpbnRlcm5hbCBzdHJpbmdzXG4gICAgICAgIGNvbXBvbmVudCA9ICdwb3BvdmVyJyxcbiAgICAgICAgdGVtcGxhdGUgPSAndGVtcGxhdGUnLFxuICAgICAgICB0cmlnZ2VyID0gJ3RyaWdnZXInLFxuICAgICAgICBjbGFzc1N0cmluZyA9ICdjbGFzcycsXG4gICAgICAgIGRpdiA9ICdkaXYnLFxuICAgICAgICBmYWRlID0gJ2ZhZGUnLFxuICAgICAgICB0aXRsZSA9ICd0aXRsZScsXG4gICAgICAgIGNvbnRlbnQgPSAnY29udGVudCcsXG4gICAgICAgIGRhdGFUaXRsZSA9ICdkYXRhLXRpdGxlJyxcbiAgICAgICAgZGF0YUNvbnRlbnQgPSAnZGF0YS1jb250ZW50JyxcbiAgICAgICAgZGlzbWlzc2libGUgPSAnZGlzbWlzc2libGUnLFxuICAgICAgICBjbG9zZUJ0biA9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCI+w5c8L2J1dHRvbj4nLFxuICAgICAgICBcbiAgICAgICAgLy8gbWF5YmUgdGhlIGVsZW1lbnQgaXMgaW5zaWRlIGEgbW9kYWxcbiAgICAgICAgbW9kYWwgPSBnZXRDbG9zZXN0KGVsZW1lbnQsJy5tb2RhbCcpLFxuICAgICAgICBcbiAgICAgICAgLy8gbWF5YmUgdGhlIGVsZW1lbnQgaXMgaW5zaWRlIGEgZml4ZWQgbmF2YmFyXG4gICAgICAgIG5hdmJhckZpeGVkVG9wID0gZ2V0Q2xvc2VzdChlbGVtZW50LGZpeGVkVG9wKSxcbiAgICAgICAgbmF2YmFyRml4ZWRCb3R0b20gPSBnZXRDbG9zZXN0KGVsZW1lbnQsZml4ZWRCb3R0b20pO1xuICBcbiAgICAvLyBzZXQgb3B0aW9uc1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXNbdGVtcGxhdGVdID0gb3B0aW9uc1t0ZW1wbGF0ZV0gPyBvcHRpb25zW3RlbXBsYXRlXSA6IG51bGw7IC8vIEphdmFTY3JpcHQgb25seVxuICAgIHRoaXNbdHJpZ2dlcl0gPSBvcHRpb25zW3RyaWdnZXJdID8gb3B0aW9uc1t0cmlnZ2VyXSA6IHRyaWdnZXJEYXRhIHx8IGhvdmVyRXZlbnQ7XG4gICAgdGhpc1thbmltYXRpb25dID0gb3B0aW9uc1thbmltYXRpb25dICYmIG9wdGlvbnNbYW5pbWF0aW9uXSAhPT0gZmFkZSA/IG9wdGlvbnNbYW5pbWF0aW9uXSA6IGFuaW1hdGlvbkRhdGEgfHwgZmFkZTtcbiAgICB0aGlzW3BsYWNlbWVudF0gPSBvcHRpb25zW3BsYWNlbWVudF0gPyBvcHRpb25zW3BsYWNlbWVudF0gOiBwbGFjZW1lbnREYXRhIHx8IHRvcDtcbiAgICB0aGlzW2RlbGF5XSA9IHBhcnNlSW50KG9wdGlvbnNbZGVsYXldIHx8IGRlbGF5RGF0YSkgfHwgMjAwO1xuICAgIHRoaXNbZGlzbWlzc2libGVdID0gb3B0aW9uc1tkaXNtaXNzaWJsZV0gfHwgZGlzbWlzc2libGVEYXRhID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gICAgdGhpc1tjb250YWluZXJdID0gcXVlcnlFbGVtZW50KG9wdGlvbnNbY29udGFpbmVyXSkgPyBxdWVyeUVsZW1lbnQob3B0aW9uc1tjb250YWluZXJdKSBcbiAgICAgICAgICAgICAgICAgICAgOiBxdWVyeUVsZW1lbnQoY29udGFpbmVyRGF0YSkgPyBxdWVyeUVsZW1lbnQoY29udGFpbmVyRGF0YSkgXG4gICAgICAgICAgICAgICAgICAgIDogbmF2YmFyRml4ZWRUb3AgPyBuYXZiYXJGaXhlZFRvcFxuICAgICAgICAgICAgICAgICAgICA6IG5hdmJhckZpeGVkQm90dG9tID8gbmF2YmFyRml4ZWRCb3R0b21cbiAgICAgICAgICAgICAgICAgICAgOiBtb2RhbCA/IG1vZGFsIDogYm9keTtcbiAgXG4gICAgLy8gYmluZCwgY29udGVudFxuICAgIHZhciBzZWxmID0gdGhpcywgXG4gICAgICB0aXRsZVN0cmluZyA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhVGl0bGUpIHx8IG51bGwsXG4gICAgICBjb250ZW50U3RyaW5nID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFDb250ZW50KSB8fCBudWxsO1xuICBcbiAgICBpZiAoICFjb250ZW50U3RyaW5nICYmICF0aGlzW3RlbXBsYXRlXSApIHJldHVybjsgLy8gaW52YWxpZGF0ZVxuICBcbiAgICAvLyBjb25zdGFudHMsIHZhcnNcbiAgICB2YXIgcG9wb3ZlciA9IG51bGwsIHRpbWVyID0gMCwgcGxhY2VtZW50U2V0dGluZyA9IHRoaXNbcGxhY2VtZW50XSxcbiAgICAgIFxuICAgICAgLy8gaGFuZGxlcnNcbiAgICAgIGRpc21pc3NpYmxlSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHBvcG92ZXIgIT09IG51bGwgJiYgZVt0YXJnZXRdID09PSBxdWVyeUVsZW1lbnQoJy5jbG9zZScscG9wb3ZlcikpIHtcbiAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgXG4gICAgICAvLyBwcml2YXRlIG1ldGhvZHNcbiAgICAgIHJlbW92ZVBvcG92ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZltjb250YWluZXJdLnJlbW92ZUNoaWxkKHBvcG92ZXIpO1xuICAgICAgICB0aW1lciA9IG51bGw7IHBvcG92ZXIgPSBudWxsOyBcbiAgICAgIH0sXG4gICAgICBjcmVhdGVQb3BvdmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpdGxlU3RyaW5nID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUaXRsZSk7IC8vIGNoZWNrIGNvbnRlbnQgYWdhaW5cbiAgICAgICAgY29udGVudFN0cmluZyA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhQ29udGVudCk7XG4gIFxuICAgICAgICBwb3BvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkaXYpO1xuICBcbiAgICAgICAgaWYgKCBjb250ZW50U3RyaW5nICE9PSBudWxsICYmIHNlbGZbdGVtcGxhdGVdID09PSBudWxsICkgeyAvL2NyZWF0ZSB0aGUgcG9wb3ZlciBmcm9tIGRhdGEgYXR0cmlidXRlc1xuICBcbiAgICAgICAgICBwb3BvdmVyW3NldEF0dHJpYnV0ZV0oJ3JvbGUnLCd0b29sdGlwJyk7XG4gIFxuICAgICAgICAgIGlmICh0aXRsZVN0cmluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHBvcG92ZXJUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgICAgICAgICBwb3BvdmVyVGl0bGVbc2V0QXR0cmlidXRlXShjbGFzc1N0cmluZyxjb21wb25lbnQrJy10aXRsZScpO1xuICBcbiAgICAgICAgICAgIHBvcG92ZXJUaXRsZS5pbm5lckhUTUwgPSBzZWxmW2Rpc21pc3NpYmxlXSA/IHRpdGxlU3RyaW5nICsgY2xvc2VCdG4gOiB0aXRsZVN0cmluZztcbiAgICAgICAgICAgIHBvcG92ZXIuYXBwZW5kQ2hpbGQocG9wb3ZlclRpdGxlKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIHZhciBwb3BvdmVyQXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGRpdiksIHBvcG92ZXJDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkaXYpO1xuICAgICAgICAgIHBvcG92ZXJBcnJvd1tzZXRBdHRyaWJ1dGVdKGNsYXNzU3RyaW5nLCdhcnJvdycpOyBwb3BvdmVyQ29udGVudFtzZXRBdHRyaWJ1dGVdKGNsYXNzU3RyaW5nLGNvbXBvbmVudCsnLWNvbnRlbnQnKTtcbiAgICAgICAgICBwb3BvdmVyLmFwcGVuZENoaWxkKHBvcG92ZXJBcnJvdyk7IHBvcG92ZXIuYXBwZW5kQ2hpbGQocG9wb3ZlckNvbnRlbnQpO1xuICBcbiAgICAgICAgICAvL3NldCBwb3BvdmVyIGNvbnRlbnRcbiAgICAgICAgICBwb3BvdmVyQ29udGVudC5pbm5lckhUTUwgPSBzZWxmW2Rpc21pc3NpYmxlXSAmJiB0aXRsZVN0cmluZyA9PT0gbnVsbCA/IGNvbnRlbnRTdHJpbmcgKyBjbG9zZUJ0biA6IGNvbnRlbnRTdHJpbmc7XG4gIFxuICAgICAgICB9IGVsc2UgeyAgLy8gb3IgY3JlYXRlIHRoZSBwb3BvdmVyIGZyb20gdGVtcGxhdGVcbiAgICAgICAgICB2YXIgcG9wb3ZlclRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkaXYpO1xuICAgICAgICAgIHBvcG92ZXJUZW1wbGF0ZS5pbm5lckhUTUwgPSBzZWxmW3RlbXBsYXRlXTtcbiAgICAgICAgICBwb3BvdmVyLmlubmVySFRNTCA9IHBvcG92ZXJUZW1wbGF0ZS5maXJzdENoaWxkLmlubmVySFRNTDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy9hcHBlbmQgdG8gdGhlIGNvbnRhaW5lclxuICAgICAgICBzZWxmW2NvbnRhaW5lcl0uYXBwZW5kQ2hpbGQocG9wb3Zlcik7XG4gICAgICAgIHBvcG92ZXJbc3R5bGVdLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBwb3BvdmVyW3NldEF0dHJpYnV0ZV0oY2xhc3NTdHJpbmcsIGNvbXBvbmVudCsgJyAnICsgcGxhY2VtZW50U2V0dGluZyArICcgJyArIHNlbGZbYW5pbWF0aW9uXSk7XG4gICAgICB9LFxuICAgICAgc2hvd1BvcG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICFoYXNDbGFzcyhwb3BvdmVyLGluQ2xhc3MpICYmICggYWRkQ2xhc3MocG9wb3ZlcixpbkNsYXNzKSApO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZVBvcG92ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc3R5bGVUaXAoZWxlbWVudCxwb3BvdmVyLHBsYWNlbWVudFNldHRpbmcsc2VsZltjb250YWluZXJdKTtcbiAgICAgICAgaWYgKCFpc0VsZW1lbnRJblZpZXdwb3J0KHBvcG92ZXIpICkgeyBcbiAgICAgICAgICBwbGFjZW1lbnRTZXR0aW5nID0gdXBkYXRlUGxhY2VtZW50KHBsYWNlbWVudFNldHRpbmcpOyBcbiAgICAgICAgICBzdHlsZVRpcChlbGVtZW50LHBvcG92ZXIscGxhY2VtZW50U2V0dGluZyxzZWxmW2NvbnRhaW5lcl0pOyBcbiAgICAgICAgfVxuICAgICAgfTtcbiAgXG4gICAgLy8gcHVibGljIG1ldGhvZHMgLyBoYW5kbGVyc1xuICAgIHRoaXMudG9nZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocG9wb3ZlciA9PT0gbnVsbCkgeyBzZWxmLnNob3coKTsgfSBcbiAgICAgIGVsc2UgeyBzZWxmLmhpZGUoKTsgfVxuICAgIH07XG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHBvcG92ZXIgPT09IG51bGwpIHtcbiAgICAgICAgICBwbGFjZW1lbnRTZXR0aW5nID0gc2VsZltwbGFjZW1lbnRdOyAvLyB3ZSByZXNldCBwbGFjZW1lbnQgaW4gYWxsIGNhc2VzXG4gICAgICAgICAgY3JlYXRlUG9wb3ZlcigpO1xuICAgICAgICAgIHVwZGF0ZVBvcG92ZXIoKTtcbiAgICAgICAgICBzaG93UG9wb3ZlcigpO1xuICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgc2hvd0V2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICAgIGVtdWxhdGVUcmFuc2l0aW9uRW5kKHBvcG92ZXIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBzaG93bkV2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCAyMCApO1xuICAgIH07XG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHBvcG92ZXIgJiYgcG9wb3ZlciAhPT0gbnVsbCAmJiBoYXNDbGFzcyhwb3BvdmVyLGluQ2xhc3MpKSB7XG4gICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChlbGVtZW50LCBoaWRlRXZlbnQsIGNvbXBvbmVudCk7XG4gICAgICAgICAgcmVtb3ZlQ2xhc3MocG9wb3ZlcixpbkNsYXNzKTtcbiAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChwb3BvdmVyLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlbW92ZVBvcG92ZXIoKTtcbiAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgaGlkZGVuRXZlbnQsIGNvbXBvbmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIHNlbGZbZGVsYXldICk7XG4gICAgfTtcbiAgXG4gICAgLy8gaW5pdFxuICAgIGlmICggIShzdHJpbmdQb3BvdmVyIGluIGVsZW1lbnQpICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuICAgICAgaWYgKHNlbGZbdHJpZ2dlcl0gPT09IGhvdmVyRXZlbnQpIHtcbiAgICAgICAgb24oIGVsZW1lbnQsIG1vdXNlSG92ZXJbMF0sIHNlbGYuc2hvdyApO1xuICAgICAgICBpZiAoIXNlbGZbZGlzbWlzc2libGVdKSB7IG9uKCBlbGVtZW50LCBtb3VzZUhvdmVyWzFdLCBzZWxmLmhpZGUgKTsgfVxuICAgICAgfSBlbHNlIGlmICgvXihjbGlja3xmb2N1cykkLy50ZXN0KHNlbGZbdHJpZ2dlcl0pKSB7XG4gICAgICAgIG9uKCBlbGVtZW50LCBzZWxmW3RyaWdnZXJdLCBzZWxmLnRvZ2dsZSApO1xuICAgICAgICBpZiAoIXNlbGZbZGlzbWlzc2libGVdKSB7IG9uKCBlbGVtZW50LCAnYmx1cicsIHNlbGYuaGlkZSApOyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChzZWxmW2Rpc21pc3NpYmxlXSkgeyBvbiggZG9jdW1lbnQsIGNsaWNrRXZlbnQsIGRpc21pc3NpYmxlSGFuZGxlciApOyB9XG4gICAgXG4gICAgICAvLyBkaXNtaXNzIG9uIHdpbmRvdyByZXNpemVcbiAgICAgICFpc0lFOCAmJiBvbiggZ2xvYmFsT2JqZWN0LCByZXNpemVFdmVudCwgc2VsZi5oaWRlICk7XG4gIFxuICAgIH1cbiAgICBlbGVtZW50W3N0cmluZ1BvcG92ZXJdID0gc2VsZjtcbiAgfTtcbiAgXG4gIC8vIFBPUE9WRVIgREFUQSBBUElcbiAgLy8gPT09PT09PT09PT09PT09PVxuICBpbml0aWFsaXplRGF0YUFQSShzdHJpbmdQb3BvdmVyLCBQb3BvdmVyLCBkYXRhVG9nZ2xlKTtcbiAgXG4gIFxuICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBTY3JvbGxTcHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBcbiAgLy8gU0NST0xMU1BZIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cbiAgdmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudCwgdGhlIGVsZW1lbnQgd2Ugc3B5IG9uXG4gICAgZWxlbWVudCA9IHF1ZXJ5RWxlbWVudChlbGVtZW50KTsgXG4gIFxuICAgIC8vIERBVEEgQVBJXG4gICAgdmFyIHRhcmdldERhdGEgPSBxdWVyeUVsZW1lbnQoZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFUYXJnZXQpKTtcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoICFvcHRpb25zW3RhcmdldF0gJiYgIXRhcmdldERhdGEgKSB7IHJldHVybjsgfSAvLyBpbnZhbGlkYXRlXG4gIFxuICAgIC8vIGV2ZW50IHRhcmdldHMsIGNvbnN0YW50c1xuICAgIHZhciBzcHlUYXJnZXQgPSBvcHRpb25zW3RhcmdldF0gJiYgcXVlcnlFbGVtZW50KG9wdGlvbnNbdGFyZ2V0XSkgfHwgdGFyZ2V0RGF0YSxcbiAgICAgICAgbGlua3MgPSBzcHlUYXJnZXQgJiYgc3B5VGFyZ2V0W2dldEVsZW1lbnRzQnlUYWdOYW1lXSgnQScpLCBcbiAgICAgICAgaXRlbXMgPSBbXSwgdGFyZ2V0SXRlbXMgPSBbXSwgc2Nyb2xsT2Zmc2V0LFxuICAgICAgICBzY3JvbGxUYXJnZXQgPSBlbGVtZW50W29mZnNldEhlaWdodF0gPCBlbGVtZW50W3Njcm9sbEhlaWdodF0gPyBlbGVtZW50IDogZ2xvYmFsT2JqZWN0LCAvLyBkZXRlcm1pbmUgd2hpY2ggaXMgdGhlIHJlYWwgc2Nyb2xsVGFyZ2V0XG4gICAgICAgIGlzV2luZG93ID0gc2Nyb2xsVGFyZ2V0ID09PSBnbG9iYWxPYmplY3Q7ICBcbiAgXG4gICAgLy8gcG9wdWxhdGUgaXRlbXMgYW5kIHRhcmdldHNcbiAgICBmb3IgKHZhciBpPTAsIGlsPWxpbmtzW2xlbmd0aF07IGk8aWw7IGkrKykge1xuICAgICAgdmFyIGhyZWYgPSBsaW5rc1tpXVtnZXRBdHRyaWJ1dGVdKCdocmVmJyksIFxuICAgICAgICAgIHRhcmdldEl0ZW0gPSBocmVmICYmIHRhcmdldHNSZWcudGVzdChocmVmKSAmJiBxdWVyeUVsZW1lbnQoaHJlZik7XG4gICAgICBpZiAoICEhdGFyZ2V0SXRlbSApIHtcbiAgICAgICAgaXRlbXMucHVzaChsaW5rc1tpXSk7XG4gICAgICAgIHRhcmdldEl0ZW1zLnB1c2godGFyZ2V0SXRlbSk7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBwcml2YXRlIG1ldGhvZHNcbiAgICB2YXIgdXBkYXRlSXRlbSA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBpdGVtc1tpbmRleF1bcGFyZW50Tm9kZV0sIC8vIGl0ZW0ncyBwYXJlbnQgTEkgZWxlbWVudFxuICAgICAgICAgIHRhcmdldEl0ZW0gPSB0YXJnZXRJdGVtc1tpbmRleF0sIC8vIHRoZSBtZW51IGl0ZW0gdGFyZ2V0cyB0aGlzIGVsZW1lbnRcbiAgICAgICAgICBkcm9wZG93biA9IGdldENsb3Nlc3QocGFyZW50LCcuZHJvcGRvd24nKSxcbiAgICAgICAgICB0YXJnZXRSZWN0ID0gaXNXaW5kb3cgJiYgdGFyZ2V0SXRlbVtnZXRCb3VuZGluZ0NsaWVudFJlY3RdKCksXG4gIFxuICAgICAgICAgIGlzQWN0aXZlID0gaGFzQ2xhc3MocGFyZW50LGFjdGl2ZSkgfHwgZmFsc2UsXG4gIFxuICAgICAgICAgIHRvcEVkZ2UgPSBpc1dpbmRvdyA/IHRhcmdldFJlY3RbdG9wXSArIHNjcm9sbE9mZnNldCA6IHRhcmdldEl0ZW1bb2Zmc2V0VG9wXSAtICh0YXJnZXRJdGVtc1tpbmRleC0xXSA/IDAgOiAxMCksXG4gICAgICAgICAgYm90dG9tRWRnZSA9IGlzV2luZG93ID8gdGFyZ2V0UmVjdFtib3R0b21dICsgc2Nyb2xsT2Zmc2V0IDogdGFyZ2V0SXRlbXNbaW5kZXgrMV0gPyB0YXJnZXRJdGVtc1tpbmRleCsxXVtvZmZzZXRUb3BdIDogZWxlbWVudFtzY3JvbGxIZWlnaHRdLFxuICBcbiAgICAgICAgICBpbnNpZGUgPSBzY3JvbGxPZmZzZXQgPj0gdG9wRWRnZSAmJiBib3R0b21FZGdlID4gc2Nyb2xsT2Zmc2V0O1xuICBcbiAgICAgICAgaWYgKCAhaXNBY3RpdmUgJiYgaW5zaWRlICkge1xuICAgICAgICAgIGlmICggcGFyZW50LnRhZ05hbWUgPT09ICdMSScgJiYgIWhhc0NsYXNzKHBhcmVudCxhY3RpdmUpICkge1xuICAgICAgICAgICAgYWRkQ2xhc3MocGFyZW50LGFjdGl2ZSk7XG4gICAgICAgICAgICBpc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZHJvcGRvd24gJiYgIWhhc0NsYXNzKGRyb3Bkb3duLGFjdGl2ZSkgKSB7XG4gICAgICAgICAgICAgIGFkZENsYXNzKGRyb3Bkb3duLGFjdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsICdhY3RpdmF0ZScsICdzY3JvbGxzcHknLCBpdGVtc1tpbmRleF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICggIWluc2lkZSApIHtcbiAgICAgICAgICBpZiAoIHBhcmVudC50YWdOYW1lID09PSAnTEknICYmIGhhc0NsYXNzKHBhcmVudCxhY3RpdmUpICkge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MocGFyZW50LGFjdGl2ZSk7XG4gICAgICAgICAgICBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGRyb3Bkb3duICYmIGhhc0NsYXNzKGRyb3Bkb3duLGFjdGl2ZSkgJiYgIWdldEVsZW1lbnRzQnlDbGFzc05hbWUocGFyZW50W3BhcmVudE5vZGVdLGFjdGl2ZSkubGVuZ3RoICkge1xuICAgICAgICAgICAgICByZW1vdmVDbGFzcyhkcm9wZG93bixhY3RpdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICggIWluc2lkZSAmJiAhaXNBY3RpdmUgfHwgaXNBY3RpdmUgJiYgaW5zaWRlICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVwZGF0ZUl0ZW1zID0gZnVuY3Rpb24oKXtcbiAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gaXNXaW5kb3cgPyBnZXRTY3JvbGwoKS55IDogZWxlbWVudFtzY3JvbGxUb3BdO1xuICAgICAgICBmb3IgKHZhciBpbmRleD0wLCBpdGw9aXRlbXNbbGVuZ3RoXTsgaW5kZXg8aXRsOyBpbmRleCsrKSB7XG4gICAgICAgICAgdXBkYXRlSXRlbShpbmRleClcbiAgICAgICAgfVxuICAgICAgfTtcbiAgXG4gICAgLy8gcHVibGljIG1ldGhvZFxuICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHVwZGF0ZUl0ZW1zKCk7XG4gICAgfVxuICBcbiAgICAvLyBpbml0XG4gICAgaWYgKCAhKHN0cmluZ1Njcm9sbFNweSBpbiBlbGVtZW50KSApIHsgLy8gcHJldmVudCBhZGRpbmcgZXZlbnQgaGFuZGxlcnMgdHdpY2VcbiAgICAgIG9uKCBzY3JvbGxUYXJnZXQsIHNjcm9sbEV2ZW50LCB0aGlzLnJlZnJlc2ggKTtcbiAgICAgICFpc0lFOCAmJiBvbiggZ2xvYmFsT2JqZWN0LCByZXNpemVFdmVudCwgdGhpcy5yZWZyZXNoICk7IFxuICAgIH1cbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgICBlbGVtZW50W3N0cmluZ1Njcm9sbFNweV0gPSB0aGlzO1xuICB9O1xuICBcbiAgLy8gU0NST0xMU1BZIERBVEEgQVBJXG4gIC8vID09PT09PT09PT09PT09PT09PVxuICBpbml0aWFsaXplRGF0YUFQSShzdHJpbmdTY3JvbGxTcHksIFNjcm9sbFNweSwgZGF0YVNweSk7XG4gIFxuICBcbiAgLyogTmF0aXZlIEphdmFzY3JpcHQgZm9yIEJvb3RzdHJhcCAzIHwgVGFiXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgXG4gIC8vIFRBQiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09XG4gIHZhciBUYWIgPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucyApIHtcbiAgXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoZWxlbWVudCk7XG4gIFxuICAgIC8vIERBVEEgQVBJXG4gICAgdmFyIGhlaWdodERhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YUhlaWdodCksXG4gICAgICBcbiAgICAgICAgLy8gc3RyaW5nc1xuICAgICAgICBjb21wb25lbnQgPSAndGFiJywgaGVpZ2h0ID0gJ2hlaWdodCcsIGlzQW5pbWF0aW5nID0gJ2lzQW5pbWF0aW5nJztcbiAgXG4gICAgLy8gc2V0IGRlZmF1bHQgYW5pbWF0aW9uIHN0YXRlXG4gICAgZWxlbWVudFtpc0FuaW1hdGluZ10gPSBmYWxzZTtcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzW2hlaWdodF0gPSBzdXBwb3J0VHJhbnNpdGlvbnMgPyAob3B0aW9uc1toZWlnaHRdIHx8IGhlaWdodERhdGEgPT09ICd0cnVlJykgOiBmYWxzZTsgLy8gZmlsdGVyIGxlZ2FjeSBicm93c2Vyc1xuICBcbiAgICAvLyBiaW5kLCBldmVudCB0YXJnZXRzXG4gICAgdmFyIHNlbGYgPSB0aGlzLCBuZXh0LFxuICAgICAgdGFicyA9IGdldENsb3Nlc3QoZWxlbWVudCwnLm5hdicpLFxuICAgICAgdGFic0NvbnRlbnRDb250YWluZXIsXG4gICAgICBkcm9wZG93biA9IHRhYnMgJiYgcXVlcnlFbGVtZW50KCcuZHJvcGRvd24nLHRhYnMpO1xuICBcbiAgICBpZiAoIXRhYnMpIHJldHVybjsgLy8gaW52YWxpZGF0ZSBcbiAgXG4gICAgLy8gcHJpdmF0ZSBtZXRob2RzXG4gICAgdmFyIGdldEFjdGl2ZVRhYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYWN0aXZlVGFicyA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUodGFicyxhY3RpdmUpLCBhY3RpdmVUYWI7XG4gICAgICAgIGlmICggYWN0aXZlVGFic1tsZW5ndGhdID09PSAxICYmICFoYXNDbGFzcyhhY3RpdmVUYWJzWzBdLCdkcm9wZG93bicpICkge1xuICAgICAgICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZVRhYnNbMF07XG4gICAgICAgIH0gZWxzZSBpZiAoIGFjdGl2ZVRhYnNbbGVuZ3RoXSA+IDEgKSB7XG4gICAgICAgICAgYWN0aXZlVGFiID0gYWN0aXZlVGFic1thY3RpdmVUYWJzW2xlbmd0aF0tMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGl2ZVRhYltnZXRFbGVtZW50c0J5VGFnTmFtZV0oJ0EnKVswXTtcbiAgICAgIH0sXG4gICAgICBnZXRBY3RpdmVDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBxdWVyeUVsZW1lbnQoZ2V0QWN0aXZlVGFiKClbZ2V0QXR0cmlidXRlXSgnaHJlZicpKTtcbiAgICAgIH0sXG4gICAgICAvLyBoYW5kbGVyXG4gICAgICBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbmV4dCA9IGVbdGFyZ2V0XVtnZXRBdHRyaWJ1dGVdKGRhdGFUb2dnbGUpID09PSBjb21wb25lbnQgfHwgdGFyZ2V0c1JlZy50ZXN0KGVbdGFyZ2V0XVtnZXRBdHRyaWJ1dGVdKCdocmVmJykpIFxuICAgICAgICAgICAgID8gZVt0YXJnZXRdIDogZVt0YXJnZXRdW3BhcmVudE5vZGVdOyAvLyBhbGxvdyBmb3IgY2hpbGQgZWxlbWVudHMgbGlrZSBpY29ucyB0byB1c2UgdGhlIGhhbmRsZXJcbiAgICAgICAgc2VsZi5zaG93KCk7XG4gICAgICB9O1xuICBcbiAgICAvLyBwdWJsaWMgbWV0aG9kXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKSB7IC8vIHRoZSB0YWIgd2UgY2xpY2tlZCBpcyBub3cgdGhlIG5leHQgdGFiXG4gICAgICB2YXIgbmV4dENvbnRlbnQgPSBxdWVyeUVsZW1lbnQobmV4dFtnZXRBdHRyaWJ1dGVdKCdocmVmJykpLCAvL3RoaXMgaXMgdGhlIGFjdHVhbCBvYmplY3QsIHRoZSBuZXh0IHRhYiBjb250ZW50IHRvIGFjdGl2YXRlXG4gICAgICAgIGFjdGl2ZVRhYiA9IGdldEFjdGl2ZVRhYigpLCBhY3RpdmVDb250ZW50ID0gZ2V0QWN0aXZlQ29udGVudCgpOyAgICAgIFxuICAgICAgXG4gICAgICBpZiAoICghYWN0aXZlVGFiW2lzQW5pbWF0aW5nXSB8fCAhbmV4dFtpc0FuaW1hdGluZ10pICYmICFoYXNDbGFzcyhuZXh0W3BhcmVudE5vZGVdLGFjdGl2ZSkgKSB7XG4gICAgICAgIGFjdGl2ZVRhYltpc0FuaW1hdGluZ10gPSBuZXh0W2lzQW5pbWF0aW5nXSA9IHRydWU7XG4gICAgICAgIHJlbW92ZUNsYXNzKGFjdGl2ZVRhYltwYXJlbnROb2RlXSxhY3RpdmUpO1xuICAgICAgICBhZGRDbGFzcyhuZXh0W3BhcmVudE5vZGVdLGFjdGl2ZSk7XG4gIFxuICAgICAgICBpZiAoIGRyb3Bkb3duICkge1xuICAgICAgICAgIGlmICggIWhhc0NsYXNzKGVsZW1lbnRbcGFyZW50Tm9kZV1bcGFyZW50Tm9kZV0sJ2Ryb3Bkb3duLW1lbnUnKSApIHtcbiAgICAgICAgICAgIGlmIChoYXNDbGFzcyhkcm9wZG93bixhY3RpdmUpKSByZW1vdmVDbGFzcyhkcm9wZG93bixhY3RpdmUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWhhc0NsYXNzKGRyb3Bkb3duLGFjdGl2ZSkpIGFkZENsYXNzKGRyb3Bkb3duLGFjdGl2ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGFic0NvbnRlbnRDb250YWluZXIpIHRhYnNDb250ZW50Q29udGFpbmVyW3N0eWxlXVtoZWlnaHRdID0gZ2V0TWF4SGVpZ2h0KGFjdGl2ZUNvbnRlbnQpICsgJ3B4JzsgLy8gaGVpZ2h0IGFuaW1hdGlvblxuICBcbiAgICAgICAgKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgcmVtb3ZlQ2xhc3MoYWN0aXZlQ29udGVudCxpbkNsYXNzKTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGFjdGl2ZVRhYiwgaGlkZUV2ZW50LCBjb21wb25lbnQsIG5leHQpO1xuICAgICAgICAgIChmdW5jdGlvbigpe1xuICAgICAgICAgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQoYWN0aXZlQ29udGVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFjdGl2ZUNvbnRlbnQsYWN0aXZlKTtcbiAgICAgICAgICAgICAgYWRkQ2xhc3MobmV4dENvbnRlbnQsYWN0aXZlKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhuZXh0Q29udGVudCxpbkNsYXNzKTtcbiAgICAgICAgICAgICAgICBuZXh0Q29udGVudFtvZmZzZXRIZWlnaHRdO1xuICAgICAgICAgICAgICAgIGlmICh0YWJzQ29udGVudENvbnRhaW5lcikgYWRkQ2xhc3ModGFic0NvbnRlbnRDb250YWluZXIsY29sbGFwc2luZyk7XG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChuZXh0LCBzaG93RXZlbnQsIGNvbXBvbmVudCwgYWN0aXZlVGFiKTtcbiAgICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYodGFic0NvbnRlbnRDb250YWluZXIpIHRhYnNDb250ZW50Q29udGFpbmVyW3N0eWxlXVtoZWlnaHRdID0gZ2V0TWF4SGVpZ2h0KG5leHRDb250ZW50KSArICdweCc7IC8vIGhlaWdodCBhbmltYXRpb25cbiAgICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwQ3VzdG9tRXZlbnQuY2FsbChhY3RpdmVUYWIsIGhpZGRlbkV2ZW50LCBjb21wb25lbnQsIG5leHQpO1xuICAgICAgICAgICAgICAgICAgfSgpKTtcbiAgICAgICAgICAgICAgICB9KCkpO1xuICAgICAgICAgICAgICB9LDIwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0oKSk7XG4gICAgICAgIH0oKSk7XG4gIFxuICAgICAgICAoZnVuY3Rpb24oKXtcbiAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZChuZXh0Q29udGVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKG5leHQsIHNob3duRXZlbnQsIGNvbXBvbmVudCwgYWN0aXZlVGFiKTtcbiAgICAgICAgICAgIGlmICh0YWJzQ29udGVudENvbnRhaW5lcikgeyAvLyBoZWlnaHQgYW5pbWF0aW9uXG4gICAgICAgICAgICAgIChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGVtdWxhdGVUcmFuc2l0aW9uRW5kKHRhYnNDb250ZW50Q29udGFpbmVyLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB0YWJzQ29udGVudENvbnRhaW5lcltzdHlsZV1baGVpZ2h0XSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0YWJzQ29udGVudENvbnRhaW5lcixjb2xsYXBzaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiW2lzQW5pbWF0aW5nXSA9IG5leHRbaXNBbmltYXRpbmddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB9LDIwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0oKSk7XG4gICAgICAgICAgICB9IGVsc2UgeyBcbiAgICAgICAgICAgICAgYWN0aXZlVGFiW2lzQW5pbWF0aW5nXSA9IG5leHRbaXNBbmltYXRpbmddID0gZmFsc2U7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KCkpO1xuICAgICAgfVxuICAgIH07XG4gIFxuICAgIC8vIGluaXRcbiAgICBpZiAoICEoc3RyaW5nVGFiIGluIGVsZW1lbnQpICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuICAgICAgb24oZWxlbWVudCwgY2xpY2tFdmVudCwgY2xpY2tIYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXNbaGVpZ2h0XSkgeyB0YWJzQ29udGVudENvbnRhaW5lciA9IGdldEFjdGl2ZUNvbnRlbnQoKVtwYXJlbnROb2RlXTsgfVxuICAgIGVsZW1lbnRbc3RyaW5nVGFiXSA9IHRoaXM7XG4gIH07XG4gIFxuICAvLyBUQUIgREFUQSBBUElcbiAgLy8gPT09PT09PT09PT09XG4gIGluaXRpYWxpemVEYXRhQVBJKHN0cmluZ1RhYiwgVGFiLCBkYXRhVG9nZ2xlKTtcbiAgXG4gIFxuICAvKiBOYXRpdmUgSmF2YXNjcmlwdCBmb3IgQm9vdHN0cmFwIDMgfCBUb29sdGlwXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIFxuICAvLyBUT09MVElQIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09XG4gIHZhciBUb29sdGlwID0gZnVuY3Rpb24oIGVsZW1lbnQsb3B0aW9ucyApIHtcbiAgXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gZWxlbWVudFxuICAgIGVsZW1lbnQgPSBxdWVyeUVsZW1lbnQoZWxlbWVudCk7XG4gIFxuICAgIC8vIERBVEEgQVBJXG4gICAgdmFyIGFuaW1hdGlvbkRhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YUFuaW1hdGlvbik7XG4gICAgICAgIHBsYWNlbWVudERhdGEgPSBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YVBsYWNlbWVudCk7XG4gICAgICAgIGRlbGF5RGF0YSA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXShkYXRhRGVsYXkpLFxuICAgICAgICBjb250YWluZXJEYXRhID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFDb250YWluZXIpLFxuICAgICAgICBcbiAgICAgICAgLy8gc3RyaW5nc1xuICAgICAgICBjb21wb25lbnQgPSAndG9vbHRpcCcsXG4gICAgICAgIGNsYXNzU3RyaW5nID0gJ2NsYXNzJyxcbiAgICAgICAgdGl0bGUgPSAndGl0bGUnLFxuICAgICAgICBmYWRlID0gJ2ZhZGUnLFxuICAgICAgICBkaXYgPSAnZGl2JyxcbiAgXG4gICAgICAgIC8vIG1heWJlIHRoZSBlbGVtZW50IGlzIGluc2lkZSBhIG1vZGFsXG4gICAgICAgIG1vZGFsID0gZ2V0Q2xvc2VzdChlbGVtZW50LCcubW9kYWwnKSxcbiAgICAgICAgXG4gICAgICAgIC8vIG1heWJlIHRoZSBlbGVtZW50IGlzIGluc2lkZSBhIGZpeGVkIG5hdmJhclxuICAgICAgICBuYXZiYXJGaXhlZFRvcCA9IGdldENsb3Nlc3QoZWxlbWVudCxmaXhlZFRvcCksXG4gICAgICAgIG5hdmJhckZpeGVkQm90dG9tID0gZ2V0Q2xvc2VzdChlbGVtZW50LGZpeGVkQm90dG9tKTtcbiAgXG4gICAgLy8gc2V0IG9wdGlvbnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzW2FuaW1hdGlvbl0gPSBvcHRpb25zW2FuaW1hdGlvbl0gJiYgb3B0aW9uc1thbmltYXRpb25dICE9PSBmYWRlID8gb3B0aW9uc1thbmltYXRpb25dIDogYW5pbWF0aW9uRGF0YSB8fCBmYWRlO1xuICAgIHRoaXNbcGxhY2VtZW50XSA9IG9wdGlvbnNbcGxhY2VtZW50XSA/IG9wdGlvbnNbcGxhY2VtZW50XSA6IHBsYWNlbWVudERhdGEgfHwgdG9wO1xuICAgIHRoaXNbZGVsYXldID0gcGFyc2VJbnQob3B0aW9uc1tkZWxheV0gfHwgZGVsYXlEYXRhKSB8fCAyMDA7XG4gICAgdGhpc1tjb250YWluZXJdID0gcXVlcnlFbGVtZW50KG9wdGlvbnNbY29udGFpbmVyXSkgPyBxdWVyeUVsZW1lbnQob3B0aW9uc1tjb250YWluZXJdKSBcbiAgICAgICAgICAgICAgICAgICAgOiBxdWVyeUVsZW1lbnQoY29udGFpbmVyRGF0YSkgPyBxdWVyeUVsZW1lbnQoY29udGFpbmVyRGF0YSkgXG4gICAgICAgICAgICAgICAgICAgIDogbmF2YmFyRml4ZWRUb3AgPyBuYXZiYXJGaXhlZFRvcFxuICAgICAgICAgICAgICAgICAgICA6IG5hdmJhckZpeGVkQm90dG9tID8gbmF2YmFyRml4ZWRCb3R0b21cbiAgICAgICAgICAgICAgICAgICAgOiBtb2RhbCA/IG1vZGFsIDogYm9keTtcbiAgXG4gICAgLy8gYmluZCwgZXZlbnQgdGFyZ2V0cywgdGl0bGUgYW5kIGNvbnN0YW50c1xuICAgIHZhciBzZWxmID0gdGhpcywgdGltZXIgPSAwLCBwbGFjZW1lbnRTZXR0aW5nID0gdGhpc1twbGFjZW1lbnRdLCB0b29sdGlwID0gbnVsbCxcbiAgICAgIHRpdGxlU3RyaW5nID0gZWxlbWVudFtnZXRBdHRyaWJ1dGVdKHRpdGxlKSB8fCBlbGVtZW50W2dldEF0dHJpYnV0ZV0oZGF0YU9yaWdpbmFsVGl0bGUpO1xuICBcbiAgICBpZiAoICF0aXRsZVN0cmluZyApIHJldHVybjsgLy8gaW52YWxpZGF0ZVxuICBcbiAgICAvLyBwcml2YXRlIG1ldGhvZHNcbiAgICB2YXIgcmVtb3ZlVG9vbFRpcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmW2NvbnRhaW5lcl0ucmVtb3ZlQ2hpbGQodG9vbHRpcCk7XG4gICAgICAgIHRvb2x0aXAgPSBudWxsOyB0aW1lciA9IG51bGw7XG4gICAgICB9LFxuICAgICAgY3JlYXRlVG9vbFRpcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aXRsZVN0cmluZyA9IGVsZW1lbnRbZ2V0QXR0cmlidXRlXSh0aXRsZSkgfHwgZWxlbWVudFtnZXRBdHRyaWJ1dGVdKGRhdGFPcmlnaW5hbFRpdGxlKTsgLy8gcmVhZCB0aGUgdGl0bGUgYWdhaW5cbiAgICAgICAgdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2KTtcbiAgICAgICAgdG9vbHRpcFtzZXRBdHRyaWJ1dGVdKCdyb2xlJyxjb21wb25lbnQpO1xuICBcbiAgICAgICAgdmFyIHRvb2x0aXBBcnJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGl2KSwgdG9vbHRpcElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkaXYpO1xuICAgICAgICB0b29sdGlwQXJyb3dbc2V0QXR0cmlidXRlXShjbGFzc1N0cmluZywgY29tcG9uZW50KyctYXJyb3cnKTsgdG9vbHRpcElubmVyW3NldEF0dHJpYnV0ZV0oY2xhc3NTdHJpbmcsY29tcG9uZW50KyctaW5uZXInKTtcbiAgXG4gICAgICAgIHRvb2x0aXAuYXBwZW5kQ2hpbGQodG9vbHRpcEFycm93KTsgdG9vbHRpcC5hcHBlbmRDaGlsZCh0b29sdGlwSW5uZXIpO1xuICBcbiAgICAgICAgdG9vbHRpcElubmVyLmlubmVySFRNTCA9IHRpdGxlU3RyaW5nO1xuICBcbiAgICAgICAgc2VsZltjb250YWluZXJdLmFwcGVuZENoaWxkKHRvb2x0aXApO1xuICAgICAgICB0b29sdGlwW3NldEF0dHJpYnV0ZV0oY2xhc3NTdHJpbmcsIGNvbXBvbmVudCArICcgJyArIHBsYWNlbWVudFNldHRpbmcgKyAnICcgKyBzZWxmW2FuaW1hdGlvbl0pO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZVRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0eWxlVGlwKGVsZW1lbnQsdG9vbHRpcCxwbGFjZW1lbnRTZXR0aW5nLHNlbGZbY29udGFpbmVyXSk7XG4gICAgICAgIGlmICghaXNFbGVtZW50SW5WaWV3cG9ydCh0b29sdGlwKSApIHsgXG4gICAgICAgICAgcGxhY2VtZW50U2V0dGluZyA9IHVwZGF0ZVBsYWNlbWVudChwbGFjZW1lbnRTZXR0aW5nKTsgXG4gICAgICAgICAgc3R5bGVUaXAoZWxlbWVudCx0b29sdGlwLHBsYWNlbWVudFNldHRpbmcsc2VsZltjb250YWluZXJdKTsgXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzaG93VG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIWhhc0NsYXNzKHRvb2x0aXAsaW5DbGFzcykgJiYgKCBhZGRDbGFzcyh0b29sdGlwLGluQ2xhc3MpICk7XG4gICAgICB9O1xuICBcbiAgICAvLyBwdWJsaWMgbWV0aG9kc1xuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0b29sdGlwID09PSBudWxsKSB7XG4gICAgICAgICAgcGxhY2VtZW50U2V0dGluZyA9IHNlbGZbcGxhY2VtZW50XTsgLy8gd2UgcmVzZXQgcGxhY2VtZW50IGluIGFsbCBjYXNlc1xuICAgICAgICAgIGNyZWF0ZVRvb2xUaXAoKTtcbiAgICAgICAgICB1cGRhdGVUb29sdGlwKCk7XG4gICAgICAgICAgc2hvd1Rvb2x0aXAoKTtcbiAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIHNob3dFdmVudCwgY29tcG9uZW50KTtcbiAgICAgICAgICBlbXVsYXRlVHJhbnNpdGlvbkVuZCh0b29sdGlwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgc2hvd25FdmVudCwgY29tcG9uZW50KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMjAgKTtcbiAgICB9O1xuICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0b29sdGlwICYmIHRvb2x0aXAgIT09IG51bGwgJiYgaGFzQ2xhc3ModG9vbHRpcCxpbkNsYXNzKSkge1xuICAgICAgICAgIGJvb3RzdHJhcEN1c3RvbUV2ZW50LmNhbGwoZWxlbWVudCwgaGlkZUV2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICAgIHJlbW92ZUNsYXNzKHRvb2x0aXAsaW5DbGFzcyk7XG4gICAgICAgICAgZW11bGF0ZVRyYW5zaXRpb25FbmQodG9vbHRpcCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZW1vdmVUb29sVGlwKCk7XG4gICAgICAgICAgICBib290c3RyYXBDdXN0b21FdmVudC5jYWxsKGVsZW1lbnQsIGhpZGRlbkV2ZW50LCBjb21wb25lbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCBzZWxmW2RlbGF5XSk7XG4gICAgfTtcbiAgICB0aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0b29sdGlwKSB7IHNlbGYuc2hvdygpOyB9IFxuICAgICAgZWxzZSB7IHNlbGYuaGlkZSgpOyB9XG4gICAgfTtcbiAgXG4gICAgLy8gaW5pdFxuICAgIGlmICggIShzdHJpbmdUb29sdGlwIGluIGVsZW1lbnQpICkgeyAvLyBwcmV2ZW50IGFkZGluZyBldmVudCBoYW5kbGVycyB0d2ljZVxuICAgICAgZWxlbWVudFtzZXRBdHRyaWJ1dGVdKGRhdGFPcmlnaW5hbFRpdGxlLHRpdGxlU3RyaW5nKTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHRpdGxlKTtcbiAgICAgIG9uKGVsZW1lbnQsIG1vdXNlSG92ZXJbMF0sIHRoaXMuc2hvdyk7XG4gICAgICBvbihlbGVtZW50LCBtb3VzZUhvdmVyWzFdLCB0aGlzLmhpZGUpO1xuICAgIH1cbiAgICBlbGVtZW50W3N0cmluZ1Rvb2x0aXBdID0gdGhpcztcbiAgfTtcbiAgXG4gIC8vIFRPT0xUSVAgREFUQSBBUElcbiAgLy8gPT09PT09PT09PT09PT09PT1cbiAgaW5pdGlhbGl6ZURhdGFBUEkoc3RyaW5nVG9vbHRpcCwgVG9vbHRpcCwgZGF0YVRvZ2dsZSk7XG4gIFxuICBcbiAgcmV0dXJuIHtcbiAgICBBZmZpeDogQWZmaXgsXG4gICAgQWxlcnQ6IEFsZXJ0LFxuICAgIEJ1dHRvbjogQnV0dG9uLFxuICAgIENhcm91c2VsOiBDYXJvdXNlbCxcbiAgICBDb2xsYXBzZTogQ29sbGFwc2UsXG4gICAgRHJvcGRvd246IERyb3Bkb3duLFxuICAgIE1vZGFsOiBNb2RhbCxcbiAgICBQb3BvdmVyOiBQb3BvdmVyLFxuICAgIFNjcm9sbFNweTogU2Nyb2xsU3B5LFxuICAgIFRhYjogVGFiLFxuICAgIFRvb2x0aXA6IFRvb2x0aXBcbiAgfTtcbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9ib290c3RyYXAubmF0aXZlL2Rpc3QvYm9vdHN0cmFwLW5hdGl2ZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9